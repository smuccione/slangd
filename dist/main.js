var Op=Object.create;var ei=Object.defineProperty;var xp=Object.getOwnPropertyDescriptor;var Ip=Object.getOwnPropertyNames;var Fp=Object.getPrototypeOf,Lp=Object.prototype.hasOwnProperty;var Xo=n=>ei(n,"__esModule",{value:!0});var D=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),Np=(n,e)=>{Xo(n);for(var t in e)ei(n,t,{get:e[t],enumerable:!0})},Ap=(n,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Ip(e))!Lp.call(n,r)&&r!=="default"&&ei(n,r,{get:()=>e[r],enumerable:!(t=xp(e,r))||t.enumerable});return n},Gt=n=>Ap(Xo(ei(n!=null?Op(Fp(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var Ze=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{f(t.next(l))}catch(y){i(y)}},a=l=>{try{f(t.throw(l))}catch(y){i(y)}},f=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,a);f((t=t.apply(n,e)).next())});var Rr=D((qC,Jo)=>{var Mp="2.0.0",jp=256,$p=Number.MAX_SAFE_INTEGER||9007199254740991,Hp=16;Jo.exports={SEMVER_SPEC_VERSION:Mp,MAX_LENGTH:jp,MAX_SAFE_INTEGER:$p,MAX_SAFE_COMPONENT_LENGTH:Hp}});var br=D((kC,Qo)=>{var Wp=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};Qo.exports=Wp});var En=D((fn,Yo)=>{var{MAX_SAFE_COMPONENT_LENGTH:ls}=Rr(),Bp=br();fn=Yo.exports={};var Kp=fn.re=[],M=fn.src=[],j=fn.t={},Up=0,ee=(n,e,t)=>{let r=Up++;Bp(r,e),j[n]=r,M[r]=e,Kp[r]=new RegExp(e,t?"g":void 0)};ee("NUMERICIDENTIFIER","0|[1-9]\\d*");ee("NUMERICIDENTIFIERLOOSE","[0-9]+");ee("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");ee("MAINVERSION",`(${M[j.NUMERICIDENTIFIER]})\\.(${M[j.NUMERICIDENTIFIER]})\\.(${M[j.NUMERICIDENTIFIER]})`);ee("MAINVERSIONLOOSE",`(${M[j.NUMERICIDENTIFIERLOOSE]})\\.(${M[j.NUMERICIDENTIFIERLOOSE]})\\.(${M[j.NUMERICIDENTIFIERLOOSE]})`);ee("PRERELEASEIDENTIFIER",`(?:${M[j.NUMERICIDENTIFIER]}|${M[j.NONNUMERICIDENTIFIER]})`);ee("PRERELEASEIDENTIFIERLOOSE",`(?:${M[j.NUMERICIDENTIFIERLOOSE]}|${M[j.NONNUMERICIDENTIFIER]})`);ee("PRERELEASE",`(?:-(${M[j.PRERELEASEIDENTIFIER]}(?:\\.${M[j.PRERELEASEIDENTIFIER]})*))`);ee("PRERELEASELOOSE",`(?:-?(${M[j.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${M[j.PRERELEASEIDENTIFIERLOOSE]})*))`);ee("BUILDIDENTIFIER","[0-9A-Za-z-]+");ee("BUILD",`(?:\\+(${M[j.BUILDIDENTIFIER]}(?:\\.${M[j.BUILDIDENTIFIER]})*))`);ee("FULLPLAIN",`v?${M[j.MAINVERSION]}${M[j.PRERELEASE]}?${M[j.BUILD]}?`);ee("FULL",`^${M[j.FULLPLAIN]}$`);ee("LOOSEPLAIN",`[v=\\s]*${M[j.MAINVERSIONLOOSE]}${M[j.PRERELEASELOOSE]}?${M[j.BUILD]}?`);ee("LOOSE",`^${M[j.LOOSEPLAIN]}$`);ee("GTLT","((?:<|>)?=?)");ee("XRANGEIDENTIFIERLOOSE",`${M[j.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ee("XRANGEIDENTIFIER",`${M[j.NUMERICIDENTIFIER]}|x|X|\\*`);ee("XRANGEPLAIN",`[v=\\s]*(${M[j.XRANGEIDENTIFIER]})(?:\\.(${M[j.XRANGEIDENTIFIER]})(?:\\.(${M[j.XRANGEIDENTIFIER]})(?:${M[j.PRERELEASE]})?${M[j.BUILD]}?)?)?`);ee("XRANGEPLAINLOOSE",`[v=\\s]*(${M[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${M[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${M[j.XRANGEIDENTIFIERLOOSE]})(?:${M[j.PRERELEASELOOSE]})?${M[j.BUILD]}?)?)?`);ee("XRANGE",`^${M[j.GTLT]}\\s*${M[j.XRANGEPLAIN]}$`);ee("XRANGELOOSE",`^${M[j.GTLT]}\\s*${M[j.XRANGEPLAINLOOSE]}$`);ee("COERCE",`(^|[^\\d])(\\d{1,${ls}})(?:\\.(\\d{1,${ls}}))?(?:\\.(\\d{1,${ls}}))?(?:$|[^\\d])`);ee("COERCERTL",M[j.COERCE],!0);ee("LONETILDE","(?:~>?)");ee("TILDETRIM",`(\\s*)${M[j.LONETILDE]}\\s+`,!0);fn.tildeTrimReplace="$1~";ee("TILDE",`^${M[j.LONETILDE]}${M[j.XRANGEPLAIN]}$`);ee("TILDELOOSE",`^${M[j.LONETILDE]}${M[j.XRANGEPLAINLOOSE]}$`);ee("LONECARET","(?:\\^)");ee("CARETTRIM",`(\\s*)${M[j.LONECARET]}\\s+`,!0);fn.caretTrimReplace="$1^";ee("CARET",`^${M[j.LONECARET]}${M[j.XRANGEPLAIN]}$`);ee("CARETLOOSE",`^${M[j.LONECARET]}${M[j.XRANGEPLAINLOOSE]}$`);ee("COMPARATORLOOSE",`^${M[j.GTLT]}\\s*(${M[j.LOOSEPLAIN]})$|^$`);ee("COMPARATOR",`^${M[j.GTLT]}\\s*(${M[j.FULLPLAIN]})$|^$`);ee("COMPARATORTRIM",`(\\s*)${M[j.GTLT]}\\s*(${M[j.LOOSEPLAIN]}|${M[j.XRANGEPLAIN]})`,!0);fn.comparatorTrimReplace="$1$2$3";ee("HYPHENRANGE",`^\\s*(${M[j.XRANGEPLAIN]})\\s+-\\s+(${M[j.XRANGEPLAIN]})\\s*$`);ee("HYPHENRANGELOOSE",`^\\s*(${M[j.XRANGEPLAINLOOSE]})\\s+-\\s+(${M[j.XRANGEPLAINLOOSE]})\\s*$`);ee("STAR","(<|>)?=?\\s*\\*");ee("GTE0","^\\s*>=\\s*0.0.0\\s*$");ee("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var _r=D((OC,Zo)=>{var zp=["includePrerelease","loose","rtl"],Gp=n=>n?typeof n!="object"?{loose:!0}:zp.filter(e=>n[e]).reduce((e,t)=>(e[t]=!0,e),{}):{};Zo.exports=Gp});var ti=D((xC,na)=>{var ea=/^[0-9]+$/,ta=(n,e)=>{let t=ea.test(n),r=ea.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},Vp=(n,e)=>ta(e,n);na.exports={compareIdentifiers:ta,rcompareIdentifiers:Vp}});var ze=D((IC,oa)=>{var ni=br(),{MAX_LENGTH:ra,MAX_SAFE_INTEGER:ri}=Rr(),{re:ia,t:sa}=En(),Xp=_r(),{compareIdentifiers:Cr}=ti(),bt=class{constructor(e,t){if(t=Xp(t),e instanceof bt){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>ra)throw new TypeError(`version is longer than ${ra} characters`);ni("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?ia[sa.LOOSE]:ia[sa.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>ri||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ri||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ri||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<ri)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ni("SemVer.compare",this.version,this.options,e),!(e instanceof bt)){if(typeof e=="string"&&e===this.version)return 0;e=new bt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof bt||(e=new bt(e,this.options)),Cr(this.major,e.major)||Cr(this.minor,e.minor)||Cr(this.patch,e.patch)}comparePre(e){if(e instanceof bt||(e=new bt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(ni("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Cr(r,i)}while(++t)}compareBuild(e){e instanceof bt||(e=new bt(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(ni("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Cr(r,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};oa.exports=bt});var Pn=D((FC,la)=>{var{MAX_LENGTH:Jp}=Rr(),{re:aa,t:ca}=En(),ua=ze(),Qp=_r(),Yp=(n,e)=>{if(e=Qp(e),n instanceof ua)return n;if(typeof n!="string"||n.length>Jp||!(e.loose?aa[ca.LOOSE]:aa[ca.FULL]).test(n))return null;try{return new ua(n,e)}catch{return null}};la.exports=Yp});var fa=D((LC,da)=>{var Zp=Pn(),eg=(n,e)=>{let t=Zp(n,e);return t?t.version:null};da.exports=eg});var pa=D((NC,ha)=>{var tg=Pn(),ng=(n,e)=>{let t=tg(n.trim().replace(/^[=v]+/,""),e);return t?t.version:null};ha.exports=ng});var ma=D((AC,ga)=>{var rg=ze(),ig=(n,e,t,r)=>{typeof t=="string"&&(r=t,t=void 0);try{return new rg(n,t).inc(e,r).version}catch{return null}};ga.exports=ig});var _t=D((MC,ya)=>{var va=ze(),sg=(n,e,t)=>new va(n,t).compare(new va(e,t));ya.exports=sg});var ii=D((jC,Ra)=>{var og=_t(),ag=(n,e,t)=>og(n,e,t)===0;Ra.exports=ag});var Ca=D(($C,_a)=>{var ba=Pn(),cg=ii(),ug=(n,e)=>{if(cg(n,e))return null;{let t=ba(n),r=ba(e),i=t.prerelease.length||r.prerelease.length,s=i?"pre":"",a=i?"prerelease":"";for(let f in t)if((f==="major"||f==="minor"||f==="patch")&&t[f]!==r[f])return s+f;return a}};_a.exports=ug});var Sa=D((HC,wa)=>{var lg=ze(),dg=(n,e)=>new lg(n,e).major;wa.exports=dg});var Da=D((WC,Ta)=>{var fg=ze(),hg=(n,e)=>new fg(n,e).minor;Ta.exports=hg});var Pa=D((BC,Ea)=>{var pg=ze(),gg=(n,e)=>new pg(n,e).patch;Ea.exports=gg});var ka=D((KC,qa)=>{var mg=Pn(),vg=(n,e)=>{let t=mg(n,e);return t&&t.prerelease.length?t.prerelease:null};qa.exports=vg});var xa=D((UC,Oa)=>{var yg=_t(),Rg=(n,e,t)=>yg(e,n,t);Oa.exports=Rg});var Fa=D((zC,Ia)=>{var bg=_t(),_g=(n,e)=>bg(n,e,!0);Ia.exports=_g});var si=D((GC,Na)=>{var La=ze(),Cg=(n,e,t)=>{let r=new La(n,t),i=new La(e,t);return r.compare(i)||r.compareBuild(i)};Na.exports=Cg});var Ma=D((VC,Aa)=>{var wg=si(),Sg=(n,e)=>n.sort((t,r)=>wg(t,r,e));Aa.exports=Sg});var $a=D((XC,ja)=>{var Tg=si(),Dg=(n,e)=>n.sort((t,r)=>Tg(r,t,e));ja.exports=Dg});var wr=D((JC,Ha)=>{var Eg=_t(),Pg=(n,e,t)=>Eg(n,e,t)>0;Ha.exports=Pg});var oi=D((QC,Wa)=>{var qg=_t(),kg=(n,e,t)=>qg(n,e,t)<0;Wa.exports=kg});var ds=D((YC,Ba)=>{var Og=_t(),xg=(n,e,t)=>Og(n,e,t)!==0;Ba.exports=xg});var ai=D((ZC,Ka)=>{var Ig=_t(),Fg=(n,e,t)=>Ig(n,e,t)>=0;Ka.exports=Fg});var ci=D((ew,Ua)=>{var Lg=_t(),Ng=(n,e,t)=>Lg(n,e,t)<=0;Ua.exports=Ng});var fs=D((tw,za)=>{var Ag=ii(),Mg=ds(),jg=wr(),$g=ai(),Hg=oi(),Wg=ci(),Bg=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return Ag(n,t,r);case"!=":return Mg(n,t,r);case">":return jg(n,t,r);case">=":return $g(n,t,r);case"<":return Hg(n,t,r);case"<=":return Wg(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};za.exports=Bg});var Va=D((nw,Ga)=>{var Kg=ze(),Ug=Pn(),{re:ui,t:li}=En(),zg=(n,e)=>{if(n instanceof Kg)return n;if(typeof n=="number"&&(n=String(n)),typeof n!="string")return null;e=e||{};let t=null;if(!e.rtl)t=n.match(ui[li.COERCE]);else{let r;for(;(r=ui[li.COERCERTL].exec(n))&&(!t||t.index+t[0].length!==n.length);)(!t||r.index+r[0].length!==t.index+t[0].length)&&(t=r),ui[li.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;ui[li.COERCERTL].lastIndex=-1}return t===null?null:Ug(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};Ga.exports=zg});var Ja=D((rw,Xa)=>{"use strict";Xa.exports=function(n){n.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Ya=D((iw,Qa)=>{"use strict";Qa.exports=oe;oe.Node=qn;oe.create=oe;function oe(n){var e=this;if(e instanceof oe||(e=new oe),e.tail=null,e.head=null,e.length=0,n&&typeof n.forEach=="function")n.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,r=arguments.length;t<r;t++)e.push(arguments[t]);return e}oe.prototype.removeNode=function(n){if(n.list!==this)throw new Error("removing node which does not belong to this list");var e=n.next,t=n.prev;return e&&(e.prev=t),t&&(t.next=e),n===this.head&&(this.head=e),n===this.tail&&(this.tail=t),n.list.length--,n.next=null,n.prev=null,n.list=null,e};oe.prototype.unshiftNode=function(n){if(n!==this.head){n.list&&n.list.removeNode(n);var e=this.head;n.list=this,n.next=e,e&&(e.prev=n),this.head=n,this.tail||(this.tail=n),this.length++}};oe.prototype.pushNode=function(n){if(n!==this.tail){n.list&&n.list.removeNode(n);var e=this.tail;n.list=this,n.prev=e,e&&(e.next=n),this.tail=n,this.head||(this.head=n),this.length++}};oe.prototype.push=function(){for(var n=0,e=arguments.length;n<e;n++)Vg(this,arguments[n]);return this.length};oe.prototype.unshift=function(){for(var n=0,e=arguments.length;n<e;n++)Xg(this,arguments[n]);return this.length};oe.prototype.pop=function(){if(!!this.tail){var n=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,n}};oe.prototype.shift=function(){if(!!this.head){var n=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,n}};oe.prototype.forEach=function(n,e){e=e||this;for(var t=this.head,r=0;t!==null;r++)n.call(e,t.value,r,this),t=t.next};oe.prototype.forEachReverse=function(n,e){e=e||this;for(var t=this.tail,r=this.length-1;t!==null;r--)n.call(e,t.value,r,this),t=t.prev};oe.prototype.get=function(n){for(var e=0,t=this.head;t!==null&&e<n;e++)t=t.next;if(e===n&&t!==null)return t.value};oe.prototype.getReverse=function(n){for(var e=0,t=this.tail;t!==null&&e<n;e++)t=t.prev;if(e===n&&t!==null)return t.value};oe.prototype.map=function(n,e){e=e||this;for(var t=new oe,r=this.head;r!==null;)t.push(n.call(e,r.value,this)),r=r.next;return t};oe.prototype.mapReverse=function(n,e){e=e||this;for(var t=new oe,r=this.tail;r!==null;)t.push(n.call(e,r.value,this)),r=r.prev;return t};oe.prototype.reduce=function(n,e){var t,r=this.head;if(arguments.length>1)t=e;else if(this.head)r=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)t=n(t,r.value,i),r=r.next;return t};oe.prototype.reduceReverse=function(n,e){var t,r=this.tail;if(arguments.length>1)t=e;else if(this.tail)r=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)t=n(t,r.value,i),r=r.prev;return t};oe.prototype.toArray=function(){for(var n=new Array(this.length),e=0,t=this.head;t!==null;e++)n[e]=t.value,t=t.next;return n};oe.prototype.toArrayReverse=function(){for(var n=new Array(this.length),e=0,t=this.tail;t!==null;e++)n[e]=t.value,t=t.prev;return n};oe.prototype.slice=function(n,e){e=e||this.length,e<0&&(e+=this.length),n=n||0,n<0&&(n+=this.length);var t=new oe;if(e<n||e<0)return t;n<0&&(n=0),e>this.length&&(e=this.length);for(var r=0,i=this.head;i!==null&&r<n;r++)i=i.next;for(;i!==null&&r<e;r++,i=i.next)t.push(i.value);return t};oe.prototype.sliceReverse=function(n,e){e=e||this.length,e<0&&(e+=this.length),n=n||0,n<0&&(n+=this.length);var t=new oe;if(e<n||e<0)return t;n<0&&(n=0),e>this.length&&(e=this.length);for(var r=this.length,i=this.tail;i!==null&&r>e;r--)i=i.prev;for(;i!==null&&r>n;r--,i=i.prev)t.push(i.value);return t};oe.prototype.splice=function(n,e,...t){n>this.length&&(n=this.length-1),n<0&&(n=this.length+n);for(var r=0,i=this.head;i!==null&&r<n;r++)i=i.next;for(var s=[],r=0;i&&r<e;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<t.length;r++)i=Gg(this,i,t[r]);return s};oe.prototype.reverse=function(){for(var n=this.head,e=this.tail,t=n;t!==null;t=t.prev){var r=t.prev;t.prev=t.next,t.next=r}return this.head=e,this.tail=n,this};function Gg(n,e,t){var r=e===n.head?new qn(t,null,e,n):new qn(t,e,e.next,n);return r.next===null&&(n.tail=r),r.prev===null&&(n.head=r),n.length++,r}function Vg(n,e){n.tail=new qn(e,n.tail,null,n),n.head||(n.head=n.tail),n.length++}function Xg(n,e){n.head=new qn(e,null,n.head,n),n.tail||(n.tail=n.head),n.length++}function qn(n,e,t,r){if(!(this instanceof qn))return new qn(n,e,t,r);this.list=r,this.value=n,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{Ja()(oe)}catch{}});var sc=D((sw,ic)=>{"use strict";var Jg=Ya(),kn=Symbol("max"),Vt=Symbol("length"),Gn=Symbol("lengthCalculator"),Sr=Symbol("allowStale"),On=Symbol("maxAge"),Xt=Symbol("dispose"),Za=Symbol("noDisposeOnSet"),Me=Symbol("lruList"),Pt=Symbol("cache"),ec=Symbol("updateAgeOnGet"),hs=()=>1,tc=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[kn]=e.max||1/0,r=e.length||hs;if(this[Gn]=typeof r!="function"?hs:r,this[Sr]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[On]=e.maxAge||0,this[Xt]=e.dispose,this[Za]=e.noDisposeOnSet||!1,this[ec]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[kn]=e||1/0,Tr(this)}get max(){return this[kn]}set allowStale(e){this[Sr]=!!e}get allowStale(){return this[Sr]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[On]=e,Tr(this)}get maxAge(){return this[On]}set lengthCalculator(e){typeof e!="function"&&(e=hs),e!==this[Gn]&&(this[Gn]=e,this[Vt]=0,this[Me].forEach(t=>{t.length=this[Gn](t.value,t.key),this[Vt]+=t.length})),Tr(this)}get lengthCalculator(){return this[Gn]}get length(){return this[Vt]}get itemCount(){return this[Me].length}rforEach(e,t){t=t||this;for(let r=this[Me].tail;r!==null;){let i=r.prev;rc(this,e,r,t),r=i}}forEach(e,t){t=t||this;for(let r=this[Me].head;r!==null;){let i=r.next;rc(this,e,r,t),r=i}}keys(){return this[Me].toArray().map(e=>e.key)}values(){return this[Me].toArray().map(e=>e.value)}reset(){this[Xt]&&this[Me]&&this[Me].length&&this[Me].forEach(e=>this[Xt](e.key,e.value)),this[Pt]=new Map,this[Me]=new Jg,this[Vt]=0}dump(){return this[Me].map(e=>di(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[Me]}set(e,t,r){if(r=r||this[On],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,s=this[Gn](t,e);if(this[Pt].has(e)){if(s>this[kn])return Vn(this,this[Pt].get(e)),!1;let l=this[Pt].get(e).value;return this[Xt]&&(this[Za]||this[Xt](e,l.value)),l.now=i,l.maxAge=r,l.value=t,this[Vt]+=s-l.length,l.length=s,this.get(e),Tr(this),!0}let a=new nc(e,t,s,i,r);return a.length>this[kn]?(this[Xt]&&this[Xt](e,t),!1):(this[Vt]+=a.length,this[Me].unshift(a),this[Pt].set(e,this[Me].head),Tr(this),!0)}has(e){if(!this[Pt].has(e))return!1;let t=this[Pt].get(e).value;return!di(this,t)}get(e){return ps(this,e,!0)}peek(e){return ps(this,e,!1)}pop(){let e=this[Me].tail;return e?(Vn(this,e),e.value):null}del(e){Vn(this,this[Pt].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let i=e[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let a=s-t;a>0&&this.set(i.k,i.v,a)}}}prune(){this[Pt].forEach((e,t)=>ps(this,t,!1))}},ps=(n,e,t)=>{let r=n[Pt].get(e);if(r){let i=r.value;if(di(n,i)){if(Vn(n,r),!n[Sr])return}else t&&(n[ec]&&(r.value.now=Date.now()),n[Me].unshiftNode(r));return i.value}},di=(n,e)=>{if(!e||!e.maxAge&&!n[On])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:n[On]&&t>n[On]},Tr=n=>{if(n[Vt]>n[kn])for(let e=n[Me].tail;n[Vt]>n[kn]&&e!==null;){let t=e.prev;Vn(n,e),e=t}},Vn=(n,e)=>{if(e){let t=e.value;n[Xt]&&n[Xt](t.key,t.value),n[Vt]-=t.length,n[Pt].delete(t.key),n[Me].removeNode(e)}},nc=class{constructor(e,t,r,i,s){this.key=e,this.value=t,this.length=r,this.now=i,this.maxAge=s||0}},rc=(n,e,t,r)=>{let i=t.value;di(n,i)&&(Vn(n,t),n[Sr]||(i=void 0)),i&&e.call(r,i.value,i.key,n)};ic.exports=tc});var Ct=D((ow,uc)=>{var Xn=class{constructor(e,t){if(t=Yg(t),e instanceof Xn)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Xn(e.raw,t);if(e instanceof gs)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!ac(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&rm(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=oc.get(r);if(i)return i;let s=this.options.loose,a=s?Ge[Be.HYPHENRANGELOOSE]:Ge[Be.HYPHENRANGE];e=e.replace(a,hm(this.options.includePrerelease)),De("hyphen replace",e),e=e.replace(Ge[Be.COMPARATORTRIM],em),De("comparator trim",e,Ge[Be.COMPARATORTRIM]),e=e.replace(Ge[Be.TILDETRIM],tm),e=e.replace(Ge[Be.CARETTRIM],nm),e=e.split(/\s+/).join(" ");let f=s?Ge[Be.COMPARATORLOOSE]:Ge[Be.COMPARATOR],l=e.split(" ").map(w=>im(w,this.options)).join(" ").split(/\s+/).map(w=>fm(w,this.options)).filter(this.options.loose?w=>!!w.match(f):()=>!0).map(w=>new gs(w,this.options)),y=l.length,b=new Map;for(let w of l){if(ac(w))return[w];b.set(w.value,w)}b.size>1&&b.has("")&&b.delete("");let C=[...b.values()];return oc.set(r,C),C}intersects(e,t){if(!(e instanceof Xn))throw new TypeError("a Range is required");return this.set.some(r=>cc(r,t)&&e.set.some(i=>cc(i,t)&&r.every(s=>i.every(a=>s.intersects(a,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Zg(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(pm(this.set[t],e,this.options))return!0;return!1}};uc.exports=Xn;var Qg=sc(),oc=new Qg({max:1e3}),Yg=_r(),gs=Dr(),De=br(),Zg=ze(),{re:Ge,t:Be,comparatorTrimReplace:em,tildeTrimReplace:tm,caretTrimReplace:nm}=En(),ac=n=>n.value==="<0.0.0-0",rm=n=>n.value==="",cc=(n,e)=>{let t=!0,r=n.slice(),i=r.pop();for(;t&&r.length;)t=r.every(s=>i.intersects(s,e)),i=r.pop();return t},im=(n,e)=>(De("comp",n,e),n=am(n,e),De("caret",n),n=sm(n,e),De("tildes",n),n=um(n,e),De("xrange",n),n=dm(n,e),De("stars",n),n),et=n=>!n||n.toLowerCase()==="x"||n==="*",sm=(n,e)=>n.trim().split(/\s+/).map(t=>om(t,e)).join(" "),om=(n,e)=>{let t=e.loose?Ge[Be.TILDELOOSE]:Ge[Be.TILDE];return n.replace(t,(r,i,s,a,f)=>{De("tilde",n,r,i,s,a,f);let l;return et(i)?l="":et(s)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:et(a)?l=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:f?(De("replaceTilde pr",f),l=`>=${i}.${s}.${a}-${f} <${i}.${+s+1}.0-0`):l=`>=${i}.${s}.${a} <${i}.${+s+1}.0-0`,De("tilde return",l),l})},am=(n,e)=>n.trim().split(/\s+/).map(t=>cm(t,e)).join(" "),cm=(n,e)=>{De("caret",n,e);let t=e.loose?Ge[Be.CARETLOOSE]:Ge[Be.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,(i,s,a,f,l)=>{De("caret",n,i,s,a,f,l);let y;return et(s)?y="":et(a)?y=`>=${s}.0.0${r} <${+s+1}.0.0-0`:et(f)?s==="0"?y=`>=${s}.${a}.0${r} <${s}.${+a+1}.0-0`:y=`>=${s}.${a}.0${r} <${+s+1}.0.0-0`:l?(De("replaceCaret pr",l),s==="0"?a==="0"?y=`>=${s}.${a}.${f}-${l} <${s}.${a}.${+f+1}-0`:y=`>=${s}.${a}.${f}-${l} <${s}.${+a+1}.0-0`:y=`>=${s}.${a}.${f}-${l} <${+s+1}.0.0-0`):(De("no pr"),s==="0"?a==="0"?y=`>=${s}.${a}.${f}${r} <${s}.${a}.${+f+1}-0`:y=`>=${s}.${a}.${f}${r} <${s}.${+a+1}.0-0`:y=`>=${s}.${a}.${f} <${+s+1}.0.0-0`),De("caret return",y),y})},um=(n,e)=>(De("replaceXRanges",n,e),n.split(/\s+/).map(t=>lm(t,e)).join(" ")),lm=(n,e)=>{n=n.trim();let t=e.loose?Ge[Be.XRANGELOOSE]:Ge[Be.XRANGE];return n.replace(t,(r,i,s,a,f,l)=>{De("xRange",n,r,i,s,a,f,l);let y=et(s),b=y||et(a),C=b||et(f),w=C;return i==="="&&w&&(i=""),l=e.includePrerelease?"-0":"",y?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&w?(b&&(a=0),f=0,i===">"?(i=">=",b?(s=+s+1,a=0,f=0):(a=+a+1,f=0)):i==="<="&&(i="<",b?s=+s+1:a=+a+1),i==="<"&&(l="-0"),r=`${i+s}.${a}.${f}${l}`):b?r=`>=${s}.0.0${l} <${+s+1}.0.0-0`:C&&(r=`>=${s}.${a}.0${l} <${s}.${+a+1}.0-0`),De("xRange return",r),r})},dm=(n,e)=>(De("replaceStars",n,e),n.trim().replace(Ge[Be.STAR],"")),fm=(n,e)=>(De("replaceGTE0",n,e),n.trim().replace(Ge[e.includePrerelease?Be.GTE0PRE:Be.GTE0],"")),hm=n=>(e,t,r,i,s,a,f,l,y,b,C,w,T)=>(et(r)?t="":et(i)?t=`>=${r}.0.0${n?"-0":""}`:et(s)?t=`>=${r}.${i}.0${n?"-0":""}`:a?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,et(y)?l="":et(b)?l=`<${+y+1}.0.0-0`:et(C)?l=`<${y}.${+b+1}.0-0`:w?l=`<=${y}.${b}.${C}-${w}`:n?l=`<${y}.${b}.${+C+1}-0`:l=`<=${l}`,`${t} ${l}`.trim()),pm=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(De(n[r].semver),n[r].semver!==gs.ANY&&n[r].semver.prerelease.length>0){let i=n[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Dr=D((aw,pc)=>{var Er=Symbol("SemVer ANY"),Pr=class{static get ANY(){return Er}constructor(e,t){if(t=gm(t),e instanceof Pr){if(e.loose===!!t.loose)return e;e=e.value}vs("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Er?this.value="":this.value=this.operator+this.semver.version,vs("comp",this)}parse(e){let t=this.options.loose?lc[dc.COMPARATORLOOSE]:lc[dc.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new fc(r[2],this.options.loose):this.semver=Er}toString(){return this.value}test(e){if(vs("Comparator.test",e,this.options.loose),this.semver===Er||e===Er)return!0;if(typeof e=="string")try{e=new fc(e,this.options)}catch{return!1}return ms(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Pr))throw new TypeError("a Comparator is required");if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new hc(e.value,t).test(this.value);if(e.operator==="")return e.value===""?!0:new hc(this.value,t).test(e.semver);let r=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,a=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),f=ms(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),l=ms(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||i||s&&a||f||l}};pc.exports=Pr;var gm=_r(),{re:lc,t:dc}=En(),ms=fs(),vs=br(),fc=ze(),hc=Ct()});var qr=D((cw,gc)=>{var mm=Ct(),vm=(n,e,t)=>{try{e=new mm(e,t)}catch{return!1}return e.test(n)};gc.exports=vm});var vc=D((uw,mc)=>{var ym=Ct(),Rm=(n,e)=>new ym(n,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));mc.exports=Rm});var Rc=D((lw,yc)=>{var bm=ze(),_m=Ct(),Cm=(n,e,t)=>{let r=null,i=null,s=null;try{s=new _m(e,t)}catch{return null}return n.forEach(a=>{s.test(a)&&(!r||i.compare(a)===-1)&&(r=a,i=new bm(r,t))}),r};yc.exports=Cm});var _c=D((dw,bc)=>{var wm=ze(),Sm=Ct(),Tm=(n,e,t)=>{let r=null,i=null,s=null;try{s=new Sm(e,t)}catch{return null}return n.forEach(a=>{s.test(a)&&(!r||i.compare(a)===1)&&(r=a,i=new wm(r,t))}),r};bc.exports=Tm});var Sc=D((fw,wc)=>{var ys=ze(),Dm=Ct(),Cc=wr(),Em=(n,e)=>{n=new Dm(n,e);let t=new ys("0.0.0");if(n.test(t)||(t=new ys("0.0.0-0"),n.test(t)))return t;t=null;for(let r=0;r<n.set.length;++r){let i=n.set[r],s=null;i.forEach(a=>{let f=new ys(a.semver.version);switch(a.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!s||Cc(f,s))&&(s=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!t||Cc(t,s))&&(t=s)}return t&&n.test(t)?t:null};wc.exports=Em});var Dc=D((hw,Tc)=>{var Pm=Ct(),qm=(n,e)=>{try{return new Pm(n,e).range||"*"}catch{return null}};Tc.exports=qm});var fi=D((pw,kc)=>{var km=ze(),Ec=Dr(),{ANY:Om}=Ec,xm=Ct(),Im=qr(),Pc=wr(),qc=oi(),Fm=ci(),Lm=ai(),Nm=(n,e,t,r)=>{n=new km(n,r),e=new xm(e,r);let i,s,a,f,l;switch(t){case">":i=Pc,s=Fm,a=qc,f=">",l=">=";break;case"<":i=qc,s=Lm,a=Pc,f="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Im(n,e,r))return!1;for(let y=0;y<e.set.length;++y){let b=e.set[y],C=null,w=null;if(b.forEach(T=>{T.semver===Om&&(T=new Ec(">=0.0.0")),C=C||T,w=w||T,i(T.semver,C.semver,r)?C=T:a(T.semver,w.semver,r)&&(w=T)}),C.operator===f||C.operator===l||(!w.operator||w.operator===f)&&s(n,w.semver))return!1;if(w.operator===l&&a(n,w.semver))return!1}return!0};kc.exports=Nm});var xc=D((gw,Oc)=>{var Am=fi(),Mm=(n,e,t)=>Am(n,e,">",t);Oc.exports=Mm});var Fc=D((mw,Ic)=>{var jm=fi(),$m=(n,e,t)=>jm(n,e,"<",t);Ic.exports=$m});var Ac=D((vw,Nc)=>{var Lc=Ct(),Hm=(n,e,t)=>(n=new Lc(n,t),e=new Lc(e,t),n.intersects(e));Nc.exports=Hm});var jc=D((yw,Mc)=>{var Wm=qr(),Bm=_t();Mc.exports=(n,e,t)=>{let r=[],i=null,s=null,a=n.sort((b,C)=>Bm(b,C,t));for(let b of a)Wm(b,e,t)?(s=b,i||(i=b)):(s&&r.push([i,s]),s=null,i=null);i&&r.push([i,null]);let f=[];for(let[b,C]of r)b===C?f.push(b):!C&&b===a[0]?f.push("*"):C?b===a[0]?f.push(`<=${C}`):f.push(`${b} - ${C}`):f.push(`>=${b}`);let l=f.join(" || "),y=typeof e.raw=="string"?e.raw:String(e);return l.length<y.length?l:e}});var Kc=D((Rw,Bc)=>{var $c=Ct(),hi=Dr(),{ANY:Rs}=hi,kr=qr(),bs=_t(),Km=(n,e,t={})=>{if(n===e)return!0;n=new $c(n,t),e=new $c(e,t);let r=!1;e:for(let i of n.set){for(let s of e.set){let a=Um(i,s,t);if(r=r||a!==null,a)continue e}if(r)return!1}return!0},Um=(n,e,t)=>{if(n===e)return!0;if(n.length===1&&n[0].semver===Rs){if(e.length===1&&e[0].semver===Rs)return!0;t.includePrerelease?n=[new hi(">=0.0.0-0")]:n=[new hi(">=0.0.0")]}if(e.length===1&&e[0].semver===Rs){if(t.includePrerelease)return!0;e=[new hi(">=0.0.0")]}let r=new Set,i,s;for(let T of n)T.operator===">"||T.operator===">="?i=Hc(i,T,t):T.operator==="<"||T.operator==="<="?s=Wc(s,T,t):r.add(T.semver);if(r.size>1)return null;let a;if(i&&s){if(a=bs(i.semver,s.semver,t),a>0)return null;if(a===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let T of r){if(i&&!kr(T,String(i),t)||s&&!kr(T,String(s),t))return null;for(let I of e)if(!kr(T,String(I),t))return!1;return!0}let f,l,y,b,C=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,w=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;C&&C.prerelease.length===1&&s.operator==="<"&&C.prerelease[0]===0&&(C=!1);for(let T of e){if(b=b||T.operator===">"||T.operator===">=",y=y||T.operator==="<"||T.operator==="<=",i){if(w&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===w.major&&T.semver.minor===w.minor&&T.semver.patch===w.patch&&(w=!1),T.operator===">"||T.operator===">="){if(f=Hc(i,T,t),f===T&&f!==i)return!1}else if(i.operator===">="&&!kr(i.semver,String(T),t))return!1}if(s){if(C&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===C.major&&T.semver.minor===C.minor&&T.semver.patch===C.patch&&(C=!1),T.operator==="<"||T.operator==="<="){if(l=Wc(s,T,t),l===T&&l!==s)return!1}else if(s.operator==="<="&&!kr(s.semver,String(T),t))return!1}if(!T.operator&&(s||i)&&a!==0)return!1}return!(i&&y&&!s&&a!==0||s&&b&&!i&&a!==0||w||C)},Hc=(n,e,t)=>{if(!n)return e;let r=bs(n.semver,e.semver,t);return r>0?n:r<0||e.operator===">"&&n.operator===">="?e:n},Wc=(n,e,t)=>{if(!n)return e;let r=bs(n.semver,e.semver,t);return r<0?n:r>0||e.operator==="<"&&n.operator==="<="?e:n};Bc.exports=Km});var zc=D((bw,Uc)=>{var _s=En();Uc.exports={re:_s.re,src:_s.src,tokens:_s.t,SEMVER_SPEC_VERSION:Rr().SEMVER_SPEC_VERSION,SemVer:ze(),compareIdentifiers:ti().compareIdentifiers,rcompareIdentifiers:ti().rcompareIdentifiers,parse:Pn(),valid:fa(),clean:pa(),inc:ma(),diff:Ca(),major:Sa(),minor:Da(),patch:Pa(),prerelease:ka(),compare:_t(),rcompare:xa(),compareLoose:Fa(),compareBuild:si(),sort:Ma(),rsort:$a(),gt:wr(),lt:oi(),eq:ii(),neq:ds(),gte:ai(),lte:ci(),cmp:fs(),coerce:Va(),Comparator:Dr(),Range:Ct(),satisfies:qr(),toComparators:vc(),maxSatisfying:Rc(),minSatisfying:_c(),minVersion:Sc(),validRange:Dc(),outside:fi(),gtr:xc(),ltr:Fc(),intersects:Ac(),simplifyRange:jc(),subset:Kc()}});var hn=D(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.asPromise=Ce.thenable=Ce.typedArray=Ce.stringArray=Ce.array=Ce.func=Ce.error=Ce.number=Ce.string=Ce.boolean=void 0;function zm(n){return n===!0||n===!1}Ce.boolean=zm;function Gc(n){return typeof n=="string"||n instanceof String}Ce.string=Gc;function Gm(n){return typeof n=="number"||n instanceof Number}Ce.number=Gm;function Vm(n){return n instanceof Error}Ce.error=Vm;function Vc(n){return typeof n=="function"}Ce.func=Vc;function Xc(n){return Array.isArray(n)}Ce.array=Xc;function Xm(n){return Xc(n)&&n.every(e=>Gc(e))}Ce.stringArray=Xm;function Jm(n,e){return Array.isArray(n)&&n.every(e)}Ce.typedArray=Jm;function Jc(n){return n&&Vc(n.then)}Ce.thenable=Jc;function Qm(n){return n instanceof Promise?n:Jc(n)?new Promise((e,t)=>{n.then(r=>e(r),r=>t(r))}):Promise.resolve(n)}Ce.asPromise=Qm});var Jt=D(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});var Cs;function ws(){if(Cs===void 0)throw new Error("No runtime abstraction layer installed");return Cs}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");Cs=t}n.install=e})(ws||(ws={}));Ss.default=ws});var Ts=D(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.Disposable=void 0;var Ym;(function(n){function e(t){return{dispose:t}}n.create=e})(Ym=Or.Disposable||(Or.Disposable={}))});var Yc=D(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.AbstractMessageBuffer=void 0;var Zm=13,ev=10,tv=`\r
`,Qc=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,t=0,r=0,i=0;e:for(;t<this._chunks.length;){let l=this._chunks[t];r=0;t:for(;r<l.length;){switch(l[r]){case Zm:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case ev:switch(e){case 1:e=2;break;case 3:e=4,r++;break e;default:e=0}break;default:e=0}r++}i+=l.byteLength,t++}if(e!==4)return;let s=this._read(i+r),a=new Map,f=this.toString(s,"ascii").split(tv);if(f.length<2)return a;for(let l=0;l<f.length-2;l++){let y=f[l],b=y.indexOf(":");if(b===-1)throw new Error("Message header must separate key and value using :");let C=y.substr(0,b),w=y.substr(b+1).trim();a.set(C,w)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],a=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,a}let t=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let a=s.slice(0,e);t.set(a,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else t.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return t}};pi.AbstractMessageBuffer=Qc});var ru=D(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});var nv=Jt(),Zc=require("util"),xn=Ts(),rv=Yc(),xr=class extends rv.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return xr.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new Zc.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};xr.emptyBuffer=Buffer.allocUnsafe(0);var eu=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),xn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),xn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),xn.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),xn.Disposable.create(()=>this.stream.off("data",e))}},tu=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),xn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),xn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),xn.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((r,i)=>{let s=a=>{a==null?r():i(a)};typeof e=="string"?this.stream.write(e,t,s):this.stream.write(e,s)})}end(){this.stream.end()}},nu=Object.freeze({messageBuffer:Object.freeze({create:n=>new xr(n)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(n,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(n,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(n,e)=>{try{return n instanceof Buffer?Promise.resolve(JSON.parse(n.toString(e.charset))):Promise.resolve(JSON.parse(new Zc.TextDecoder(e.charset).decode(n)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:n=>new eu(n),asWritableStream:n=>new tu(n)}),console,timer:Object.freeze({setTimeout(n,e,...t){return setTimeout(n,e,...t)},clearTimeout(n){clearTimeout(n)},setImmediate(n,...e){return setImmediate(n,...e)},clearImmediate(n){clearImmediate(n)}})});function Ds(){return nu}(function(n){function e(){nv.default.install(nu)}n.install=e})(Ds||(Ds={}));Es.default=Ds});var Jn=D(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.stringArray=Ve.array=Ve.func=Ve.error=Ve.number=Ve.string=Ve.boolean=void 0;function iv(n){return n===!0||n===!1}Ve.boolean=iv;function iu(n){return typeof n=="string"||n instanceof String}Ve.string=iu;function sv(n){return typeof n=="number"||n instanceof Number}Ve.number=sv;function ov(n){return n instanceof Error}Ve.error=ov;function av(n){return typeof n=="function"}Ve.func=av;function su(n){return Array.isArray(n)}Ve.array=su;function cv(n){return su(n)&&n.every(e=>iu(e))}Ve.stringArray=cv});var Ps=D($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.isResponseMessage=$.isNotificationMessage=$.isRequestMessage=$.NotificationType9=$.NotificationType8=$.NotificationType7=$.NotificationType6=$.NotificationType5=$.NotificationType4=$.NotificationType3=$.NotificationType2=$.NotificationType1=$.NotificationType0=$.NotificationType=$.RequestType9=$.RequestType8=$.RequestType7=$.RequestType6=$.RequestType5=$.RequestType4=$.RequestType3=$.RequestType2=$.RequestType1=$.RequestType=$.RequestType0=$.AbstractMessageSignature=$.ParameterStructures=$.ResponseError=$.ErrorCodes=void 0;var In=Jn(),ou;(function(n){n.ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.jsonrpcReservedErrorRangeStart=-32099,n.serverErrorStart=n.jsonrpcReservedErrorRangeStart,n.MessageWriteError=-32099,n.MessageReadError=-32098,n.ServerNotInitialized=-32002,n.UnknownErrorCode=-32001,n.jsonrpcReservedErrorRangeEnd=-32e3,n.serverErrorEnd=n.jsonrpcReservedErrorRangeEnd})(ou=$.ErrorCodes||($.ErrorCodes={}));var gi=class extends Error{constructor(e,t,r){super(t);this.code=In.number(e)?e:ou.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,gi.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};$.ResponseError=gi;var Ke=class{constructor(e){this.kind=e}static is(e){return e===Ke.auto||e===Ke.byName||e===Ke.byPosition}toString(){return this.kind}};$.ParameterStructures=Ke;Ke.auto=new Ke("auto");Ke.byPosition=new Ke("byPosition");Ke.byName=new Ke("byName");var ve=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return Ke.auto}};$.AbstractMessageSignature=ve;var au=class extends ve{constructor(e){super(e,0)}};$.RequestType0=au;var cu=class extends ve{constructor(e,t=Ke.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};$.RequestType=cu;var uu=class extends ve{constructor(e,t=Ke.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};$.RequestType1=uu;var lu=class extends ve{constructor(e){super(e,2)}};$.RequestType2=lu;var du=class extends ve{constructor(e){super(e,3)}};$.RequestType3=du;var fu=class extends ve{constructor(e){super(e,4)}};$.RequestType4=fu;var hu=class extends ve{constructor(e){super(e,5)}};$.RequestType5=hu;var pu=class extends ve{constructor(e){super(e,6)}};$.RequestType6=pu;var gu=class extends ve{constructor(e){super(e,7)}};$.RequestType7=gu;var mu=class extends ve{constructor(e){super(e,8)}};$.RequestType8=mu;var vu=class extends ve{constructor(e){super(e,9)}};$.RequestType9=vu;var yu=class extends ve{constructor(e,t=Ke.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};$.NotificationType=yu;var Ru=class extends ve{constructor(e){super(e,0)}};$.NotificationType0=Ru;var bu=class extends ve{constructor(e,t=Ke.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};$.NotificationType1=bu;var _u=class extends ve{constructor(e){super(e,2)}};$.NotificationType2=_u;var Cu=class extends ve{constructor(e){super(e,3)}};$.NotificationType3=Cu;var wu=class extends ve{constructor(e){super(e,4)}};$.NotificationType4=wu;var Su=class extends ve{constructor(e){super(e,5)}};$.NotificationType5=Su;var Tu=class extends ve{constructor(e){super(e,6)}};$.NotificationType6=Tu;var Du=class extends ve{constructor(e){super(e,7)}};$.NotificationType7=Du;var Eu=class extends ve{constructor(e){super(e,8)}};$.NotificationType8=Eu;var Pu=class extends ve{constructor(e){super(e,9)}};$.NotificationType9=Pu;function uv(n){let e=n;return e&&In.string(e.method)&&(In.string(e.id)||In.number(e.id))}$.isRequestMessage=uv;function lv(n){let e=n;return e&&In.string(e.method)&&n.id===void 0}$.isNotificationMessage=lv;function dv(n){let e=n;return e&&(e.result!==void 0||!!e.error)&&(In.string(e.id)||In.number(e.id)||e.id===null)}$.isResponseMessage=dv});var Qn=D(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.Emitter=Fn.Event=void 0;var fv=Jt(),hv;(function(n){let e={dispose(){}};n.None=function(){return e}})(hv=Fn.Event||(Fn.Event={}));var qu=class{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,a=r.length;s<a;s++)try{t.push(r[s].apply(i[s],e))}catch(f){fv.default().console.error(f)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Ir=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new qu),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,t),i.dispose=Ir._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Fn.Emitter=Ir;Ir._noop=function(){}});var xs=D(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.CancellationTokenSource=Ln.CancellationToken=void 0;var ku=Jt(),pv=Jn(),qs=Qn(),ks;(function(n){n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:qs.Event.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:qs.Event.None});function e(t){let r=t;return r&&(r===n.None||r===n.Cancelled||pv.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}n.is=e})(ks=Ln.CancellationToken||(Ln.CancellationToken={}));var gv=Object.freeze(function(n,e){let t=ku.default().timer.setTimeout(n.bind(e),0);return{dispose(){ku.default().timer.clearTimeout(t)}}}),Os=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?gv:(this._emitter||(this._emitter=new qs.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Ou=class{get token(){return this._token||(this._token=new Os),this._token}cancel(){this._token?this._token.cancel():this._token=ks.Cancelled}dispose(){this._token?this._token instanceof Os&&this._token.dispose():this._token=ks.None}};Ln.CancellationTokenSource=Ou});var Iu=D(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.ReadableStreamMessageReader=Qt.AbstractMessageReader=Qt.MessageReader=void 0;var mi=Jt(),Yn=Jn(),Is=Qn(),mv;(function(n){function e(t){let r=t;return r&&Yn.func(r.listen)&&Yn.func(r.dispose)&&Yn.func(r.onError)&&Yn.func(r.onClose)&&Yn.func(r.onPartialMessage)}n.is=e})(mv=Qt.MessageReader||(Qt.MessageReader={}));var Fs=class{constructor(){this.errorEmitter=new Is.Emitter,this.closeEmitter=new Is.Emitter,this.partialMessageEmitter=new Is.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Yn.string(e.message)?e.message:"unknown"}`)}};Qt.AbstractMessageReader=Fs;var Ls;(function(n){function e(t){var r;let i,s,a,f=new Map,l,y=new Map;if(t===void 0||typeof t=="string")i=t??"utf-8";else{if(i=(r=t.charset)!==null&&r!==void 0?r:"utf-8",t.contentDecoder!==void 0&&(a=t.contentDecoder,f.set(a.name,a)),t.contentDecoders!==void 0)for(let b of t.contentDecoders)f.set(b.name,b);if(t.contentTypeDecoder!==void 0&&(l=t.contentTypeDecoder,y.set(l.name,l)),t.contentTypeDecoders!==void 0)for(let b of t.contentTypeDecoders)y.set(b.name,b)}return l===void 0&&(l=mi.default().applicationJson.decoder,y.set(l.name,l)),{charset:i,contentDecoder:a,contentDecoders:f,contentTypeDecoder:l,contentTypeDecoders:y}}n.fromOptions=e})(Ls||(Ls={}));var xu=class extends Fs{constructor(e,t){super();this.readable=e,this.options=Ls.fromOptions(t),this.buffer=mi.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),t}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let a=parseInt(s);if(isNaN(a))throw new Error("Content-Length value must be a number.");this.nextMessageLength=a}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let r;this.options.contentDecoder!==void 0?r=this.options.contentDecoder.decode(t):r=Promise.resolve(t),r.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(mi.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=mi.default().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Qt.ReadableStreamMessageReader=xu});var Lu=D(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.Semaphore=void 0;var vv=Jt(),Fu=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||vv.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};vi.Semaphore=Fu});var $u=D(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.WriteableStreamMessageWriter=Yt.AbstractMessageWriter=Yt.MessageWriter=void 0;var Nu=Jt(),Fr=Jn(),yv=Lu(),Au=Qn(),Rv="Content-Length: ",Mu=`\r
`,bv;(function(n){function e(t){let r=t;return r&&Fr.func(r.dispose)&&Fr.func(r.onClose)&&Fr.func(r.onError)&&Fr.func(r.write)}n.is=e})(bv=Yt.MessageWriter||(Yt.MessageWriter={}));var Ns=class{constructor(){this.errorEmitter=new Au.Emitter,this.closeEmitter=new Au.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Fr.string(e.message)?e.message:"unknown"}`)}};Yt.AbstractMessageWriter=Ns;var As;(function(n){function e(t){var r,i;return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:Nu.default().applicationJson.encoder}:{charset:(r=t.charset)!==null&&r!==void 0?r:"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:(i=t.contentTypeEncoder)!==null&&i!==void 0?i:Nu.default().applicationJson.encoder}}n.fromOptions=e})(As||(As={}));var ju=class extends Ns{constructor(e,t){super();this.writable=e,this.options=As.fromOptions(t),this.errorCount=0,this.writeSemaphore=new yv.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Rv,r.byteLength.toString(),Mu),i.push(Mu),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};Yt.WriteableStreamMessageWriter=ju});var Wu=D(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.LRUCache=Zt.LinkedMap=Zt.Touch=void 0;var tt;(function(n){n.None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last})(tt=Zt.Touch||(Zt.Touch={}));var Ms=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=tt.None){let r=this._map.get(e);if(!!r)return t!==tt.None&&this.touch(r,t),r.value}set(e,t,r=tt.None){let i=this._map.get(e);if(i)i.value=t,r!==tt.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case tt.None:this.addItemLast(i);break;case tt.First:this.addItemFirst(i);break;case tt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(!!t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,t=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:r.key,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}values(){let e=this,t=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:r.value,done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}entries(){let e=this,t=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){let s={value:[r.key,r.value],done:!1};return r=r.next,s}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==tt.First&&t!==tt.Last)){if(t===tt.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===tt.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(let[t,r]of e)this.set(t,r)}};Zt.LinkedMap=Ms;var Hu=class extends Ms{constructor(e,t=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=tt.AsNew){return super.get(e,t)}peek(e){return super.get(e,tt.None)}set(e,t){return super.set(e,t,tt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Zt.LRUCache=Hu});var Vu=D(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.createMessageConnection=J.ConnectionOptions=J.CancellationStrategy=J.CancellationSenderStrategy=J.CancellationReceiverStrategy=J.ConnectionStrategy=J.ConnectionError=J.ConnectionErrors=J.LogTraceNotification=J.SetTraceNotification=J.TraceFormat=J.Trace=J.NullLogger=J.ProgressType=void 0;var Bu=Jt(),je=Jn(),X=Ps(),Ku=Wu(),Lr=Qn(),js=xs(),Nr;(function(n){n.type=new X.NotificationType("$/cancelRequest")})(Nr||(Nr={}));var yi;(function(n){n.type=new X.NotificationType("$/progress")})(yi||(yi={}));var Uu=class{constructor(){}};J.ProgressType=Uu;var $s;(function(n){function e(t){return je.func(t)}n.is=e})($s||($s={}));J.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var qe;(function(n){n[n.Off=0]="Off",n[n.Messages=1]="Messages",n[n.Verbose=2]="Verbose"})(qe=J.Trace||(J.Trace={}));(function(n){function e(r){if(!je.string(r))return n.Off;switch(r=r.toLowerCase(),r){case"off":return n.Off;case"messages":return n.Messages;case"verbose":return n.Verbose;default:return n.Off}}n.fromString=e;function t(r){switch(r){case n.Off:return"off";case n.Messages:return"messages";case n.Verbose:return"verbose";default:return"off"}}n.toString=t})(qe=J.Trace||(J.Trace={}));var qt;(function(n){n.Text="text",n.JSON="json"})(qt=J.TraceFormat||(J.TraceFormat={}));(function(n){function e(t){return t=t.toLowerCase(),t==="json"?n.JSON:n.Text}n.fromString=e})(qt=J.TraceFormat||(J.TraceFormat={}));var zu;(function(n){n.type=new X.NotificationType("$/setTrace")})(zu=J.SetTraceNotification||(J.SetTraceNotification={}));var Hs;(function(n){n.type=new X.NotificationType("$/logTrace")})(Hs=J.LogTraceNotification||(J.LogTraceNotification={}));var Ri;(function(n){n[n.Closed=1]="Closed",n[n.Disposed=2]="Disposed",n[n.AlreadyListening=3]="AlreadyListening"})(Ri=J.ConnectionErrors||(J.ConnectionErrors={}));var Nn=class extends Error{constructor(e,t){super(t);this.code=e,Object.setPrototypeOf(this,Nn.prototype)}};J.ConnectionError=Nn;var Gu;(function(n){function e(t){let r=t;return r&&je.func(r.cancelUndispatched)}n.is=e})(Gu=J.ConnectionStrategy||(J.ConnectionStrategy={}));var Ws;(function(n){n.Message=Object.freeze({createCancellationTokenSource(t){return new js.CancellationTokenSource}});function e(t){let r=t;return r&&je.func(r.createCancellationTokenSource)}n.is=e})(Ws=J.CancellationReceiverStrategy||(J.CancellationReceiverStrategy={}));var Bs;(function(n){n.Message=Object.freeze({sendCancellation(t,r){t.sendNotification(Nr.type,{id:r})},cleanup(t){}});function e(t){let r=t;return r&&je.func(r.sendCancellation)&&je.func(r.cleanup)}n.is=e})(Bs=J.CancellationSenderStrategy||(J.CancellationSenderStrategy={}));var Ks;(function(n){n.Message=Object.freeze({receiver:Ws.Message,sender:Bs.Message});function e(t){let r=t;return r&&Ws.is(r.receiver)&&Bs.is(r.sender)}n.is=e})(Ks=J.CancellationStrategy||(J.CancellationStrategy={}));var _v;(function(n){function e(t){let r=t;return r&&(Ks.is(r.cancellationStrategy)||Gu.is(r.connectionStrategy))}n.is=e})(_v=J.ConnectionOptions||(J.ConnectionOptions={}));var kt;(function(n){n[n.New=1]="New",n[n.Listening=2]="Listening",n[n.Closed=3]="Closed",n[n.Disposed=4]="Disposed"})(kt||(kt={}));function Cv(n,e,t,r){let i=t!==void 0?t:J.NullLogger,s=0,a=0,f=0,l="2.0",y,b=Object.create(null),C,w=Object.create(null),T=new Map,I,L=new Ku.LinkedMap,z=Object.create(null),F=Object.create(null),k=qe.Off,x=qt.Text,q,V=kt.New,Pe=new Lr.Emitter,Ie=new Lr.Emitter,Fe=new Lr.Emitter,_e=new Lr.Emitter,Ne=new Lr.Emitter,Ae=r&&r.cancellationStrategy?r.cancellationStrategy:Ks.Message;function it(R){if(R===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+R.toString()}function Qe(R){return R===null?"res-unknown-"+(++f).toString():"res-"+R.toString()}function st(){return"not-"+(++a).toString()}function Ye(R,p){X.isRequestMessage(p)?R.set(it(p.id),p):X.isResponseMessage(p)?R.set(Qe(p.id),p):R.set(st(),p)}function ht(R){}function pe(){return V===kt.Listening}function Dt(){return V===kt.Closed}function Le(){return V===kt.Disposed}function ut(){(V===kt.New||V===kt.Listening)&&(V=kt.Closed,Ie.fire(void 0))}function pt(R){Pe.fire([R,void 0,void 0])}function Et(R){Pe.fire(R)}n.onClose(ut),n.onError(pt),e.onClose(ut),e.onError(Et);function sn(){I||L.size===0||(I=Bu.default().timer.setImmediate(()=>{I=void 0,on()}))}function on(){if(L.size===0)return;let R=L.shift();try{X.isRequestMessage(R)?Bt(R):X.isNotificationMessage(R)?Nt(R):X.isResponseMessage(R)?Lt(R):Kt(R)}finally{sn()}}let Wt=R=>{try{if(X.isNotificationMessage(R)&&R.method===Nr.type.method){let p=it(R.params.id),d=L.get(p);if(X.isRequestMessage(d)){let g=r==null?void 0:r.connectionStrategy,_=g&&g.cancelUndispatched?g.cancelUndispatched(d,ht):ht(d);if(_&&(_.error!==void 0||_.result!==void 0)){L.delete(p),_.id=d.id,gt(_,R.method,Date.now()),e.write(_);return}}}Ye(L,R)}finally{sn()}};function Bt(R){if(Le())return;function p(S,O,W){let Q={jsonrpc:l,id:R.id};S instanceof X.ResponseError?Q.error=S.toJson():Q.result=S===void 0?null:S,gt(Q,O,W),e.write(Q)}function d(S,O,W){let Q={jsonrpc:l,id:R.id,error:S.toJson()};gt(Q,O,W),e.write(Q)}function g(S,O,W){S===void 0&&(S=null);let Q={jsonrpc:l,id:R.id,result:S};gt(Q,O,W),e.write(Q)}cn(R);let _=b[R.method],o,c;_&&(o=_.type,c=_.handler);let v=Date.now();if(c||y){let S=String(R.id),O=Ae.receiver.createCancellationTokenSource(S);F[S]=O;try{let W;if(c)if(R.params===void 0){if(o!==void 0&&o.numberOfParams!==0){d(new X.ResponseError(X.ErrorCodes.InvalidParams,`Request ${R.method} defines ${o.numberOfParams} params but recevied none.`),R.method,v);return}W=c(O.token)}else if(Array.isArray(R.params)){if(o!==void 0&&o.parameterStructures===X.ParameterStructures.byName){d(new X.ResponseError(X.ErrorCodes.InvalidParams,`Request ${R.method} defines parameters by name but received parameters by position`),R.method,v);return}W=c(...R.params,O.token)}else{if(o!==void 0&&o.parameterStructures===X.ParameterStructures.byPosition){d(new X.ResponseError(X.ErrorCodes.InvalidParams,`Request ${R.method} defines parameters by position but received parameters by name`),R.method,v);return}W=c(R.params,O.token)}else y&&(W=y(R.method,R.params,O.token));let Q=W;W?Q.then?Q.then(ue=>{delete F[S],p(ue,R.method,v)},ue=>{delete F[S],ue instanceof X.ResponseError?d(ue,R.method,v):ue&&je.string(ue.message)?d(new X.ResponseError(X.ErrorCodes.InternalError,`Request ${R.method} failed with message: ${ue.message}`),R.method,v):d(new X.ResponseError(X.ErrorCodes.InternalError,`Request ${R.method} failed unexpectedly without providing any details.`),R.method,v)}):(delete F[S],p(W,R.method,v)):(delete F[S],g(W,R.method,v))}catch(W){delete F[S],W instanceof X.ResponseError?p(W,R.method,v):W&&je.string(W.message)?d(new X.ResponseError(X.ErrorCodes.InternalError,`Request ${R.method} failed with message: ${W.message}`),R.method,v):d(new X.ResponseError(X.ErrorCodes.InternalError,`Request ${R.method} failed unexpectedly without providing any details.`),R.method,v)}}else d(new X.ResponseError(X.ErrorCodes.MethodNotFound,`Unhandled method ${R.method}`),R.method,v)}function Lt(R){if(!Le())if(R.id===null)R.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(R.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let p=String(R.id),d=z[p];if(wn(R,d),d){delete z[p];try{if(R.error){let g=R.error;d.reject(new X.ResponseError(g.code,g.message,g.data))}else if(R.result!==void 0)d.resolve(R.result);else throw new Error("Should never happen.")}catch(g){g.message?i.error(`Response handler '${d.method}' failed with message: ${g.message}`):i.error(`Response handler '${d.method}' failed unexpectedly.`)}}}}function Nt(R){if(Le())return;let p,d;if(R.method===Nr.type.method)d=g=>{let _=g.id,o=F[String(_)];o&&o.cancel()};else{let g=w[R.method];g&&(d=g.handler,p=g.type)}if(d||C)try{mt(R),d?R.params===void 0?(p!==void 0&&p.numberOfParams!==0&&p.parameterStructures!==X.ParameterStructures.byName&&i.error(`Notification ${R.method} defines ${p.numberOfParams} params but recevied none.`),d()):Array.isArray(R.params)?(p!==void 0&&(p.parameterStructures===X.ParameterStructures.byName&&i.error(`Notification ${R.method} defines parameters by name but received parameters by position`),p.numberOfParams!==R.params.length&&i.error(`Notification ${R.method} defines ${p.numberOfParams} params but received ${R.params.length} argumennts`)),d(...R.params)):(p!==void 0&&p.parameterStructures===X.ParameterStructures.byPosition&&i.error(`Notification ${R.method} defines parameters by position but received parameters by name`),d(R.params)):C&&C(R.method,R.params)}catch(g){g.message?i.error(`Notification handler '${R.method}' failed with message: ${g.message}`):i.error(`Notification handler '${R.method}' failed unexpectedly.`)}else Fe.fire(R)}function Kt(R){if(!R){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(R,null,4)}`);let p=R;if(je.string(p.id)||je.number(p.id)){let d=String(p.id),g=z[d];g&&g.reject(new Error("The received response has neither a result nor an error property."))}}function an(R){if(!(k===qe.Off||!q))if(x===qt.Text){let p;k===qe.Verbose&&R.params&&(p=`Params: ${JSON.stringify(R.params,null,4)}

`),q.log(`Sending request '${R.method} - (${R.id})'.`,p)}else we("send-request",R)}function Cn(R){if(!(k===qe.Off||!q))if(x===qt.Text){let p;k===qe.Verbose&&(R.params?p=`Params: ${JSON.stringify(R.params,null,4)}

`:p=`No parameters provided.

`),q.log(`Sending notification '${R.method}'.`,p)}else we("send-notification",R)}function gt(R,p,d){if(!(k===qe.Off||!q))if(x===qt.Text){let g;k===qe.Verbose&&(R.error&&R.error.data?g=`Error data: ${JSON.stringify(R.error.data,null,4)}

`:R.result?g=`Result: ${JSON.stringify(R.result,null,4)}

`:R.error===void 0&&(g=`No result returned.

`)),q.log(`Sending response '${p} - (${R.id})'. Processing request took ${Date.now()-d}ms`,g)}else we("send-response",R)}function cn(R){if(!(k===qe.Off||!q))if(x===qt.Text){let p;k===qe.Verbose&&R.params&&(p=`Params: ${JSON.stringify(R.params,null,4)}

`),q.log(`Received request '${R.method} - (${R.id})'.`,p)}else we("receive-request",R)}function mt(R){if(!(k===qe.Off||!q||R.method===Hs.type.method))if(x===qt.Text){let p;k===qe.Verbose&&(R.params?p=`Params: ${JSON.stringify(R.params,null,4)}

`:p=`No parameters provided.

`),q.log(`Received notification '${R.method}'.`,p)}else we("receive-notification",R)}function wn(R,p){if(!(k===qe.Off||!q))if(x===qt.Text){let d;if(k===qe.Verbose&&(R.error&&R.error.data?d=`Error data: ${JSON.stringify(R.error.data,null,4)}

`:R.result?d=`Result: ${JSON.stringify(R.result,null,4)}

`:R.error===void 0&&(d=`No result returned.

`)),p){let g=R.error?` Request failed: ${R.error.message} (${R.error.code}).`:"";q.log(`Received response '${p.method} - (${R.id})' in ${Date.now()-p.timerStart}ms.${g}`,d)}else q.log(`Received response ${R.id} without active response promise.`,d)}else we("receive-response",R)}function we(R,p){if(!q||k===qe.Off)return;let d={isLSPMessage:!0,type:R,message:p,timestamp:Date.now()};q.log(d)}function ot(){if(Dt())throw new Nn(Ri.Closed,"Connection is closed.");if(Le())throw new Nn(Ri.Disposed,"Connection is disposed.")}function un(){if(pe())throw new Nn(Ri.AlreadyListening,"Connection is already listening")}function Sn(){if(!pe())throw new Error("Call listen() first.")}function vt(R){return R===void 0?null:R}function ln(R){if(R!==null)return R}function Ut(R){return R!=null&&!Array.isArray(R)&&typeof R=="object"}function yt(R,p){switch(R){case X.ParameterStructures.auto:return Ut(p)?ln(p):[vt(p)];case X.ParameterStructures.byName:if(!Ut(p))throw new Error("Recevied parameters by name but param is not an object literal.");return ln(p);case X.ParameterStructures.byPosition:return[vt(p)];default:throw new Error(`Unknown parameter structure ${R.toString()}`)}}function zt(R,p){let d,g=R.numberOfParams;switch(g){case 0:d=void 0;break;case 1:d=yt(R.parameterStructures,p[0]);break;default:d=[];for(let _=0;_<p.length&&_<g;_++)d.push(vt(p[_]));if(p.length<g)for(let _=p.length;_<g;_++)d.push(null);break}return d}let Rt={sendNotification:(R,...p)=>{ot();let d,g;if(je.string(R)){d=R;let o=p[0],c=0,v=X.ParameterStructures.auto;X.ParameterStructures.is(o)&&(c=1,v=o);let S=p.length,O=S-c;switch(O){case 0:g=void 0;break;case 1:g=yt(v,p[c]);break;default:if(v===X.ParameterStructures.byName)throw new Error(`Recevied ${O} parameters for 'by Name' notification parameter structure.`);g=p.slice(c,S).map(W=>vt(W));break}}else{let o=p;d=R.method,g=zt(R,o)}let _={jsonrpc:l,method:d,params:g};Cn(_),e.write(_)},onNotification:(R,p)=>{ot();let d;return je.func(R)?C=R:p&&(je.string(R)?(d=R,w[R]={type:void 0,handler:p}):(d=R.method,w[R.method]={type:R,handler:p})),{dispose:()=>{d!==void 0?delete w[d]:C=void 0}}},onProgress:(R,p,d)=>{if(T.has(p))throw new Error(`Progress handler for token ${p} already registered`);return T.set(p,d),{dispose:()=>{T.delete(p)}}},sendProgress:(R,p,d)=>{Rt.sendNotification(yi.type,{token:p,value:d})},onUnhandledProgress:_e.event,sendRequest:(R,...p)=>{ot(),Sn();let d,g,_;if(je.string(R)){d=R;let S=p[0],O=p[p.length-1],W=0,Q=X.ParameterStructures.auto;X.ParameterStructures.is(S)&&(W=1,Q=S);let ue=p.length;js.CancellationToken.is(O)&&(ue=ue-1,_=O);let Se=ue-W;switch(Se){case 0:g=void 0;break;case 1:g=yt(Q,p[W]);break;default:if(Q===X.ParameterStructures.byName)throw new Error(`Recevied ${Se} parameters for 'by Name' request parameter structure.`);g=p.slice(W,ue).map(Te=>vt(Te));break}}else{let S=p;d=R.method,g=zt(R,S);let O=R.numberOfParams;_=js.CancellationToken.is(S[O])?S[O]:void 0}let o=s++,c;return _&&(c=_.onCancellationRequested(()=>{Ae.sender.sendCancellation(Rt,o)})),new Promise((S,O)=>{let W={jsonrpc:l,id:o,method:d,params:g},Q=Te=>{S(Te),Ae.sender.cleanup(o),c==null||c.dispose()},ue=Te=>{O(Te),Ae.sender.cleanup(o),c==null||c.dispose()},Se={method:d,timerStart:Date.now(),resolve:Q,reject:ue};an(W);try{e.write(W)}catch(Te){Se.reject(new X.ResponseError(X.ErrorCodes.MessageWriteError,Te.message?Te.message:"Unknown reason")),Se=null}Se&&(z[String(o)]=Se)})},onRequest:(R,p)=>{ot();let d=null;return $s.is(R)?(d=void 0,y=R):je.string(R)?(d=null,p!==void 0&&(d=R,b[R]={handler:p,type:void 0})):p!==void 0&&(d=R.method,b[R.method]={type:R,handler:p}),{dispose:()=>{d!==null&&(d!==void 0?delete b[d]:y=void 0)}}},trace:(R,p,d)=>{let g=!1,_=qt.Text;d!==void 0&&(je.boolean(d)?g=d:(g=d.sendNotification||!1,_=d.traceFormat||qt.Text)),k=R,x=_,k===qe.Off?q=void 0:q=p,g&&!Dt()&&!Le()&&Rt.sendNotification(zu.type,{value:qe.toString(R)})},onError:Pe.event,onClose:Ie.event,onUnhandledNotification:Fe.event,onDispose:Ne.event,end:()=>{e.end()},dispose:()=>{if(Le())return;V=kt.Disposed,Ne.fire(void 0);let R=new Error("Connection got disposed.");Object.keys(z).forEach(p=>{z[p].reject(R)}),z=Object.create(null),F=Object.create(null),L=new Ku.LinkedMap,je.func(e.dispose)&&e.dispose(),je.func(n.dispose)&&n.dispose()},listen:()=>{ot(),un(),V=kt.Listening,n.listen(Wt)},inspect:()=>{Bu.default().console.log("inspect")}};return Rt.onNotification(Hs.type,R=>{k===qe.Off||!q||q.log(R.message,k===qe.Verbose?R.verbose:void 0)}),Rt.onNotification(yi.type,R=>{let p=T.get(R.token);p?p(R.value):_e.fire(R)}),Rt}J.createMessageConnection=Cv});var Gs=D(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.CancellationSenderStrategy=P.CancellationReceiverStrategy=P.ConnectionError=P.ConnectionErrors=P.LogTraceNotification=P.SetTraceNotification=P.TraceFormat=P.Trace=P.ProgressType=P.createMessageConnection=P.NullLogger=P.ConnectionOptions=P.ConnectionStrategy=P.WriteableStreamMessageWriter=P.AbstractMessageWriter=P.MessageWriter=P.ReadableStreamMessageReader=P.AbstractMessageReader=P.MessageReader=P.CancellationToken=P.CancellationTokenSource=P.Emitter=P.Event=P.Disposable=P.ParameterStructures=P.NotificationType9=P.NotificationType8=P.NotificationType7=P.NotificationType6=P.NotificationType5=P.NotificationType4=P.NotificationType3=P.NotificationType2=P.NotificationType1=P.NotificationType0=P.NotificationType=P.ErrorCodes=P.ResponseError=P.RequestType9=P.RequestType8=P.RequestType7=P.RequestType6=P.RequestType5=P.RequestType4=P.RequestType3=P.RequestType2=P.RequestType1=P.RequestType0=P.RequestType=P.RAL=void 0;P.CancellationStrategy=void 0;var ge=Ps();Object.defineProperty(P,"RequestType",{enumerable:!0,get:function(){return ge.RequestType}});Object.defineProperty(P,"RequestType0",{enumerable:!0,get:function(){return ge.RequestType0}});Object.defineProperty(P,"RequestType1",{enumerable:!0,get:function(){return ge.RequestType1}});Object.defineProperty(P,"RequestType2",{enumerable:!0,get:function(){return ge.RequestType2}});Object.defineProperty(P,"RequestType3",{enumerable:!0,get:function(){return ge.RequestType3}});Object.defineProperty(P,"RequestType4",{enumerable:!0,get:function(){return ge.RequestType4}});Object.defineProperty(P,"RequestType5",{enumerable:!0,get:function(){return ge.RequestType5}});Object.defineProperty(P,"RequestType6",{enumerable:!0,get:function(){return ge.RequestType6}});Object.defineProperty(P,"RequestType7",{enumerable:!0,get:function(){return ge.RequestType7}});Object.defineProperty(P,"RequestType8",{enumerable:!0,get:function(){return ge.RequestType8}});Object.defineProperty(P,"RequestType9",{enumerable:!0,get:function(){return ge.RequestType9}});Object.defineProperty(P,"ResponseError",{enumerable:!0,get:function(){return ge.ResponseError}});Object.defineProperty(P,"ErrorCodes",{enumerable:!0,get:function(){return ge.ErrorCodes}});Object.defineProperty(P,"NotificationType",{enumerable:!0,get:function(){return ge.NotificationType}});Object.defineProperty(P,"NotificationType0",{enumerable:!0,get:function(){return ge.NotificationType0}});Object.defineProperty(P,"NotificationType1",{enumerable:!0,get:function(){return ge.NotificationType1}});Object.defineProperty(P,"NotificationType2",{enumerable:!0,get:function(){return ge.NotificationType2}});Object.defineProperty(P,"NotificationType3",{enumerable:!0,get:function(){return ge.NotificationType3}});Object.defineProperty(P,"NotificationType4",{enumerable:!0,get:function(){return ge.NotificationType4}});Object.defineProperty(P,"NotificationType5",{enumerable:!0,get:function(){return ge.NotificationType5}});Object.defineProperty(P,"NotificationType6",{enumerable:!0,get:function(){return ge.NotificationType6}});Object.defineProperty(P,"NotificationType7",{enumerable:!0,get:function(){return ge.NotificationType7}});Object.defineProperty(P,"NotificationType8",{enumerable:!0,get:function(){return ge.NotificationType8}});Object.defineProperty(P,"NotificationType9",{enumerable:!0,get:function(){return ge.NotificationType9}});Object.defineProperty(P,"ParameterStructures",{enumerable:!0,get:function(){return ge.ParameterStructures}});var wv=Ts();Object.defineProperty(P,"Disposable",{enumerable:!0,get:function(){return wv.Disposable}});var Xu=Qn();Object.defineProperty(P,"Event",{enumerable:!0,get:function(){return Xu.Event}});Object.defineProperty(P,"Emitter",{enumerable:!0,get:function(){return Xu.Emitter}});var Ju=xs();Object.defineProperty(P,"CancellationTokenSource",{enumerable:!0,get:function(){return Ju.CancellationTokenSource}});Object.defineProperty(P,"CancellationToken",{enumerable:!0,get:function(){return Ju.CancellationToken}});var Us=Iu();Object.defineProperty(P,"MessageReader",{enumerable:!0,get:function(){return Us.MessageReader}});Object.defineProperty(P,"AbstractMessageReader",{enumerable:!0,get:function(){return Us.AbstractMessageReader}});Object.defineProperty(P,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Us.ReadableStreamMessageReader}});var zs=$u();Object.defineProperty(P,"MessageWriter",{enumerable:!0,get:function(){return zs.MessageWriter}});Object.defineProperty(P,"AbstractMessageWriter",{enumerable:!0,get:function(){return zs.AbstractMessageWriter}});Object.defineProperty(P,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return zs.WriteableStreamMessageWriter}});var at=Vu();Object.defineProperty(P,"ConnectionStrategy",{enumerable:!0,get:function(){return at.ConnectionStrategy}});Object.defineProperty(P,"ConnectionOptions",{enumerable:!0,get:function(){return at.ConnectionOptions}});Object.defineProperty(P,"NullLogger",{enumerable:!0,get:function(){return at.NullLogger}});Object.defineProperty(P,"createMessageConnection",{enumerable:!0,get:function(){return at.createMessageConnection}});Object.defineProperty(P,"ProgressType",{enumerable:!0,get:function(){return at.ProgressType}});Object.defineProperty(P,"Trace",{enumerable:!0,get:function(){return at.Trace}});Object.defineProperty(P,"TraceFormat",{enumerable:!0,get:function(){return at.TraceFormat}});Object.defineProperty(P,"SetTraceNotification",{enumerable:!0,get:function(){return at.SetTraceNotification}});Object.defineProperty(P,"LogTraceNotification",{enumerable:!0,get:function(){return at.LogTraceNotification}});Object.defineProperty(P,"ConnectionErrors",{enumerable:!0,get:function(){return at.ConnectionErrors}});Object.defineProperty(P,"ConnectionError",{enumerable:!0,get:function(){return at.ConnectionError}});Object.defineProperty(P,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return at.CancellationReceiverStrategy}});Object.defineProperty(P,"CancellationSenderStrategy",{enumerable:!0,get:function(){return at.CancellationSenderStrategy}});Object.defineProperty(P,"CancellationStrategy",{enumerable:!0,get:function(){return at.CancellationStrategy}});var Sv=Jt();P.RAL=Sv.default});var nr=D(ae=>{"use strict";var Tv=ae&&ae.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Dv=ae&&ae.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Tv(e,n,t)};Object.defineProperty(ae,"__esModule",{value:!0});ae.createMessageConnection=ae.createServerSocketTransport=ae.createClientSocketTransport=ae.createServerPipeTransport=ae.createClientPipeTransport=ae.generateRandomPipeName=ae.StreamMessageWriter=ae.StreamMessageReader=ae.SocketMessageWriter=ae.SocketMessageReader=ae.IPCMessageWriter=ae.IPCMessageReader=void 0;var Zn=ru();Zn.default.install();var At=Gs(),Qu=require("path"),Ev=require("os"),Pv=require("crypto"),bi=require("net");Dv(Gs(),ae);var Yu=class extends At.AbstractMessageReader{constructor(e){super();this.process=e;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),At.Disposable.create(()=>this.process.off("message",e))}};ae.IPCMessageReader=Yu;var Zu=class extends At.AbstractMessageWriter{constructor(e){super();this.process=e,this.errorCount=0;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};ae.IPCMessageWriter=Zu;var er=class extends At.ReadableStreamMessageReader{constructor(e,t="utf-8"){super(Zn.default().stream.asReadableStream(e),t)}};ae.SocketMessageReader=er;var tr=class extends At.WriteableStreamMessageWriter{constructor(e,t){super(Zn.default().stream.asWritableStream(e),t);this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};ae.SocketMessageWriter=tr;var Vs=class extends At.ReadableStreamMessageReader{constructor(e,t){super(Zn.default().stream.asReadableStream(e),t)}};ae.StreamMessageReader=Vs;var Xs=class extends At.WriteableStreamMessageWriter{constructor(e,t){super(Zn.default().stream.asWritableStream(e),t)}};ae.StreamMessageWriter=Xs;var el=process.env.XDG_RUNTIME_DIR,qv=new Map([["linux",107],["darwin",103]]);function kv(){let n=Pv.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${n}-sock`;let e;el?e=Qu.join(el,`vscode-ipc-${n}.sock`):e=Qu.join(Ev.tmpdir(),`vscode-${n}.sock`);let t=qv.get(process.platform);return t!==void 0&&e.length>=t&&Zn.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}ae.generateRandomPipeName=kv;function Ov(n,e="utf-8"){let t,r=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let a=bi.createServer(f=>{a.close(),t([new er(f,e),new tr(f,e)])});a.on("error",s),a.listen(n,()=>{a.removeListener("error",s),i({onConnected:()=>r})})})}ae.createClientPipeTransport=Ov;function xv(n,e="utf-8"){let t=bi.createConnection(n);return[new er(t,e),new tr(t,e)]}ae.createServerPipeTransport=xv;function Iv(n,e="utf-8"){let t,r=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let a=bi.createServer(f=>{a.close(),t([new er(f,e),new tr(f,e)])});a.on("error",s),a.listen(n,"127.0.0.1",()=>{a.removeListener("error",s),i({onConnected:()=>r})})})}ae.createClientSocketTransport=Iv;function Fv(n,e="utf-8"){let t=bi.createConnection(n,"127.0.0.1");return[new er(t,e),new tr(t,e)]}ae.createServerSocketTransport=Fv;function Lv(n){let e=n;return e.read!==void 0&&e.addListener!==void 0}function Nv(n){let e=n;return e.write!==void 0&&e.addListener!==void 0}function Av(n,e,t,r){t||(t=At.NullLogger);let i=Lv(n)?new Vs(n):n,s=Nv(e)?new Xs(e):e;return At.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),At.createMessageConnection(i,s,t,r)}ae.createMessageConnection=Av});var Js=D((Aw,tl)=>{"use strict";tl.exports=nr()});var rl=D((nl,_i)=>{(function(n){if(typeof _i=="object"&&typeof _i.exports=="object"){var e=n(require,nl);e!==void 0&&(_i.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],n)})(function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionKind=e.DocumentSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=void 0;var t;(function(d){d.MIN_VALUE=-2147483648,d.MAX_VALUE=2147483647})(t=e.integer||(e.integer={}));var r;(function(d){d.MIN_VALUE=0,d.MAX_VALUE=2147483647})(r=e.uinteger||(e.uinteger={}));var i;(function(d){function g(o,c){return o===Number.MAX_VALUE&&(o=r.MAX_VALUE),c===Number.MAX_VALUE&&(c=r.MAX_VALUE),{line:o,character:c}}d.create=g;function _(o){var c=o;return p.objectLiteral(c)&&p.uinteger(c.line)&&p.uinteger(c.character)}d.is=_})(i=e.Position||(e.Position={}));var s;(function(d){function g(o,c,v,S){if(p.uinteger(o)&&p.uinteger(c)&&p.uinteger(v)&&p.uinteger(S))return{start:i.create(o,c),end:i.create(v,S)};if(i.is(o)&&i.is(c))return{start:o,end:c};throw new Error("Range#create called with invalid arguments["+o+", "+c+", "+v+", "+S+"]")}d.create=g;function _(o){var c=o;return p.objectLiteral(c)&&i.is(c.start)&&i.is(c.end)}d.is=_})(s=e.Range||(e.Range={}));var a;(function(d){function g(o,c){return{uri:o,range:c}}d.create=g;function _(o){var c=o;return p.defined(c)&&s.is(c.range)&&(p.string(c.uri)||p.undefined(c.uri))}d.is=_})(a=e.Location||(e.Location={}));var f;(function(d){function g(o,c,v,S){return{targetUri:o,targetRange:c,targetSelectionRange:v,originSelectionRange:S}}d.create=g;function _(o){var c=o;return p.defined(c)&&s.is(c.targetRange)&&p.string(c.targetUri)&&(s.is(c.targetSelectionRange)||p.undefined(c.targetSelectionRange))&&(s.is(c.originSelectionRange)||p.undefined(c.originSelectionRange))}d.is=_})(f=e.LocationLink||(e.LocationLink={}));var l;(function(d){function g(o,c,v,S){return{red:o,green:c,blue:v,alpha:S}}d.create=g;function _(o){var c=o;return p.numberRange(c.red,0,1)&&p.numberRange(c.green,0,1)&&p.numberRange(c.blue,0,1)&&p.numberRange(c.alpha,0,1)}d.is=_})(l=e.Color||(e.Color={}));var y;(function(d){function g(o,c){return{range:o,color:c}}d.create=g;function _(o){var c=o;return s.is(c.range)&&l.is(c.color)}d.is=_})(y=e.ColorInformation||(e.ColorInformation={}));var b;(function(d){function g(o,c,v){return{label:o,textEdit:c,additionalTextEdits:v}}d.create=g;function _(o){var c=o;return p.string(c.label)&&(p.undefined(c.textEdit)||x.is(c))&&(p.undefined(c.additionalTextEdits)||p.typedArray(c.additionalTextEdits,x.is))}d.is=_})(b=e.ColorPresentation||(e.ColorPresentation={}));var C;(function(d){d.Comment="comment",d.Imports="imports",d.Region="region"})(C=e.FoldingRangeKind||(e.FoldingRangeKind={}));var w;(function(d){function g(o,c,v,S,O){var W={startLine:o,endLine:c};return p.defined(v)&&(W.startCharacter=v),p.defined(S)&&(W.endCharacter=S),p.defined(O)&&(W.kind=O),W}d.create=g;function _(o){var c=o;return p.uinteger(c.startLine)&&p.uinteger(c.startLine)&&(p.undefined(c.startCharacter)||p.uinteger(c.startCharacter))&&(p.undefined(c.endCharacter)||p.uinteger(c.endCharacter))&&(p.undefined(c.kind)||p.string(c.kind))}d.is=_})(w=e.FoldingRange||(e.FoldingRange={}));var T;(function(d){function g(o,c){return{location:o,message:c}}d.create=g;function _(o){var c=o;return p.defined(c)&&a.is(c.location)&&p.string(c.message)}d.is=_})(T=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var I;(function(d){d.Error=1,d.Warning=2,d.Information=3,d.Hint=4})(I=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var L;(function(d){d.Unnecessary=1,d.Deprecated=2})(L=e.DiagnosticTag||(e.DiagnosticTag={}));var z;(function(d){function g(_){var o=_;return o!=null&&p.string(o.href)}d.is=g})(z=e.CodeDescription||(e.CodeDescription={}));var F;(function(d){function g(o,c,v,S,O,W){var Q={range:o,message:c};return p.defined(v)&&(Q.severity=v),p.defined(S)&&(Q.code=S),p.defined(O)&&(Q.source=O),p.defined(W)&&(Q.relatedInformation=W),Q}d.create=g;function _(o){var c,v=o;return p.defined(v)&&s.is(v.range)&&p.string(v.message)&&(p.number(v.severity)||p.undefined(v.severity))&&(p.integer(v.code)||p.string(v.code)||p.undefined(v.code))&&(p.undefined(v.codeDescription)||p.string((c=v.codeDescription)===null||c===void 0?void 0:c.href))&&(p.string(v.source)||p.undefined(v.source))&&(p.undefined(v.relatedInformation)||p.typedArray(v.relatedInformation,T.is))}d.is=_})(F=e.Diagnostic||(e.Diagnostic={}));var k;(function(d){function g(o,c){for(var v=[],S=2;S<arguments.length;S++)v[S-2]=arguments[S];var O={title:o,command:c};return p.defined(v)&&v.length>0&&(O.arguments=v),O}d.create=g;function _(o){var c=o;return p.defined(c)&&p.string(c.title)&&p.string(c.command)}d.is=_})(k=e.Command||(e.Command={}));var x;(function(d){function g(v,S){return{range:v,newText:S}}d.replace=g;function _(v,S){return{range:{start:v,end:v},newText:S}}d.insert=_;function o(v){return{range:v,newText:""}}d.del=o;function c(v){var S=v;return p.objectLiteral(S)&&p.string(S.newText)&&s.is(S.range)}d.is=c})(x=e.TextEdit||(e.TextEdit={}));var q;(function(d){function g(o,c,v){var S={label:o};return c!==void 0&&(S.needsConfirmation=c),v!==void 0&&(S.description=v),S}d.create=g;function _(o){var c=o;return c!==void 0&&p.objectLiteral(c)&&p.string(c.label)&&(p.boolean(c.needsConfirmation)||c.needsConfirmation===void 0)&&(p.string(c.description)||c.description===void 0)}d.is=_})(q=e.ChangeAnnotation||(e.ChangeAnnotation={}));var V;(function(d){function g(_){var o=_;return typeof o=="string"}d.is=g})(V=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var Pe;(function(d){function g(v,S,O){return{range:v,newText:S,annotationId:O}}d.replace=g;function _(v,S,O){return{range:{start:v,end:v},newText:S,annotationId:O}}d.insert=_;function o(v,S){return{range:v,newText:"",annotationId:S}}d.del=o;function c(v){var S=v;return x.is(S)&&(q.is(S.annotationId)||V.is(S.annotationId))}d.is=c})(Pe=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var Ie;(function(d){function g(o,c){return{textDocument:o,edits:c}}d.create=g;function _(o){var c=o;return p.defined(c)&&pe.is(c.textDocument)&&Array.isArray(c.edits)}d.is=_})(Ie=e.TextDocumentEdit||(e.TextDocumentEdit={}));var Fe;(function(d){function g(o,c,v){var S={kind:"create",uri:o};return c!==void 0&&(c.overwrite!==void 0||c.ignoreIfExists!==void 0)&&(S.options=c),v!==void 0&&(S.annotationId=v),S}d.create=g;function _(o){var c=o;return c&&c.kind==="create"&&p.string(c.uri)&&(c.options===void 0||(c.options.overwrite===void 0||p.boolean(c.options.overwrite))&&(c.options.ignoreIfExists===void 0||p.boolean(c.options.ignoreIfExists)))&&(c.annotationId===void 0||V.is(c.annotationId))}d.is=_})(Fe=e.CreateFile||(e.CreateFile={}));var _e;(function(d){function g(o,c,v,S){var O={kind:"rename",oldUri:o,newUri:c};return v!==void 0&&(v.overwrite!==void 0||v.ignoreIfExists!==void 0)&&(O.options=v),S!==void 0&&(O.annotationId=S),O}d.create=g;function _(o){var c=o;return c&&c.kind==="rename"&&p.string(c.oldUri)&&p.string(c.newUri)&&(c.options===void 0||(c.options.overwrite===void 0||p.boolean(c.options.overwrite))&&(c.options.ignoreIfExists===void 0||p.boolean(c.options.ignoreIfExists)))&&(c.annotationId===void 0||V.is(c.annotationId))}d.is=_})(_e=e.RenameFile||(e.RenameFile={}));var Ne;(function(d){function g(o,c,v){var S={kind:"delete",uri:o};return c!==void 0&&(c.recursive!==void 0||c.ignoreIfNotExists!==void 0)&&(S.options=c),v!==void 0&&(S.annotationId=v),S}d.create=g;function _(o){var c=o;return c&&c.kind==="delete"&&p.string(c.uri)&&(c.options===void 0||(c.options.recursive===void 0||p.boolean(c.options.recursive))&&(c.options.ignoreIfNotExists===void 0||p.boolean(c.options.ignoreIfNotExists)))&&(c.annotationId===void 0||V.is(c.annotationId))}d.is=_})(Ne=e.DeleteFile||(e.DeleteFile={}));var Ae;(function(d){function g(_){var o=_;return o&&(o.changes!==void 0||o.documentChanges!==void 0)&&(o.documentChanges===void 0||o.documentChanges.every(function(c){return p.string(c.kind)?Fe.is(c)||_e.is(c)||Ne.is(c):Ie.is(c)}))}d.is=g})(Ae=e.WorkspaceEdit||(e.WorkspaceEdit={}));var it=function(){function d(g,_){this.edits=g,this.changeAnnotations=_}return d.prototype.insert=function(g,_,o){var c,v;if(o===void 0?c=x.insert(g,_):V.is(o)?(v=o,c=Pe.insert(g,_,o)):(this.assertChangeAnnotations(this.changeAnnotations),v=this.changeAnnotations.manage(o),c=Pe.insert(g,_,v)),this.edits.push(c),v!==void 0)return v},d.prototype.replace=function(g,_,o){var c,v;if(o===void 0?c=x.replace(g,_):V.is(o)?(v=o,c=Pe.replace(g,_,o)):(this.assertChangeAnnotations(this.changeAnnotations),v=this.changeAnnotations.manage(o),c=Pe.replace(g,_,v)),this.edits.push(c),v!==void 0)return v},d.prototype.delete=function(g,_){var o,c;if(_===void 0?o=x.del(g):V.is(_)?(c=_,o=Pe.del(g,_)):(this.assertChangeAnnotations(this.changeAnnotations),c=this.changeAnnotations.manage(_),o=Pe.del(g,c)),this.edits.push(o),c!==void 0)return c},d.prototype.add=function(g){this.edits.push(g)},d.prototype.all=function(){return this.edits},d.prototype.clear=function(){this.edits.splice(0,this.edits.length)},d.prototype.assertChangeAnnotations=function(g){if(g===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},d}(),Qe=function(){function d(g){this._annotations=g===void 0?Object.create(null):g,this._counter=0,this._size=0}return d.prototype.all=function(){return this._annotations},Object.defineProperty(d.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),d.prototype.manage=function(g,_){var o;if(V.is(g)?o=g:(o=this.nextId(),_=g),this._annotations[o]!==void 0)throw new Error("Id "+o+" is already in use.");if(_===void 0)throw new Error("No annotation provided for id "+o);return this._annotations[o]=_,this._size++,o},d.prototype.nextId=function(){return this._counter++,this._counter.toString()},d}(),st=function(){function d(g){var _=this;this._textEditChanges=Object.create(null),g!==void 0?(this._workspaceEdit=g,g.documentChanges?(this._changeAnnotations=new Qe(g.changeAnnotations),g.changeAnnotations=this._changeAnnotations.all(),g.documentChanges.forEach(function(o){if(Ie.is(o)){var c=new it(o.edits,_._changeAnnotations);_._textEditChanges[o.textDocument.uri]=c}})):g.changes&&Object.keys(g.changes).forEach(function(o){var c=new it(g.changes[o]);_._textEditChanges[o]=c})):this._workspaceEdit={}}return Object.defineProperty(d.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),d.prototype.getTextEditChange=function(g){if(pe.is(g)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var _={uri:g.uri,version:g.version},o=this._textEditChanges[_.uri];if(!o){var c=[],v={textDocument:_,edits:c};this._workspaceEdit.documentChanges.push(v),o=new it(c,this._changeAnnotations),this._textEditChanges[_.uri]=o}return o}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var o=this._textEditChanges[g];if(!o){var c=[];this._workspaceEdit.changes[g]=c,o=new it(c),this._textEditChanges[g]=o}return o}},d.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Qe,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},d.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},d.prototype.createFile=function(g,_,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var c;q.is(_)||V.is(_)?c=_:o=_;var v,S;if(c===void 0?v=Fe.create(g,o):(S=V.is(c)?c:this._changeAnnotations.manage(c),v=Fe.create(g,o,S)),this._workspaceEdit.documentChanges.push(v),S!==void 0)return S},d.prototype.renameFile=function(g,_,o,c){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var v;q.is(o)||V.is(o)?v=o:c=o;var S,O;if(v===void 0?S=_e.create(g,_,c):(O=V.is(v)?v:this._changeAnnotations.manage(v),S=_e.create(g,_,c,O)),this._workspaceEdit.documentChanges.push(S),O!==void 0)return O},d.prototype.deleteFile=function(g,_,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var c;q.is(_)||V.is(_)?c=_:o=_;var v,S;if(c===void 0?v=Ne.create(g,o):(S=V.is(c)?c:this._changeAnnotations.manage(c),v=Ne.create(g,o,S)),this._workspaceEdit.documentChanges.push(v),S!==void 0)return S},d}();e.WorkspaceChange=st;var Ye;(function(d){function g(o){return{uri:o}}d.create=g;function _(o){var c=o;return p.defined(c)&&p.string(c.uri)}d.is=_})(Ye=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var ht;(function(d){function g(o,c){return{uri:o,version:c}}d.create=g;function _(o){var c=o;return p.defined(c)&&p.string(c.uri)&&p.integer(c.version)}d.is=_})(ht=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var pe;(function(d){function g(o,c){return{uri:o,version:c}}d.create=g;function _(o){var c=o;return p.defined(c)&&p.string(c.uri)&&(c.version===null||p.integer(c.version))}d.is=_})(pe=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var Dt;(function(d){function g(o,c,v,S){return{uri:o,languageId:c,version:v,text:S}}d.create=g;function _(o){var c=o;return p.defined(c)&&p.string(c.uri)&&p.string(c.languageId)&&p.integer(c.version)&&p.string(c.text)}d.is=_})(Dt=e.TextDocumentItem||(e.TextDocumentItem={}));var Le;(function(d){d.PlainText="plaintext",d.Markdown="markdown"})(Le=e.MarkupKind||(e.MarkupKind={})),function(d){function g(_){var o=_;return o===d.PlainText||o===d.Markdown}d.is=g}(Le=e.MarkupKind||(e.MarkupKind={}));var ut;(function(d){function g(_){var o=_;return p.objectLiteral(_)&&Le.is(o.kind)&&p.string(o.value)}d.is=g})(ut=e.MarkupContent||(e.MarkupContent={}));var pt;(function(d){d.Text=1,d.Method=2,d.Function=3,d.Constructor=4,d.Field=5,d.Variable=6,d.Class=7,d.Interface=8,d.Module=9,d.Property=10,d.Unit=11,d.Value=12,d.Enum=13,d.Keyword=14,d.Snippet=15,d.Color=16,d.File=17,d.Reference=18,d.Folder=19,d.EnumMember=20,d.Constant=21,d.Struct=22,d.Event=23,d.Operator=24,d.TypeParameter=25})(pt=e.CompletionItemKind||(e.CompletionItemKind={}));var Et;(function(d){d.PlainText=1,d.Snippet=2})(Et=e.InsertTextFormat||(e.InsertTextFormat={}));var sn;(function(d){d.Deprecated=1})(sn=e.CompletionItemTag||(e.CompletionItemTag={}));var on;(function(d){function g(o,c,v){return{newText:o,insert:c,replace:v}}d.create=g;function _(o){var c=o;return c&&p.string(c.newText)&&s.is(c.insert)&&s.is(c.replace)}d.is=_})(on=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var Wt;(function(d){d.asIs=1,d.adjustIndentation=2})(Wt=e.InsertTextMode||(e.InsertTextMode={}));var Bt;(function(d){function g(_){return{label:_}}d.create=g})(Bt=e.CompletionItem||(e.CompletionItem={}));var Lt;(function(d){function g(_,o){return{items:_||[],isIncomplete:!!o}}d.create=g})(Lt=e.CompletionList||(e.CompletionList={}));var Nt;(function(d){function g(o){return o.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}d.fromPlainText=g;function _(o){var c=o;return p.string(c)||p.objectLiteral(c)&&p.string(c.language)&&p.string(c.value)}d.is=_})(Nt=e.MarkedString||(e.MarkedString={}));var Kt;(function(d){function g(_){var o=_;return!!o&&p.objectLiteral(o)&&(ut.is(o.contents)||Nt.is(o.contents)||p.typedArray(o.contents,Nt.is))&&(_.range===void 0||s.is(_.range))}d.is=g})(Kt=e.Hover||(e.Hover={}));var an;(function(d){function g(_,o){return o?{label:_,documentation:o}:{label:_}}d.create=g})(an=e.ParameterInformation||(e.ParameterInformation={}));var Cn;(function(d){function g(_,o){for(var c=[],v=2;v<arguments.length;v++)c[v-2]=arguments[v];var S={label:_};return p.defined(o)&&(S.documentation=o),p.defined(c)?S.parameters=c:S.parameters=[],S}d.create=g})(Cn=e.SignatureInformation||(e.SignatureInformation={}));var gt;(function(d){d.Text=1,d.Read=2,d.Write=3})(gt=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var cn;(function(d){function g(_,o){var c={range:_};return p.number(o)&&(c.kind=o),c}d.create=g})(cn=e.DocumentHighlight||(e.DocumentHighlight={}));var mt;(function(d){d.File=1,d.Module=2,d.Namespace=3,d.Package=4,d.Class=5,d.Method=6,d.Property=7,d.Field=8,d.Constructor=9,d.Enum=10,d.Interface=11,d.Function=12,d.Variable=13,d.Constant=14,d.String=15,d.Number=16,d.Boolean=17,d.Array=18,d.Object=19,d.Key=20,d.Null=21,d.EnumMember=22,d.Struct=23,d.Event=24,d.Operator=25,d.TypeParameter=26})(mt=e.SymbolKind||(e.SymbolKind={}));var wn;(function(d){d.Deprecated=1})(wn=e.SymbolTag||(e.SymbolTag={}));var we;(function(d){function g(_,o,c,v,S){var O={name:_,kind:o,location:{uri:v,range:c}};return S&&(O.containerName=S),O}d.create=g})(we=e.SymbolInformation||(e.SymbolInformation={}));var ot;(function(d){function g(o,c,v,S,O,W){var Q={name:o,detail:c,kind:v,range:S,selectionRange:O};return W!==void 0&&(Q.children=W),Q}d.create=g;function _(o){var c=o;return c&&p.string(c.name)&&p.number(c.kind)&&s.is(c.range)&&s.is(c.selectionRange)&&(c.detail===void 0||p.string(c.detail))&&(c.deprecated===void 0||p.boolean(c.deprecated))&&(c.children===void 0||Array.isArray(c.children))&&(c.tags===void 0||Array.isArray(c.tags))}d.is=_})(ot=e.DocumentSymbol||(e.DocumentSymbol={}));var un;(function(d){d.Empty="",d.QuickFix="quickfix",d.Refactor="refactor",d.RefactorExtract="refactor.extract",d.RefactorInline="refactor.inline",d.RefactorRewrite="refactor.rewrite",d.Source="source",d.SourceOrganizeImports="source.organizeImports",d.SourceFixAll="source.fixAll"})(un=e.CodeActionKind||(e.CodeActionKind={}));var Sn;(function(d){function g(o,c){var v={diagnostics:o};return c!=null&&(v.only=c),v}d.create=g;function _(o){var c=o;return p.defined(c)&&p.typedArray(c.diagnostics,F.is)&&(c.only===void 0||p.typedArray(c.only,p.string))}d.is=_})(Sn=e.CodeActionContext||(e.CodeActionContext={}));var vt;(function(d){function g(o,c,v){var S={title:o},O=!0;return typeof c=="string"?(O=!1,S.kind=c):k.is(c)?S.command=c:S.edit=c,O&&v!==void 0&&(S.kind=v),S}d.create=g;function _(o){var c=o;return c&&p.string(c.title)&&(c.diagnostics===void 0||p.typedArray(c.diagnostics,F.is))&&(c.kind===void 0||p.string(c.kind))&&(c.edit!==void 0||c.command!==void 0)&&(c.command===void 0||k.is(c.command))&&(c.isPreferred===void 0||p.boolean(c.isPreferred))&&(c.edit===void 0||Ae.is(c.edit))}d.is=_})(vt=e.CodeAction||(e.CodeAction={}));var ln;(function(d){function g(o,c){var v={range:o};return p.defined(c)&&(v.data=c),v}d.create=g;function _(o){var c=o;return p.defined(c)&&s.is(c.range)&&(p.undefined(c.command)||k.is(c.command))}d.is=_})(ln=e.CodeLens||(e.CodeLens={}));var Ut;(function(d){function g(o,c){return{tabSize:o,insertSpaces:c}}d.create=g;function _(o){var c=o;return p.defined(c)&&p.uinteger(c.tabSize)&&p.boolean(c.insertSpaces)}d.is=_})(Ut=e.FormattingOptions||(e.FormattingOptions={}));var yt;(function(d){function g(o,c,v){return{range:o,target:c,data:v}}d.create=g;function _(o){var c=o;return p.defined(c)&&s.is(c.range)&&(p.undefined(c.target)||p.string(c.target))}d.is=_})(yt=e.DocumentLink||(e.DocumentLink={}));var zt;(function(d){function g(o,c){return{range:o,parent:c}}d.create=g;function _(o){var c=o;return c!==void 0&&s.is(c.range)&&(c.parent===void 0||d.is(c.parent))}d.is=_})(zt=e.SelectionRange||(e.SelectionRange={})),e.EOL=[`
`,`\r
`,"\r"];var Rt;(function(d){function g(v,S,O,W){return new R(v,S,O,W)}d.create=g;function _(v){var S=v;return!!(p.defined(S)&&p.string(S.uri)&&(p.undefined(S.languageId)||p.string(S.languageId))&&p.uinteger(S.lineCount)&&p.func(S.getText)&&p.func(S.positionAt)&&p.func(S.offsetAt))}d.is=_;function o(v,S){for(var O=v.getText(),W=c(S,function(dn,Tn){var Zr=dn.range.start.line-Tn.range.start.line;return Zr===0?dn.range.start.character-Tn.range.start.character:Zr}),Q=O.length,ue=W.length-1;ue>=0;ue--){var Se=W[ue],Te=v.offsetAt(Se.range.start),ie=v.offsetAt(Se.range.end);if(ie<=Q)O=O.substring(0,Te)+Se.newText+O.substring(ie,O.length);else throw new Error("Overlapping edit");Q=Te}return O}d.applyEdits=o;function c(v,S){if(v.length<=1)return v;var O=v.length/2|0,W=v.slice(0,O),Q=v.slice(O);c(W,S),c(Q,S);for(var ue=0,Se=0,Te=0;ue<W.length&&Se<Q.length;){var ie=S(W[ue],Q[Se]);ie<=0?v[Te++]=W[ue++]:v[Te++]=Q[Se++]}for(;ue<W.length;)v[Te++]=W[ue++];for(;Se<Q.length;)v[Te++]=Q[Se++];return v}})(Rt=e.TextDocument||(e.TextDocument={}));var R=function(){function d(g,_,o,c){this._uri=g,this._languageId=_,this._version=o,this._content=c,this._lineOffsets=void 0}return Object.defineProperty(d.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),d.prototype.getText=function(g){if(g){var _=this.offsetAt(g.start),o=this.offsetAt(g.end);return this._content.substring(_,o)}return this._content},d.prototype.update=function(g,_){this._content=g.text,this._version=_,this._lineOffsets=void 0},d.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var g=[],_=this._content,o=!0,c=0;c<_.length;c++){o&&(g.push(c),o=!1);var v=_.charAt(c);o=v==="\r"||v===`
`,v==="\r"&&c+1<_.length&&_.charAt(c+1)===`
`&&c++}o&&_.length>0&&g.push(_.length),this._lineOffsets=g}return this._lineOffsets},d.prototype.positionAt=function(g){g=Math.max(Math.min(g,this._content.length),0);var _=this.getLineOffsets(),o=0,c=_.length;if(c===0)return i.create(0,g);for(;o<c;){var v=Math.floor((o+c)/2);_[v]>g?c=v:o=v+1}var S=o-1;return i.create(S,g-_[S])},d.prototype.offsetAt=function(g){var _=this.getLineOffsets();if(g.line>=_.length)return this._content.length;if(g.line<0)return 0;var o=_[g.line],c=g.line+1<_.length?_[g.line+1]:this._content.length;return Math.max(Math.min(o+g.character,c),o)},Object.defineProperty(d.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),d}(),p;(function(d){var g=Object.prototype.toString;function _(ie){return typeof ie!="undefined"}d.defined=_;function o(ie){return typeof ie=="undefined"}d.undefined=o;function c(ie){return ie===!0||ie===!1}d.boolean=c;function v(ie){return g.call(ie)==="[object String]"}d.string=v;function S(ie){return g.call(ie)==="[object Number]"}d.number=S;function O(ie,dn,Tn){return g.call(ie)==="[object Number]"&&dn<=ie&&ie<=Tn}d.numberRange=O;function W(ie){return g.call(ie)==="[object Number]"&&-2147483648<=ie&&ie<=2147483647}d.integer=W;function Q(ie){return g.call(ie)==="[object Number]"&&0<=ie&&ie<=2147483647}d.uinteger=Q;function ue(ie){return g.call(ie)==="[object Function]"}d.func=ue;function Se(ie){return ie!==null&&typeof ie=="object"}d.objectLiteral=Se;function Te(ie,dn){return Array.isArray(ie)&&ie.every(dn)}d.typedArray=Te})(p||(p={}))})});var $e=D(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.ProtocolNotificationType=wt.ProtocolNotificationType0=wt.ProtocolRequestType=wt.ProtocolRequestType0=wt.RegistrationType=void 0;var rr=nr(),il=class{constructor(e){this.method=e}};wt.RegistrationType=il;var sl=class extends rr.RequestType0{constructor(e){super(e)}};wt.ProtocolRequestType0=sl;var ol=class extends rr.RequestType{constructor(e){super(e,rr.ParameterStructures.byName)}};wt.ProtocolRequestType=ol;var al=class extends rr.NotificationType0{constructor(e){super(e)}};wt.ProtocolNotificationType0=al;var cl=class extends rr.NotificationType{constructor(e){super(e,rr.ParameterStructures.byName)}};wt.ProtocolNotificationType=cl});var dl=D(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.objectLiteral=ke.typedArray=ke.stringArray=ke.array=ke.func=ke.error=ke.number=ke.string=ke.boolean=void 0;function Mv(n){return n===!0||n===!1}ke.boolean=Mv;function ul(n){return typeof n=="string"||n instanceof String}ke.string=ul;function jv(n){return typeof n=="number"||n instanceof Number}ke.number=jv;function $v(n){return n instanceof Error}ke.error=$v;function Hv(n){return typeof n=="function"}ke.func=Hv;function ll(n){return Array.isArray(n)}ke.array=ll;function Wv(n){return ll(n)&&n.every(e=>ul(e))}ke.stringArray=Wv;function Bv(n,e){return Array.isArray(n)&&n.every(e)}ke.typedArray=Bv;function Kv(n){return n!==null&&typeof n=="object"}ke.objectLiteral=Kv});var fl=D(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.ImplementationRequest=void 0;var Uv=$e(),zv;(function(n){n.method="textDocument/implementation",n.type=new Uv.ProtocolRequestType(n.method)})(zv=Ar.ImplementationRequest||(Ar.ImplementationRequest={}))});var hl=D(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.TypeDefinitionRequest=void 0;var Gv=$e(),Vv;(function(n){n.method="textDocument/typeDefinition",n.type=new Gv.ProtocolRequestType(n.method)})(Vv=Mr.TypeDefinitionRequest||(Mr.TypeDefinitionRequest={}))});var gl=D(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.DidChangeWorkspaceFoldersNotification=pn.WorkspaceFoldersRequest=void 0;var pl=$e(),Xv;(function(n){n.type=new pl.ProtocolRequestType0("workspace/workspaceFolders")})(Xv=pn.WorkspaceFoldersRequest||(pn.WorkspaceFoldersRequest={}));var Jv;(function(n){n.type=new pl.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(Jv=pn.DidChangeWorkspaceFoldersNotification||(pn.DidChangeWorkspaceFoldersNotification={}))});var ml=D(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.ConfigurationRequest=void 0;var Qv=$e(),Yv;(function(n){n.type=new Qv.ProtocolRequestType("workspace/configuration")})(Yv=jr.ConfigurationRequest||(jr.ConfigurationRequest={}))});var yl=D(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.ColorPresentationRequest=gn.DocumentColorRequest=void 0;var vl=$e(),Zv;(function(n){n.method="textDocument/documentColor",n.type=new vl.ProtocolRequestType(n.method)})(Zv=gn.DocumentColorRequest||(gn.DocumentColorRequest={}));var ey;(function(n){n.type=new vl.ProtocolRequestType("textDocument/colorPresentation")})(ey=gn.ColorPresentationRequest||(gn.ColorPresentationRequest={}))});var Rl=D(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.FoldingRangeRequest=mn.FoldingRangeKind=void 0;var ty=$e(),ny;(function(n){n.Comment="comment",n.Imports="imports",n.Region="region"})(ny=mn.FoldingRangeKind||(mn.FoldingRangeKind={}));var ry;(function(n){n.method="textDocument/foldingRange",n.type=new ty.ProtocolRequestType(n.method)})(ry=mn.FoldingRangeRequest||(mn.FoldingRangeRequest={}))});var bl=D($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.DeclarationRequest=void 0;var iy=$e(),sy;(function(n){n.method="textDocument/declaration",n.type=new iy.ProtocolRequestType(n.method)})(sy=$r.DeclarationRequest||($r.DeclarationRequest={}))});var _l=D(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.SelectionRangeRequest=void 0;var oy=$e(),ay;(function(n){n.method="textDocument/selectionRange",n.type=new oy.ProtocolRequestType(n.method)})(ay=Hr.SelectionRangeRequest||(Hr.SelectionRangeRequest={}))});var wl=D(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.WorkDoneProgressCancelNotification=Ot.WorkDoneProgressCreateRequest=Ot.WorkDoneProgress=void 0;var cy=nr(),Cl=$e(),uy;(function(n){n.type=new cy.ProgressType;function e(t){return t===n.type}n.is=e})(uy=Ot.WorkDoneProgress||(Ot.WorkDoneProgress={}));var ly;(function(n){n.type=new Cl.ProtocolRequestType("window/workDoneProgress/create")})(ly=Ot.WorkDoneProgressCreateRequest||(Ot.WorkDoneProgressCreateRequest={}));var dy;(function(n){n.type=new Cl.ProtocolNotificationType("window/workDoneProgress/cancel")})(dy=Ot.WorkDoneProgressCancelNotification||(Ot.WorkDoneProgressCancelNotification={}))});var Sl=D(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.CallHierarchyOutgoingCallsRequest=xt.CallHierarchyIncomingCallsRequest=xt.CallHierarchyPrepareRequest=void 0;var Qs=$e(),fy;(function(n){n.method="textDocument/prepareCallHierarchy",n.type=new Qs.ProtocolRequestType(n.method)})(fy=xt.CallHierarchyPrepareRequest||(xt.CallHierarchyPrepareRequest={}));var hy;(function(n){n.method="callHierarchy/incomingCalls",n.type=new Qs.ProtocolRequestType(n.method)})(hy=xt.CallHierarchyIncomingCallsRequest||(xt.CallHierarchyIncomingCallsRequest={}));var py;(function(n){n.method="callHierarchy/outgoingCalls",n.type=new Qs.ProtocolRequestType(n.method)})(py=xt.CallHierarchyOutgoingCallsRequest||(xt.CallHierarchyOutgoingCallsRequest={}))});var Tl=D(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.SemanticTokensRefreshRequest=le.SemanticTokensRangeRequest=le.SemanticTokensDeltaRequest=le.SemanticTokensRequest=le.SemanticTokensRegistrationType=le.TokenFormat=le.SemanticTokens=le.SemanticTokenModifiers=le.SemanticTokenTypes=void 0;var Wr=$e(),gy;(function(n){n.namespace="namespace",n.type="type",n.class="class",n.enum="enum",n.interface="interface",n.struct="struct",n.typeParameter="typeParameter",n.parameter="parameter",n.variable="variable",n.property="property",n.enumMember="enumMember",n.event="event",n.function="function",n.method="method",n.macro="macro",n.keyword="keyword",n.modifier="modifier",n.comment="comment",n.string="string",n.number="number",n.regexp="regexp",n.operator="operator"})(gy=le.SemanticTokenTypes||(le.SemanticTokenTypes={}));var my;(function(n){n.declaration="declaration",n.definition="definition",n.readonly="readonly",n.static="static",n.deprecated="deprecated",n.abstract="abstract",n.async="async",n.modification="modification",n.documentation="documentation",n.defaultLibrary="defaultLibrary"})(my=le.SemanticTokenModifiers||(le.SemanticTokenModifiers={}));var vy;(function(n){function e(t){let r=t;return r!==void 0&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}n.is=e})(vy=le.SemanticTokens||(le.SemanticTokens={}));var yy;(function(n){n.Relative="relative"})(yy=le.TokenFormat||(le.TokenFormat={}));var Ry;(function(n){n.method="textDocument/semanticTokens",n.type=new Wr.RegistrationType(n.method)})(Ry=le.SemanticTokensRegistrationType||(le.SemanticTokensRegistrationType={}));var by;(function(n){n.method="textDocument/semanticTokens/full",n.type=new Wr.ProtocolRequestType(n.method)})(by=le.SemanticTokensRequest||(le.SemanticTokensRequest={}));var _y;(function(n){n.method="textDocument/semanticTokens/full/delta",n.type=new Wr.ProtocolRequestType(n.method)})(_y=le.SemanticTokensDeltaRequest||(le.SemanticTokensDeltaRequest={}));var Cy;(function(n){n.method="textDocument/semanticTokens/range",n.type=new Wr.ProtocolRequestType(n.method)})(Cy=le.SemanticTokensRangeRequest||(le.SemanticTokensRangeRequest={}));var wy;(function(n){n.method="workspace/semanticTokens/refresh",n.type=new Wr.ProtocolRequestType0(n.method)})(wy=le.SemanticTokensRefreshRequest||(le.SemanticTokensRefreshRequest={}))});var Dl=D(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.ShowDocumentRequest=void 0;var Sy=$e(),Ty;(function(n){n.method="window/showDocument",n.type=new Sy.ProtocolRequestType(n.method)})(Ty=Br.ShowDocumentRequest||(Br.ShowDocumentRequest={}))});var El=D(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.LinkedEditingRangeRequest=void 0;var Dy=$e(),Ey;(function(n){n.method="textDocument/linkedEditingRange",n.type=new Dy.ProtocolRequestType(n.method)})(Ey=Kr.LinkedEditingRangeRequest||(Kr.LinkedEditingRangeRequest={}))});var Pl=D(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.WillDeleteFilesRequest=Re.DidDeleteFilesNotification=Re.DidRenameFilesNotification=Re.WillRenameFilesRequest=Re.DidCreateFilesNotification=Re.WillCreateFilesRequest=Re.FileOperationPatternKind=void 0;var ir=$e(),Py;(function(n){n.file="file",n.folder="folder"})(Py=Re.FileOperationPatternKind||(Re.FileOperationPatternKind={}));var qy;(function(n){n.method="workspace/willCreateFiles",n.type=new ir.ProtocolRequestType(n.method)})(qy=Re.WillCreateFilesRequest||(Re.WillCreateFilesRequest={}));var ky;(function(n){n.method="workspace/didCreateFiles",n.type=new ir.ProtocolNotificationType(n.method)})(ky=Re.DidCreateFilesNotification||(Re.DidCreateFilesNotification={}));var Oy;(function(n){n.method="workspace/willRenameFiles",n.type=new ir.ProtocolRequestType(n.method)})(Oy=Re.WillRenameFilesRequest||(Re.WillRenameFilesRequest={}));var xy;(function(n){n.method="workspace/didRenameFiles",n.type=new ir.ProtocolNotificationType(n.method)})(xy=Re.DidRenameFilesNotification||(Re.DidRenameFilesNotification={}));var Iy;(function(n){n.method="workspace/didDeleteFiles",n.type=new ir.ProtocolNotificationType(n.method)})(Iy=Re.DidDeleteFilesNotification||(Re.DidDeleteFilesNotification={}));var Fy;(function(n){n.method="workspace/willDeleteFiles",n.type=new ir.ProtocolRequestType(n.method)})(Fy=Re.WillDeleteFilesRequest||(Re.WillDeleteFilesRequest={}))});var ql=D(It=>{"use strict";Object.defineProperty(It,"__esModule",{value:!0});It.MonikerRequest=It.MonikerKind=It.UniquenessLevel=void 0;var Ly=$e(),Ny;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(Ny=It.UniquenessLevel||(It.UniquenessLevel={}));var Ay;(function(n){n.import="import",n.export="export",n.local="local"})(Ay=It.MonikerKind||(It.MonikerKind={}));var My;(function(n){n.method="textDocument/moniker",n.type=new Ly.ProtocolRequestType(n.method)})(My=It.MonikerRequest||(It.MonikerRequest={}))});var Fl=D(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});h.DocumentLinkRequest=h.CodeLensRefreshRequest=h.CodeLensResolveRequest=h.CodeLensRequest=h.WorkspaceSymbolRequest=h.CodeActionResolveRequest=h.CodeActionRequest=h.DocumentSymbolRequest=h.DocumentHighlightRequest=h.ReferencesRequest=h.DefinitionRequest=h.SignatureHelpRequest=h.SignatureHelpTriggerKind=h.HoverRequest=h.CompletionResolveRequest=h.CompletionRequest=h.CompletionTriggerKind=h.PublishDiagnosticsNotification=h.WatchKind=h.FileChangeType=h.DidChangeWatchedFilesNotification=h.WillSaveTextDocumentWaitUntilRequest=h.WillSaveTextDocumentNotification=h.TextDocumentSaveReason=h.DidSaveTextDocumentNotification=h.DidCloseTextDocumentNotification=h.DidChangeTextDocumentNotification=h.TextDocumentContentChangeEvent=h.DidOpenTextDocumentNotification=h.TextDocumentSyncKind=h.TelemetryEventNotification=h.LogMessageNotification=h.ShowMessageRequest=h.ShowMessageNotification=h.MessageType=h.DidChangeConfigurationNotification=h.ExitNotification=h.ShutdownRequest=h.InitializedNotification=h.InitializeError=h.InitializeRequest=h.WorkDoneProgressOptions=h.TextDocumentRegistrationOptions=h.StaticRegistrationOptions=h.FailureHandlingKind=h.ResourceOperationKind=h.UnregistrationRequest=h.RegistrationRequest=h.DocumentSelector=h.DocumentFilter=void 0;h.MonikerRequest=h.MonikerKind=h.UniquenessLevel=h.WillDeleteFilesRequest=h.DidDeleteFilesNotification=h.WillRenameFilesRequest=h.DidRenameFilesNotification=h.WillCreateFilesRequest=h.DidCreateFilesNotification=h.FileOperationPatternKind=h.LinkedEditingRangeRequest=h.ShowDocumentRequest=h.SemanticTokensRegistrationType=h.SemanticTokensRefreshRequest=h.SemanticTokensRangeRequest=h.SemanticTokensDeltaRequest=h.SemanticTokensRequest=h.TokenFormat=h.SemanticTokens=h.SemanticTokenModifiers=h.SemanticTokenTypes=h.CallHierarchyPrepareRequest=h.CallHierarchyOutgoingCallsRequest=h.CallHierarchyIncomingCallsRequest=h.WorkDoneProgressCancelNotification=h.WorkDoneProgressCreateRequest=h.WorkDoneProgress=h.SelectionRangeRequest=h.DeclarationRequest=h.FoldingRangeRequest=h.ColorPresentationRequest=h.DocumentColorRequest=h.ConfigurationRequest=h.DidChangeWorkspaceFoldersNotification=h.WorkspaceFoldersRequest=h.TypeDefinitionRequest=h.ImplementationRequest=h.ApplyWorkspaceEditRequest=h.ExecuteCommandRequest=h.PrepareRenameRequest=h.RenameRequest=h.PrepareSupportDefaultBehavior=h.DocumentOnTypeFormattingRequest=h.DocumentRangeFormattingRequest=h.DocumentFormattingRequest=h.DocumentLinkResolveRequest=void 0;var vn=dl(),Y=$e(),jy=fl();Object.defineProperty(h,"ImplementationRequest",{enumerable:!0,get:function(){return jy.ImplementationRequest}});var $y=hl();Object.defineProperty(h,"TypeDefinitionRequest",{enumerable:!0,get:function(){return $y.TypeDefinitionRequest}});var kl=gl();Object.defineProperty(h,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return kl.WorkspaceFoldersRequest}});Object.defineProperty(h,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return kl.DidChangeWorkspaceFoldersNotification}});var Hy=ml();Object.defineProperty(h,"ConfigurationRequest",{enumerable:!0,get:function(){return Hy.ConfigurationRequest}});var Ol=yl();Object.defineProperty(h,"DocumentColorRequest",{enumerable:!0,get:function(){return Ol.DocumentColorRequest}});Object.defineProperty(h,"ColorPresentationRequest",{enumerable:!0,get:function(){return Ol.ColorPresentationRequest}});var Wy=Rl();Object.defineProperty(h,"FoldingRangeRequest",{enumerable:!0,get:function(){return Wy.FoldingRangeRequest}});var By=bl();Object.defineProperty(h,"DeclarationRequest",{enumerable:!0,get:function(){return By.DeclarationRequest}});var Ky=_l();Object.defineProperty(h,"SelectionRangeRequest",{enumerable:!0,get:function(){return Ky.SelectionRangeRequest}});var Ys=wl();Object.defineProperty(h,"WorkDoneProgress",{enumerable:!0,get:function(){return Ys.WorkDoneProgress}});Object.defineProperty(h,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Ys.WorkDoneProgressCreateRequest}});Object.defineProperty(h,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Ys.WorkDoneProgressCancelNotification}});var Zs=Sl();Object.defineProperty(h,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Zs.CallHierarchyIncomingCallsRequest}});Object.defineProperty(h,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Zs.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(h,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Zs.CallHierarchyPrepareRequest}});var en=Tl();Object.defineProperty(h,"SemanticTokenTypes",{enumerable:!0,get:function(){return en.SemanticTokenTypes}});Object.defineProperty(h,"SemanticTokenModifiers",{enumerable:!0,get:function(){return en.SemanticTokenModifiers}});Object.defineProperty(h,"SemanticTokens",{enumerable:!0,get:function(){return en.SemanticTokens}});Object.defineProperty(h,"TokenFormat",{enumerable:!0,get:function(){return en.TokenFormat}});Object.defineProperty(h,"SemanticTokensRequest",{enumerable:!0,get:function(){return en.SemanticTokensRequest}});Object.defineProperty(h,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return en.SemanticTokensDeltaRequest}});Object.defineProperty(h,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return en.SemanticTokensRangeRequest}});Object.defineProperty(h,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return en.SemanticTokensRefreshRequest}});Object.defineProperty(h,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return en.SemanticTokensRegistrationType}});var Uy=Dl();Object.defineProperty(h,"ShowDocumentRequest",{enumerable:!0,get:function(){return Uy.ShowDocumentRequest}});var zy=El();Object.defineProperty(h,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return zy.LinkedEditingRangeRequest}});var An=Pl();Object.defineProperty(h,"FileOperationPatternKind",{enumerable:!0,get:function(){return An.FileOperationPatternKind}});Object.defineProperty(h,"DidCreateFilesNotification",{enumerable:!0,get:function(){return An.DidCreateFilesNotification}});Object.defineProperty(h,"WillCreateFilesRequest",{enumerable:!0,get:function(){return An.WillCreateFilesRequest}});Object.defineProperty(h,"DidRenameFilesNotification",{enumerable:!0,get:function(){return An.DidRenameFilesNotification}});Object.defineProperty(h,"WillRenameFilesRequest",{enumerable:!0,get:function(){return An.WillRenameFilesRequest}});Object.defineProperty(h,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return An.DidDeleteFilesNotification}});Object.defineProperty(h,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return An.WillDeleteFilesRequest}});var eo=ql();Object.defineProperty(h,"UniquenessLevel",{enumerable:!0,get:function(){return eo.UniquenessLevel}});Object.defineProperty(h,"MonikerKind",{enumerable:!0,get:function(){return eo.MonikerKind}});Object.defineProperty(h,"MonikerRequest",{enumerable:!0,get:function(){return eo.MonikerRequest}});var xl;(function(n){function e(t){let r=t;return vn.string(r.language)||vn.string(r.scheme)||vn.string(r.pattern)}n.is=e})(xl=h.DocumentFilter||(h.DocumentFilter={}));var Il;(function(n){function e(t){if(!Array.isArray(t))return!1;for(let r of t)if(!vn.string(r)&&!xl.is(r))return!1;return!0}n.is=e})(Il=h.DocumentSelector||(h.DocumentSelector={}));var Gy;(function(n){n.type=new Y.ProtocolRequestType("client/registerCapability")})(Gy=h.RegistrationRequest||(h.RegistrationRequest={}));var Vy;(function(n){n.type=new Y.ProtocolRequestType("client/unregisterCapability")})(Vy=h.UnregistrationRequest||(h.UnregistrationRequest={}));var Xy;(function(n){n.Create="create",n.Rename="rename",n.Delete="delete"})(Xy=h.ResourceOperationKind||(h.ResourceOperationKind={}));var Jy;(function(n){n.Abort="abort",n.Transactional="transactional",n.TextOnlyTransactional="textOnlyTransactional",n.Undo="undo"})(Jy=h.FailureHandlingKind||(h.FailureHandlingKind={}));var Qy;(function(n){function e(t){let r=t;return r&&vn.string(r.id)&&r.id.length>0}n.hasId=e})(Qy=h.StaticRegistrationOptions||(h.StaticRegistrationOptions={}));var Yy;(function(n){function e(t){let r=t;return r&&(r.documentSelector===null||Il.is(r.documentSelector))}n.is=e})(Yy=h.TextDocumentRegistrationOptions||(h.TextDocumentRegistrationOptions={}));var Zy;(function(n){function e(r){let i=r;return vn.objectLiteral(i)&&(i.workDoneProgress===void 0||vn.boolean(i.workDoneProgress))}n.is=e;function t(r){let i=r;return i&&vn.boolean(i.workDoneProgress)}n.hasWorkDoneProgress=t})(Zy=h.WorkDoneProgressOptions||(h.WorkDoneProgressOptions={}));var eR;(function(n){n.type=new Y.ProtocolRequestType("initialize")})(eR=h.InitializeRequest||(h.InitializeRequest={}));var tR;(function(n){n.unknownProtocolVersion=1})(tR=h.InitializeError||(h.InitializeError={}));var nR;(function(n){n.type=new Y.ProtocolNotificationType("initialized")})(nR=h.InitializedNotification||(h.InitializedNotification={}));var rR;(function(n){n.type=new Y.ProtocolRequestType0("shutdown")})(rR=h.ShutdownRequest||(h.ShutdownRequest={}));var iR;(function(n){n.type=new Y.ProtocolNotificationType0("exit")})(iR=h.ExitNotification||(h.ExitNotification={}));var sR;(function(n){n.type=new Y.ProtocolNotificationType("workspace/didChangeConfiguration")})(sR=h.DidChangeConfigurationNotification||(h.DidChangeConfigurationNotification={}));var oR;(function(n){n.Error=1,n.Warning=2,n.Info=3,n.Log=4})(oR=h.MessageType||(h.MessageType={}));var aR;(function(n){n.type=new Y.ProtocolNotificationType("window/showMessage")})(aR=h.ShowMessageNotification||(h.ShowMessageNotification={}));var cR;(function(n){n.type=new Y.ProtocolRequestType("window/showMessageRequest")})(cR=h.ShowMessageRequest||(h.ShowMessageRequest={}));var uR;(function(n){n.type=new Y.ProtocolNotificationType("window/logMessage")})(uR=h.LogMessageNotification||(h.LogMessageNotification={}));var lR;(function(n){n.type=new Y.ProtocolNotificationType("telemetry/event")})(lR=h.TelemetryEventNotification||(h.TelemetryEventNotification={}));var dR;(function(n){n.None=0,n.Full=1,n.Incremental=2})(dR=h.TextDocumentSyncKind||(h.TextDocumentSyncKind={}));var fR;(function(n){n.method="textDocument/didOpen",n.type=new Y.ProtocolNotificationType(n.method)})(fR=h.DidOpenTextDocumentNotification||(h.DidOpenTextDocumentNotification={}));var hR;(function(n){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}n.isIncremental=e;function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}n.isFull=t})(hR=h.TextDocumentContentChangeEvent||(h.TextDocumentContentChangeEvent={}));var pR;(function(n){n.method="textDocument/didChange",n.type=new Y.ProtocolNotificationType(n.method)})(pR=h.DidChangeTextDocumentNotification||(h.DidChangeTextDocumentNotification={}));var gR;(function(n){n.method="textDocument/didClose",n.type=new Y.ProtocolNotificationType(n.method)})(gR=h.DidCloseTextDocumentNotification||(h.DidCloseTextDocumentNotification={}));var mR;(function(n){n.method="textDocument/didSave",n.type=new Y.ProtocolNotificationType(n.method)})(mR=h.DidSaveTextDocumentNotification||(h.DidSaveTextDocumentNotification={}));var vR;(function(n){n.Manual=1,n.AfterDelay=2,n.FocusOut=3})(vR=h.TextDocumentSaveReason||(h.TextDocumentSaveReason={}));var yR;(function(n){n.method="textDocument/willSave",n.type=new Y.ProtocolNotificationType(n.method)})(yR=h.WillSaveTextDocumentNotification||(h.WillSaveTextDocumentNotification={}));var RR;(function(n){n.method="textDocument/willSaveWaitUntil",n.type=new Y.ProtocolRequestType(n.method)})(RR=h.WillSaveTextDocumentWaitUntilRequest||(h.WillSaveTextDocumentWaitUntilRequest={}));var bR;(function(n){n.type=new Y.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(bR=h.DidChangeWatchedFilesNotification||(h.DidChangeWatchedFilesNotification={}));var _R;(function(n){n.Created=1,n.Changed=2,n.Deleted=3})(_R=h.FileChangeType||(h.FileChangeType={}));var CR;(function(n){n.Create=1,n.Change=2,n.Delete=4})(CR=h.WatchKind||(h.WatchKind={}));var wR;(function(n){n.type=new Y.ProtocolNotificationType("textDocument/publishDiagnostics")})(wR=h.PublishDiagnosticsNotification||(h.PublishDiagnosticsNotification={}));var SR;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.TriggerForIncompleteCompletions=3})(SR=h.CompletionTriggerKind||(h.CompletionTriggerKind={}));var TR;(function(n){n.method="textDocument/completion",n.type=new Y.ProtocolRequestType(n.method)})(TR=h.CompletionRequest||(h.CompletionRequest={}));var DR;(function(n){n.method="completionItem/resolve",n.type=new Y.ProtocolRequestType(n.method)})(DR=h.CompletionResolveRequest||(h.CompletionResolveRequest={}));var ER;(function(n){n.method="textDocument/hover",n.type=new Y.ProtocolRequestType(n.method)})(ER=h.HoverRequest||(h.HoverRequest={}));var PR;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.ContentChange=3})(PR=h.SignatureHelpTriggerKind||(h.SignatureHelpTriggerKind={}));var qR;(function(n){n.method="textDocument/signatureHelp",n.type=new Y.ProtocolRequestType(n.method)})(qR=h.SignatureHelpRequest||(h.SignatureHelpRequest={}));var kR;(function(n){n.method="textDocument/definition",n.type=new Y.ProtocolRequestType(n.method)})(kR=h.DefinitionRequest||(h.DefinitionRequest={}));var OR;(function(n){n.method="textDocument/references",n.type=new Y.ProtocolRequestType(n.method)})(OR=h.ReferencesRequest||(h.ReferencesRequest={}));var xR;(function(n){n.method="textDocument/documentHighlight",n.type=new Y.ProtocolRequestType(n.method)})(xR=h.DocumentHighlightRequest||(h.DocumentHighlightRequest={}));var IR;(function(n){n.method="textDocument/documentSymbol",n.type=new Y.ProtocolRequestType(n.method)})(IR=h.DocumentSymbolRequest||(h.DocumentSymbolRequest={}));var FR;(function(n){n.method="textDocument/codeAction",n.type=new Y.ProtocolRequestType(n.method)})(FR=h.CodeActionRequest||(h.CodeActionRequest={}));var LR;(function(n){n.method="codeAction/resolve",n.type=new Y.ProtocolRequestType(n.method)})(LR=h.CodeActionResolveRequest||(h.CodeActionResolveRequest={}));var NR;(function(n){n.method="workspace/symbol",n.type=new Y.ProtocolRequestType(n.method)})(NR=h.WorkspaceSymbolRequest||(h.WorkspaceSymbolRequest={}));var AR;(function(n){n.method="textDocument/codeLens",n.type=new Y.ProtocolRequestType(n.method)})(AR=h.CodeLensRequest||(h.CodeLensRequest={}));var MR;(function(n){n.method="codeLens/resolve",n.type=new Y.ProtocolRequestType(n.method)})(MR=h.CodeLensResolveRequest||(h.CodeLensResolveRequest={}));var jR;(function(n){n.method="workspace/codeLens/refresh",n.type=new Y.ProtocolRequestType0(n.method)})(jR=h.CodeLensRefreshRequest||(h.CodeLensRefreshRequest={}));var $R;(function(n){n.method="textDocument/documentLink",n.type=new Y.ProtocolRequestType(n.method)})($R=h.DocumentLinkRequest||(h.DocumentLinkRequest={}));var HR;(function(n){n.method="documentLink/resolve",n.type=new Y.ProtocolRequestType(n.method)})(HR=h.DocumentLinkResolveRequest||(h.DocumentLinkResolveRequest={}));var WR;(function(n){n.method="textDocument/formatting",n.type=new Y.ProtocolRequestType(n.method)})(WR=h.DocumentFormattingRequest||(h.DocumentFormattingRequest={}));var BR;(function(n){n.method="textDocument/rangeFormatting",n.type=new Y.ProtocolRequestType(n.method)})(BR=h.DocumentRangeFormattingRequest||(h.DocumentRangeFormattingRequest={}));var KR;(function(n){n.method="textDocument/onTypeFormatting",n.type=new Y.ProtocolRequestType(n.method)})(KR=h.DocumentOnTypeFormattingRequest||(h.DocumentOnTypeFormattingRequest={}));var UR;(function(n){n.Identifier=1})(UR=h.PrepareSupportDefaultBehavior||(h.PrepareSupportDefaultBehavior={}));var zR;(function(n){n.method="textDocument/rename",n.type=new Y.ProtocolRequestType(n.method)})(zR=h.RenameRequest||(h.RenameRequest={}));var GR;(function(n){n.method="textDocument/prepareRename",n.type=new Y.ProtocolRequestType(n.method)})(GR=h.PrepareRenameRequest||(h.PrepareRenameRequest={}));var VR;(function(n){n.type=new Y.ProtocolRequestType("workspace/executeCommand")})(VR=h.ExecuteCommandRequest||(h.ExecuteCommandRequest={}));var XR;(function(n){n.type=new Y.ProtocolRequestType("workspace/applyEdit")})(XR=h.ApplyWorkspaceEditRequest||(h.ApplyWorkspaceEditRequest={}))});var Nl=D(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.createProtocolConnection=void 0;var Ll=nr();function JR(n,e,t,r){return Ll.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),Ll.createMessageConnection(n,e,t,r)}Ci.createProtocolConnection=JR});var Al=D(nt=>{"use strict";var QR=nt&&nt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),wi=nt&&nt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&QR(e,n,t)};Object.defineProperty(nt,"__esModule",{value:!0});nt.LSPErrorCodes=nt.createProtocolConnection=void 0;wi(nr(),nt);wi(rl(),nt);wi($e(),nt);wi(Fl(),nt);var YR=Nl();Object.defineProperty(nt,"createProtocolConnection",{enumerable:!0,get:function(){return YR.createProtocolConnection}});var ZR;(function(n){n.lspReservedErrorRangeStart=-32899,n.ContentModified=-32801,n.RequestCancelled=-32800,n.lspReservedErrorRangeEnd=-32800})(ZR=nt.LSPErrorCodes||(nt.LSPErrorCodes={}))});var be=D(Mt=>{"use strict";var eb=Mt&&Mt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Ml=Mt&&Mt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&eb(e,n,t)};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.createProtocolConnection=void 0;var tb=Js();Ml(Js(),Mt);Ml(Al(),Mt);function nb(n,e,t,r){return tb.createMessageConnection(n,e,t,r)}Mt.createProtocolConnection=nb});var no=D(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.toJSONObject=or.ConfigurationFeature=void 0;var to=require("vscode"),rb=be(),jl=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(rb.ConfigurationRequest.type,(t,r)=>{let i=a=>{let f=[];for(let l of a.items){let y=l.scopeUri!==void 0&&l.scopeUri!==null?this._client.protocol2CodeConverter.asUri(l.scopeUri):void 0;f.push(this.getConfiguration(y,l.section!==null?l.section:void 0))}return f},s=e.clientOptions.middleware.workspace;return s&&s.configuration?s.configuration(t,r,i):i(t,r)})}getConfiguration(e,t){let r=null;if(t){let i=t.lastIndexOf(".");if(i===-1)r=sr(to.workspace.getConfiguration(void 0,e).get(t));else{let s=to.workspace.getConfiguration(t.substr(0,i),e);s&&(r=sr(s.get(t.substr(i+1))))}}else{let i=to.workspace.getConfiguration(void 0,e);r={};for(let s of Object.keys(i))i.has(s)&&(r[s]=sr(i.get(s)))}return r===void 0&&(r=null),r}dispose(){}};or.ConfigurationFeature=jl;function sr(n){if(n){if(Array.isArray(n))return n.map(sr);if(typeof n=="object"){let e=Object.create(null);for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=sr(n[t]));return e}}return n}or.toJSONObject=sr});var io=D(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});var ib=require("vscode"),$l=class extends ib.CompletionItem{constructor(e){super(e)}};ro.default=$l});var oo=D(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});var sb=require("vscode"),Hl=class extends sb.CodeLens{constructor(e){super(e)}};so.default=Hl});var co=D(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});var ob=require("vscode"),Wl=class extends ob.DocumentLink{constructor(e,t){super(e,t)}};ao.default=Wl});var lo=D(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});var ab=require("vscode"),Bl=class extends ab.CodeAction{constructor(e,t){super(e);this.data=t}};uo.default=Bl});var ho=D(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.ProtocolDiagnostic=Mn.DiagnosticCode=void 0;var cb=require("vscode"),fo=hn(),ub;(function(n){function e(t){let r=t;return r!=null&&(fo.number(r.value)||fo.string(r.value))&&fo.string(r.target)}n.is=e})(ub=Mn.DiagnosticCode||(Mn.DiagnosticCode={}));var Kl=class extends cb.Diagnostic{constructor(e,t,r,i){super(e,t,r);this.data=i,this.hasDiagnosticCode=!1}};Mn.ProtocolDiagnostic=Kl});var go=D(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});var lb=require("vscode"),Ul=class extends lb.CallHierarchyItem{constructor(e,t,r,i,s,a,f){super(e,t,r,i,s,a);f!==void 0&&(this.data=f)}};po.default=Ul});var Gl=D(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.createConverter=void 0;var He=require("vscode"),ce=be(),Ur=hn(),db=io(),fb=oo(),hb=co(),pb=lo(),zl=ho(),gb=go(),mb=be(),mo;(function(n){function e(t){let r=t;return r&&!!r.inserting&&!!r.replacing}n.is=e})(mo||(mo={}));function vb(n){let t=n||(o=>o.toString());function r(o){return t(o)}function i(o){return{uri:t(o.uri)}}function s(o){return{uri:t(o.uri),version:o.version}}function a(o){return{textDocument:{uri:t(o.uri),languageId:o.languageId,version:o.version,text:o.getText()}}}function f(o){let c=o;return!!c.document&&!!c.contentChanges}function l(o){let c=o;return!!c.uri&&!!c.version}function y(o){if(l(o))return{textDocument:{uri:t(o.uri),version:o.version},contentChanges:[{text:o.getText()}]};if(f(o)){let c=o.document;return{textDocument:{uri:t(c.uri),version:c.version},contentChanges:o.contentChanges.map(S=>{let O=S.range;return{range:{start:{line:O.start.line,character:O.start.character},end:{line:O.end.line,character:O.end.character}},rangeLength:S.rangeLength,text:S.text}})}}else throw Error("Unsupported text document change parameter")}function b(o){return{textDocument:i(o)}}function C(o,c=!1){let v={textDocument:i(o)};return c&&(v.text=o.getText()),v}function w(o){switch(o){case He.TextDocumentSaveReason.Manual:return ce.TextDocumentSaveReason.Manual;case He.TextDocumentSaveReason.AfterDelay:return ce.TextDocumentSaveReason.AfterDelay;case He.TextDocumentSaveReason.FocusOut:return ce.TextDocumentSaveReason.FocusOut}return ce.TextDocumentSaveReason.Manual}function T(o){return{textDocument:i(o.document),reason:w(o.reason)}}function I(o){return{files:o.files.map(c=>({uri:t(c)}))}}function L(o){return{files:o.files.map(c=>({oldUri:t(c.oldUri),newUri:t(c.newUri)}))}}function z(o){return{files:o.files.map(c=>({uri:t(c)}))}}function F(o){return{files:o.files.map(c=>({uri:t(c)}))}}function k(o){return{files:o.files.map(c=>({oldUri:t(c.oldUri),newUri:t(c.newUri)}))}}function x(o){return{files:o.files.map(c=>({uri:t(c)}))}}function q(o,c){return{textDocument:i(o),position:st(c)}}function V(o){switch(o){case He.CompletionTriggerKind.TriggerCharacter:return ce.CompletionTriggerKind.TriggerCharacter;case He.CompletionTriggerKind.TriggerForIncompleteCompletions:return ce.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return ce.CompletionTriggerKind.Invoked}}function Pe(o,c,v){return{textDocument:i(o),position:st(c),context:{triggerKind:V(v.triggerKind),triggerCharacter:v.triggerCharacter}}}function Ie(o){switch(o){case He.SignatureHelpTriggerKind.Invoke:return ce.SignatureHelpTriggerKind.Invoked;case He.SignatureHelpTriggerKind.TriggerCharacter:return ce.SignatureHelpTriggerKind.TriggerCharacter;case He.SignatureHelpTriggerKind.ContentChange:return ce.SignatureHelpTriggerKind.ContentChange}}function Fe(o){return{label:o.label}}function _e(o){return o.map(Fe)}function Ne(o){return{label:o.label,parameters:_e(o.parameters)}}function Ae(o){return o.map(Ne)}function it(o){return o===void 0?o:{signatures:Ae(o.signatures),activeSignature:o.activeSignature,activeParameter:o.activeParameter}}function Qe(o,c,v){return{textDocument:i(o),position:st(c),context:{isRetrigger:v.isRetrigger,triggerCharacter:v.triggerCharacter,triggerKind:Ie(v.triggerKind),activeSignatureHelp:it(v.activeSignatureHelp)}}}function st(o){return{line:o.line,character:o.character}}function Ye(o){return o==null?o:{line:o.line,character:o.character}}function ht(o){let c=[];for(let v of o)c.push(Ye(v));return c}function pe(o){return o==null?o:{start:Ye(o.start),end:Ye(o.end)}}function Dt(o){return o==null?o:ce.Location.create(r(o.uri),pe(o.range))}function Le(o){switch(o){case He.DiagnosticSeverity.Error:return ce.DiagnosticSeverity.Error;case He.DiagnosticSeverity.Warning:return ce.DiagnosticSeverity.Warning;case He.DiagnosticSeverity.Information:return ce.DiagnosticSeverity.Information;case He.DiagnosticSeverity.Hint:return ce.DiagnosticSeverity.Hint}}function ut(o){if(!o)return;let c=[];for(let v of o){let S=pt(v);S!==void 0&&c.push(S)}return c.length>0?c:void 0}function pt(o){switch(o){case He.DiagnosticTag.Unnecessary:return ce.DiagnosticTag.Unnecessary;case He.DiagnosticTag.Deprecated:return ce.DiagnosticTag.Deprecated;default:return}}function Et(o){return{message:o.message,location:Dt(o.location)}}function sn(o){return o.map(Et)}function on(o){if(o!=null)return Ur.number(o)||Ur.string(o)?o:{value:o.value,target:r(o.target)}}function Wt(o){let c=ce.Diagnostic.create(pe(o.range),o.message),v=o instanceof zl.ProtocolDiagnostic?o:void 0;v!==void 0&&v.data!==void 0&&(c.data=v.data);let S=on(o.code);return zl.DiagnosticCode.is(S)?v!==void 0&&v.hasDiagnosticCode?c.code=S:(c.code=S.value,c.codeDescription={href:S.target}):c.code=S,Ur.number(o.severity)&&(c.severity=Le(o.severity)),Array.isArray(o.tags)&&(c.tags=ut(o.tags)),o.relatedInformation&&(c.relatedInformation=sn(o.relatedInformation)),o.source&&(c.source=o.source),c}function Bt(o){return o==null?o:o.map(Wt)}function Lt(o,c){switch(o){case"$string":return c;case ce.MarkupKind.PlainText:return{kind:o,value:c};case ce.MarkupKind.Markdown:return{kind:o,value:c.value};default:return`Unsupported Markup content received. Kind is: ${o}`}}function Nt(o){switch(o){case He.CompletionItemTag.Deprecated:return ce.CompletionItemTag.Deprecated}}function Kt(o){if(o===void 0)return o;let c=[];for(let v of o){let S=Nt(v);S!==void 0&&c.push(S)}return c}function an(o,c){return c!==void 0?c:o+1}function Cn(o){let c={label:o.label},v=o instanceof db.default?o:void 0;o.detail&&(c.detail=o.detail),o.documentation&&(!v||v.documentationFormat==="$string"?c.documentation=o.documentation:c.documentation=Lt(v.documentationFormat,o.documentation)),o.filterText&&(c.filterText=o.filterText),gt(c,o),Ur.number(o.kind)&&(c.kind=an(o.kind,v&&v.originalItemKind)),o.sortText&&(c.sortText=o.sortText),o.additionalTextEdits&&(c.additionalTextEdits=wn(o.additionalTextEdits)),o.commitCharacters&&(c.commitCharacters=o.commitCharacters.slice()),o.command&&(c.command=yt(o.command)),(o.preselect===!0||o.preselect===!1)&&(c.preselect=o.preselect);let S=Kt(o.tags);if(v){if(v.data!==void 0&&(c.data=v.data),v.deprecated===!0||v.deprecated===!1){if(v.deprecated===!0&&S!==void 0&&S.length>0){let O=S.indexOf(He.CompletionItemTag.Deprecated);O!==-1&&S.splice(O,1)}c.deprecated=v.deprecated}v.insertTextMode!==void 0&&(c.insertTextMode=v.insertTextMode)}return S!==void 0&&S.length>0&&(c.tags=S),c.insertTextMode===void 0&&o.keepWhitespace===!0&&(c.insertTextMode=mb.InsertTextMode.adjustIndentation),c}function gt(o,c){let v=ce.InsertTextFormat.PlainText,S,O;c.textEdit?(S=c.textEdit.newText,O=c.textEdit.range):c.insertText instanceof He.SnippetString?(v=ce.InsertTextFormat.Snippet,S=c.insertText.value):S=c.insertText,c.range&&(O=c.range),o.insertTextFormat=v,c.fromEdit&&S!==void 0&&O!==void 0?o.textEdit=cn(S,O):o.insertText=S}function cn(o,c){return mo.is(c)?ce.InsertReplaceEdit.create(o,pe(c.inserting),pe(c.replacing)):{newText:o,range:pe(c)}}function mt(o){return{range:pe(o.range),newText:o.newText}}function wn(o){return o==null?o:o.map(mt)}function we(o){return o<=He.SymbolKind.TypeParameter?o+1:ce.SymbolKind.Property}function ot(o){return o}function un(o){return o.map(ot)}function Sn(o,c,v){return{textDocument:i(o),position:st(c),context:{includeDeclaration:v.includeDeclaration}}}function vt(o){let c=ce.CodeAction.create(o.title);if(o instanceof pb.default&&o.data!==void 0&&(c.data=o.data),o.kind!==void 0&&(c.kind=Ut(o.kind)),o.diagnostics!==void 0&&(c.diagnostics=Bt(o.diagnostics)),o.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return o.command!==void 0&&(c.command=yt(o.command)),o.isPreferred!==void 0&&(c.isPreferred=o.isPreferred),o.disabled!==void 0&&(c.disabled={reason:o.disabled.reason}),c}function ln(o){if(o==null)return o;let c;return o.only&&Ur.string(o.only.value)&&(c=[o.only.value]),ce.CodeActionContext.create(Bt(o.diagnostics),c)}function Ut(o){if(o!=null)return o.value}function yt(o){let c=ce.Command.create(o.title,o.command);return o.arguments&&(c.arguments=o.arguments),c}function zt(o){let c=ce.CodeLens.create(pe(o.range));return o.command&&(c.command=yt(o.command)),o instanceof fb.default&&o.data&&(c.data=o.data),c}function Rt(o,c){let v={tabSize:o.tabSize,insertSpaces:o.insertSpaces};return c.trimTrailingWhitespace&&(v.trimTrailingWhitespace=!0),c.trimFinalNewlines&&(v.trimFinalNewlines=!0),c.insertFinalNewline&&(v.insertFinalNewline=!0),v}function R(o){return{textDocument:i(o)}}function p(o){return{textDocument:i(o)}}function d(o){let c=ce.DocumentLink.create(pe(o.range));o.target&&(c.target=r(o.target)),o.tooltip!==void 0&&(c.tooltip=o.tooltip);let v=o instanceof hb.default?o:void 0;return v&&v.data&&(c.data=v.data),c}function g(o){return{textDocument:i(o)}}function _(o){let c={name:o.name,kind:we(o.kind),uri:r(o.uri),range:pe(o.range),selectionRange:pe(o.selectionRange)};return o.detail!==void 0&&o.detail.length>0&&(c.detail=o.detail),o.tags!==void 0&&(c.tags=un(o.tags)),o instanceof gb.default&&o.data!==void 0&&(c.data=o.data),c}return{asUri:r,asTextDocumentIdentifier:i,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:a,asChangeTextDocumentParams:y,asCloseTextDocumentParams:b,asSaveTextDocumentParams:C,asWillSaveTextDocumentParams:T,asDidCreateFilesParams:I,asDidRenameFilesParams:L,asDidDeleteFilesParams:z,asWillCreateFilesParams:F,asWillRenameFilesParams:k,asWillDeleteFilesParams:x,asTextDocumentPositionParams:q,asCompletionParams:Pe,asSignatureHelpParams:Qe,asWorkerPosition:st,asRange:pe,asPosition:Ye,asPositions:ht,asLocation:Dt,asDiagnosticSeverity:Le,asDiagnosticTag:pt,asDiagnostic:Wt,asDiagnostics:Bt,asCompletionItem:Cn,asTextEdit:mt,asSymbolKind:we,asSymbolTag:ot,asSymbolTags:un,asReferenceParams:Sn,asCodeAction:vt,asCodeActionContext:ln,asCommand:yt,asCodeLens:zt,asFormattingOptions:Rt,asDocumentSymbolParams:R,asCodeLensParams:p,asDocumentLink:d,asDocumentLinkParams:g,asCallHierarchyItem:_}}Si.createConverter=vb});var Jl=D(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.createConverter=void 0;var H=require("vscode"),te=be(),Ft=hn(),yb=io(),Rb=oo(),bb=co(),_b=lo(),Vl=ho(),Cb=go(),Xl=be(),Ti;(function(n){function e(t){let r=t;return r&&Ft.string(r.language)&&Ft.string(r.value)}n.is=e})(Ti||(Ti={}));function wb(n,e){let r=n||(u=>H.Uri.parse(u));function i(u){return r(u)}function s(u){return u.map(a)}function a(u){let E=new Vl.ProtocolDiagnostic(w(u.range),u.message,I(u.severity),u.data);return u.code!==void 0&&(te.CodeDescription.is(u.codeDescription)?E.code={value:u.code,target:i(u.codeDescription.href)}:Vl.DiagnosticCode.is(u.code)?(E.hasDiagnosticCode=!0,E.code={value:u.code.value,target:i(u.code.target)}):E.code=u.code),u.source&&(E.source=u.source),u.relatedInformation&&(E.relatedInformation=f(u.relatedInformation)),Array.isArray(u.tags)&&(E.tags=y(u.tags)),E}function f(u){return u.map(l)}function l(u){return new H.DiagnosticRelatedInformation(pe(u.location),u.message)}function y(u){if(!u)return;let E=[];for(let K of u){let se=b(K);se!==void 0&&E.push(se)}return E.length>0?E:void 0}function b(u){switch(u){case te.DiagnosticTag.Unnecessary:return H.DiagnosticTag.Unnecessary;case te.DiagnosticTag.Deprecated:return H.DiagnosticTag.Deprecated;default:return}}function C(u){if(!!u)return new H.Position(u.line,u.character)}function w(u){if(!!u)return new H.Range(C(u.start),C(u.end))}function T(u){return u.map(E=>w(E))}function I(u){if(u==null)return H.DiagnosticSeverity.Error;switch(u){case te.DiagnosticSeverity.Error:return H.DiagnosticSeverity.Error;case te.DiagnosticSeverity.Warning:return H.DiagnosticSeverity.Warning;case te.DiagnosticSeverity.Information:return H.DiagnosticSeverity.Information;case te.DiagnosticSeverity.Hint:return H.DiagnosticSeverity.Hint}return H.DiagnosticSeverity.Error}function L(u){if(Ft.string(u))return F(u);if(Ti.is(u))return F().appendCodeblock(u.value,u.language);if(Array.isArray(u)){let E=[];for(let K of u){let se=F();Ti.is(K)?se.appendCodeblock(K.value,K.language):se.appendMarkdown(K),E.push(se)}return E}else{let E;switch(u.kind){case te.MarkupKind.Markdown:return F(u.value);case te.MarkupKind.PlainText:return E=F(),E.appendText(u.value),E;default:return E=F(),E.appendText(`Unsupported Markup content received. Kind is: ${u.kind}`),E}}}function z(u){if(Ft.string(u))return u;switch(u.kind){case te.MarkupKind.Markdown:return F(u.value);case te.MarkupKind.PlainText:return u.value;default:return`Unsupported Markup content received. Kind is: ${u.kind}`}}function F(u){let E=new H.MarkdownString(u);return e===!0&&(E.isTrusted=e),E}function k(u){if(!!u)return new H.Hover(L(u.contents),w(u.range))}function x(u){if(!u)return;if(Array.isArray(u))return u.map(Ie);let E=u;return new H.CompletionList(E.items.map(Ie),E.isIncomplete)}function q(u){return te.CompletionItemKind.Text<=u&&u<=te.CompletionItemKind.TypeParameter?[u-1,void 0]:[H.CompletionItemKind.Text,u]}function V(u){switch(u){case te.CompletionItemTag.Deprecated:return H.CompletionItemTag.Deprecated}}function Pe(u){if(u==null)return[];let E=[];for(let K of u){let se=V(K);se!==void 0&&E.push(se)}return E}function Ie(u){let E=Pe(u.tags),K=new yb.default(u.label);u.detail&&(K.detail=u.detail),u.documentation&&(K.documentation=z(u.documentation),K.documentationFormat=Ft.string(u.documentation)?"$string":u.documentation.kind),u.filterText&&(K.filterText=u.filterText);let se=Fe(u);if(se&&(K.insertText=se.text,K.range=se.range,K.fromEdit=se.fromEdit),Ft.number(u.kind)){let[de,Dn]=q(u.kind);K.kind=de,Dn&&(K.originalItemKind=Dn)}return u.sortText&&(K.sortText=u.sortText),u.additionalTextEdits&&(K.additionalTextEdits=Ae(u.additionalTextEdits)),Ft.stringArray(u.commitCharacters)&&(K.commitCharacters=u.commitCharacters.slice()),u.command&&(K.command=mt(u.command)),(u.deprecated===!0||u.deprecated===!1)&&(K.deprecated=u.deprecated,u.deprecated===!0&&E.push(H.CompletionItemTag.Deprecated)),(u.preselect===!0||u.preselect===!1)&&(K.preselect=u.preselect),u.data!==void 0&&(K.data=u.data),E.length>0&&(K.tags=E),u.insertTextMode!==void 0&&(K.insertTextMode=u.insertTextMode,u.insertTextMode===Xl.InsertTextMode.asIs&&(K.keepWhitespace=!0)),K}function Fe(u){return u.textEdit?u.insertTextFormat===te.InsertTextFormat.Snippet?{text:new H.SnippetString(u.textEdit.newText),range:_e(u.textEdit),fromEdit:!0}:{text:u.textEdit.newText,range:_e(u.textEdit),fromEdit:!0}:u.insertText?u.insertTextFormat===te.InsertTextFormat.Snippet?{text:new H.SnippetString(u.insertText),fromEdit:!1}:{text:u.insertText,fromEdit:!1}:void 0}function _e(u){return te.InsertReplaceEdit.is(u)?{inserting:w(u.insert),replacing:w(u.replace)}:w(u.range)}function Ne(u){if(!!u)return new H.TextEdit(w(u.range),u.newText)}function Ae(u){if(!!u)return u.map(Ne)}function it(u){if(!u)return;let E=new H.SignatureHelp;return Ft.number(u.activeSignature)?E.activeSignature=u.activeSignature:E.activeSignature=0,Ft.number(u.activeParameter)?E.activeParameter=u.activeParameter:E.activeParameter=0,u.signatures&&(E.signatures=Qe(u.signatures)),E}function Qe(u){return u.map(st)}function st(u){let E=new H.SignatureInformation(u.label);return u.documentation!==void 0&&(E.documentation=z(u.documentation)),u.parameters!==void 0&&(E.parameters=Ye(u.parameters)),u.activeParameter!==void 0&&(E.activeParameter=u.activeParameter),E}function Ye(u){return u.map(ht)}function ht(u){let E=new H.ParameterInformation(u.label);return u.documentation&&(E.documentation=z(u.documentation)),E}function pe(u){if(!!u)return new H.Location(r(u.uri),w(u.range))}function Dt(u){if(!!u)return pt(u)}function Le(u){if(!!u)return pt(u)}function ut(u){if(!u)return;let E={targetUri:r(u.targetUri),targetRange:w(u.targetRange),originSelectionRange:w(u.originSelectionRange),targetSelectionRange:w(u.targetSelectionRange)};if(!E.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return E}function pt(u){if(!!u)return Ft.array(u)?u.length===0?[]:te.LocationLink.is(u[0])?u.map(K=>ut(K)):u.map(K=>pe(K)):te.LocationLink.is(u)?[ut(u)]:pe(u)}function Et(u){if(!!u)return u.map(E=>pe(E))}function sn(u){if(!!u)return u.map(on)}function on(u){let E=new H.DocumentHighlight(w(u.range));return Ft.number(u.kind)&&(E.kind=Wt(u.kind)),E}function Wt(u){switch(u){case te.DocumentHighlightKind.Text:return H.DocumentHighlightKind.Text;case te.DocumentHighlightKind.Read:return H.DocumentHighlightKind.Read;case te.DocumentHighlightKind.Write:return H.DocumentHighlightKind.Write}return H.DocumentHighlightKind.Text}function Bt(u,E){if(!!u)return u.map(K=>an(K,E))}function Lt(u){return u<=te.SymbolKind.TypeParameter?u-1:H.SymbolKind.Property}function Nt(u){switch(u){case te.SymbolTag.Deprecated:return H.SymbolTag.Deprecated;default:return}}function Kt(u){if(u==null)return;let E=[];for(let K of u){let se=Nt(K);se!==void 0&&E.push(se)}return E.length===0?void 0:E}function an(u,E){let K=new H.SymbolInformation(u.name,Lt(u.kind),w(u.location.range),u.location.uri?r(u.location.uri):E);return cn(K,u),u.containerName&&(K.containerName=u.containerName),K}function Cn(u){if(u!=null)return u.map(gt)}function gt(u){let E=new H.DocumentSymbol(u.name,u.detail||"",Lt(u.kind),w(u.range),w(u.selectionRange));if(cn(E,u),u.children!==void 0&&u.children.length>0){let K=[];for(let se of u.children)K.push(gt(se));E.children=K}return E}function cn(u,E){u.tags=Kt(E.tags),E.deprecated&&(u.tags?u.tags.includes(H.SymbolTag.Deprecated)||(u.tags=u.tags.concat(H.SymbolTag.Deprecated)):u.tags=[H.SymbolTag.Deprecated])}function mt(u){let E={title:u.title,command:u.command};return u.arguments&&(E.arguments=u.arguments),E}function wn(u){if(!!u)return u.map(mt)}let we=new Map;we.set(te.CodeActionKind.Empty,H.CodeActionKind.Empty),we.set(te.CodeActionKind.QuickFix,H.CodeActionKind.QuickFix),we.set(te.CodeActionKind.Refactor,H.CodeActionKind.Refactor),we.set(te.CodeActionKind.RefactorExtract,H.CodeActionKind.RefactorExtract),we.set(te.CodeActionKind.RefactorInline,H.CodeActionKind.RefactorInline),we.set(te.CodeActionKind.RefactorRewrite,H.CodeActionKind.RefactorRewrite),we.set(te.CodeActionKind.Source,H.CodeActionKind.Source),we.set(te.CodeActionKind.SourceOrganizeImports,H.CodeActionKind.SourceOrganizeImports);function ot(u){if(u==null)return;let E=we.get(u);if(E)return E;let K=u.split(".");E=H.CodeActionKind.Empty;for(let se of K)E=E.append(se);return E}function un(u){if(u!=null)return u.map(E=>ot(E))}function Sn(u){if(u==null)return;let E=new _b.default(u.title,u.data);return u.kind!==void 0&&(E.kind=ot(u.kind)),u.diagnostics!==void 0&&(E.diagnostics=s(u.diagnostics)),u.edit!==void 0&&(E.edit=Ut(u.edit)),u.command!==void 0&&(E.command=mt(u.command)),u.isPreferred!==void 0&&(E.isPreferred=u.isPreferred),u.disabled!==void 0&&(E.disabled={reason:u.disabled.reason}),E}function vt(u){if(!u)return;let E=new Rb.default(w(u.range));return u.command&&(E.command=mt(u.command)),u.data!==void 0&&u.data!==null&&(E.data=u.data),E}function ln(u){if(!!u)return u.map(E=>vt(E))}function Ut(u){if(!u)return;let E=new Map;if(u.changeAnnotations!==void 0)for(let de of Object.keys(u.changeAnnotations)){let Dn=yt(u.changeAnnotations[de]);E.set(de,Dn)}let K=de=>{if(de!==void 0)return E.get(de)},se=new H.WorkspaceEdit;if(u.documentChanges)for(let de of u.documentChanges)if(te.CreateFile.is(de))se.createFile(r(de.uri),de.options,K(de.annotationId));else if(te.RenameFile.is(de))se.renameFile(r(de.oldUri),r(de.newUri),de.options,K(de.annotationId));else if(te.DeleteFile.is(de))se.deleteFile(r(de.uri),de.options,K(de.annotationId));else if(te.TextDocumentEdit.is(de)){let Dn=r(de.textDocument.uri);for(let zn of de.edits)Xl.AnnotatedTextEdit.is(zn)?se.replace(Dn,w(zn.range),zn.newText,K(zn.annotationId)):se.replace(Dn,w(zn.range),zn.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(de,void 0,4)}`);else u.changes&&Object.keys(u.changes).forEach(de=>{se.set(r(de),Ae(u.changes[de]))});return se}function yt(u){if(u!==void 0)return{label:u.label,needsConfirmation:!!u.needsConfirmation,description:u.description}}function zt(u){let E=w(u.range),K=u.target?i(u.target):void 0,se=new bb.default(E,K);return u.tooltip!==void 0&&(se.tooltip=u.tooltip),u.data!==void 0&&u.data!==null&&(se.data=u.data),se}function Rt(u){if(!!u)return u.map(zt)}function R(u){return new H.Color(u.red,u.green,u.blue,u.alpha)}function p(u){return new H.ColorInformation(w(u.range),R(u.color))}function d(u){if(Array.isArray(u))return u.map(p)}function g(u){let E=new H.ColorPresentation(u.label);return E.additionalTextEdits=Ae(u.additionalTextEdits),u.textEdit&&(E.textEdit=Ne(u.textEdit)),E}function _(u){if(Array.isArray(u))return u.map(g)}function o(u){if(u)switch(u){case te.FoldingRangeKind.Comment:return H.FoldingRangeKind.Comment;case te.FoldingRangeKind.Imports:return H.FoldingRangeKind.Imports;case te.FoldingRangeKind.Region:return H.FoldingRangeKind.Region}}function c(u){return new H.FoldingRange(u.startLine,u.endLine,o(u.kind))}function v(u){if(Array.isArray(u))return u.map(c)}function S(u){return new H.SelectionRange(w(u.range),u.parent?S(u.parent):void 0)}function O(u){if(!Array.isArray(u))return[];let E=[];for(let K of u)E.push(S(K));return E}function W(u){if(u===null)return;let E=new Cb.default(Lt(u.kind),u.name,u.detail||"",i(u.uri),w(u.range),w(u.selectionRange),u.data);return u.tags!==void 0&&(E.tags=Kt(u.tags)),E}function Q(u){if(u!==null)return u.map(E=>W(E))}function ue(u){return new H.CallHierarchyIncomingCall(W(u.from),T(u.fromRanges))}function Se(u){if(u!==null)return u.map(E=>ue(E))}function Te(u){return new H.CallHierarchyOutgoingCall(W(u.to),T(u.fromRanges))}function ie(u){if(u!==null)return u.map(E=>Te(E))}function dn(u){if(u!=null)return new H.SemanticTokens(new Uint32Array(u.data),u.resultId)}function Tn(u){return new H.SemanticTokensEdit(u.start,u.deleteCount,u.data!==void 0?new Uint32Array(u.data):void 0)}function Zr(u){if(u!=null)return new H.SemanticTokensEdits(u.edits.map(Tn),u.resultId)}function Pp(u){return u}function qp(u){if(u!=null)return new H.LinkedEditingRanges(T(u.ranges),kp(u.wordPattern))}function kp(u){if(u!=null)return new RegExp(u)}return{asUri:i,asDiagnostics:s,asDiagnostic:a,asRange:w,asRanges:T,asPosition:C,asDiagnosticSeverity:I,asDiagnosticTag:b,asHover:k,asCompletionResult:x,asCompletionItem:Ie,asTextEdit:Ne,asTextEdits:Ae,asSignatureHelp:it,asSignatureInformations:Qe,asSignatureInformation:st,asParameterInformations:Ye,asParameterInformation:ht,asDeclarationResult:Dt,asDefinitionResult:Le,asLocation:pe,asReferences:Et,asDocumentHighlights:sn,asDocumentHighlight:on,asDocumentHighlightKind:Wt,asSymbolKind:Lt,asSymbolTag:Nt,asSymbolTags:Kt,asSymbolInformations:Bt,asSymbolInformation:an,asDocumentSymbols:Cn,asDocumentSymbol:gt,asCommand:mt,asCommands:wn,asCodeAction:Sn,asCodeActionKind:ot,asCodeActionKinds:un,asCodeLens:vt,asCodeLenses:ln,asWorkspaceEdit:Ut,asDocumentLink:zt,asDocumentLinks:Rt,asFoldingRangeKind:o,asFoldingRange:c,asFoldingRanges:v,asColor:R,asColorInformation:p,asColorInformations:d,asColorPresentation:g,asColorPresentations:_,asSelectionRange:S,asSelectionRanges:O,asSemanticTokensLegend:Pp,asSemanticTokens:dn,asSemanticTokensEdit:Tn,asSemanticTokensEdits:Zr,asCallHierarchyItem:W,asCallHierarchyItems:Q,asCallHierarchyIncomingCall:ue,asCallHierarchyIncomingCalls:Se,asCallHierarchyOutgoingCall:Te,asCallHierarchyOutgoingCalls:ie,asLinkedEditingRanges:qp}}Di.createConverter=wb});var Zl=D(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.Delayer=void 0;var Ql=be(),Yl=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(t>=0||this.timeout===void 0)&&(this.timeout=Ql.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(Ql.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};Ei.Delayer=Yl});var qi=D(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.generateUuid=St.parse=St.isUUID=St.v4=St.empty=void 0;var Pi=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},ne=class extends Pi{constructor(){super([ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),"-",ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),"-","4",ne._randomHex(),ne._randomHex(),ne._randomHex(),"-",ne._oneOf(ne._timeHighBits),ne._randomHex(),ne._randomHex(),ne._randomHex(),"-",ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex(),ne._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return ne._oneOf(ne._chars)}};ne._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];ne._timeHighBits=["8","9","a","b"];St.empty=new Pi("00000000-0000-0000-0000-000000000000");function ed(){return new ne}St.v4=ed;var Sb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function td(n){return Sb.test(n)}St.isUUID=td;function Tb(n){if(!td(n))throw new Error("invalid uuid");return new Pi(n)}St.parse=Tb;function Db(){return ed().asHex()}St.generateUuid=Db});var vo=D(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.ProgressPart=void 0;var nd=require("vscode"),rd=be(),id=hn(),sd=class{constructor(e,t,r){this._client=e,this._token=t,this._reported=0,this._disposable=this._client.onProgress(rd.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){nd.window.withProgress({location:nd.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,r)=>(this._progress=t,this._infinite=e.percentage===void 0,this._cancellationToken=r,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(rd.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})))}report(e){if(this._infinite&&id.string(e.message))this._progress.report({message:e.message});else if(id.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,t-this._reported);this._progress.report({message:e.message,increment:r}),this._reported+=r}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};ki.ProgressPart=sd});var lt=D(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.BaseLanguageClient=Ee.MessageTransports=Ee.TextDocumentFeature=Ee.State=Ee.RevealOutputChannelOn=Ee.CloseAction=Ee.ErrorAction=void 0;var N=require("vscode"),m=be(),Eb=no(),Pb=Gl(),qb=Jl(),fe=hn(),od=Zl(),he=qi(),kb=vo(),ad=class{error(e){m.RAL().console.error(e)}warn(e){m.RAL().console.warn(e)}info(e){m.RAL().console.info(e)}log(e){m.RAL().console.log(e)}};function Ob(n,e,t,r,i){let s=new ad,a=m.createProtocolConnection(n,e,s,i);return a.onError(l=>{t(l[0],l[1],l[2])}),a.onClose(r),{listen:()=>a.listen(),sendRequest:(l,...y)=>a.sendRequest(fe.string(l)?l:l.method,...y),onRequest:(l,y)=>a.onRequest(fe.string(l)?l:l.method,y),sendNotification:(l,y)=>a.sendNotification(fe.string(l)?l:l.method,y),onNotification:(l,y)=>a.onNotification(fe.string(l)?l:l.method,y),onProgress:a.onProgress,sendProgress:a.sendProgress,trace:(l,y,b)=>{let C={sendNotification:!1,traceFormat:m.TraceFormat.Text};b===void 0?a.trace(l,y,C):(fe.boolean(b),a.trace(l,y,b))},initialize:l=>a.sendRequest(m.InitializeRequest.type,l),shutdown:()=>a.sendRequest(m.ShutdownRequest.type,void 0),exit:()=>a.sendNotification(m.ExitNotification.type),onLogMessage:l=>a.onNotification(m.LogMessageNotification.type,l),onShowMessage:l=>a.onNotification(m.ShowMessageNotification.type,l),onTelemetry:l=>a.onNotification(m.TelemetryEventNotification.type,l),didChangeConfiguration:l=>a.sendNotification(m.DidChangeConfigurationNotification.type,l),didChangeWatchedFiles:l=>a.sendNotification(m.DidChangeWatchedFilesNotification.type,l),didOpenTextDocument:l=>a.sendNotification(m.DidOpenTextDocumentNotification.type,l),didChangeTextDocument:l=>a.sendNotification(m.DidChangeTextDocumentNotification.type,l),didCloseTextDocument:l=>a.sendNotification(m.DidCloseTextDocumentNotification.type,l),didSaveTextDocument:l=>a.sendNotification(m.DidSaveTextDocumentNotification.type,l),onDiagnostics:l=>a.onNotification(m.PublishDiagnosticsNotification.type,l),end:()=>a.end(),dispose:()=>a.dispose()}}var Oi;(function(n){n[n.Continue=1]="Continue",n[n.Shutdown=2]="Shutdown"})(Oi=Ee.ErrorAction||(Ee.ErrorAction={}));var jn;(function(n){n[n.DoNotRestart=1]="DoNotRestart",n[n.Restart=2]="Restart"})(jn=Ee.CloseAction||(Ee.CloseAction={}));var cd=class{constructor(e,t){this.name=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,r){return r&&r<=3?Oi.Continue:Oi.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?jn.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(N.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),jn.DoNotRestart):(this.restarts.shift(),jn.Restart)}},zr;(function(n){n[n.Info=1]="Info",n[n.Warn=2]="Warn",n[n.Error=3]="Error",n[n.Never=4]="Never"})(zr=Ee.RevealOutputChannelOn||(Ee.RevealOutputChannelOn={}));var xi;(function(n){n[n.Stopped=1]="Stopped",n[n.Starting=3]="Starting",n[n.Running=2]="Running"})(xi=Ee.State||(Ee.State={}));var ye;(function(n){n[n.Initial=0]="Initial",n[n.Starting=1]="Starting",n[n.StartFailed=2]="StartFailed",n[n.Running=3]="Running",n[n.Stopping=4]="Stopping",n[n.Stopped=5]="Stopped"})(ye||(ye={}));var ud=[m.SymbolKind.File,m.SymbolKind.Module,m.SymbolKind.Namespace,m.SymbolKind.Package,m.SymbolKind.Class,m.SymbolKind.Method,m.SymbolKind.Property,m.SymbolKind.Field,m.SymbolKind.Constructor,m.SymbolKind.Enum,m.SymbolKind.Interface,m.SymbolKind.Function,m.SymbolKind.Variable,m.SymbolKind.Constant,m.SymbolKind.String,m.SymbolKind.Number,m.SymbolKind.Boolean,m.SymbolKind.Array,m.SymbolKind.Object,m.SymbolKind.Key,m.SymbolKind.Null,m.SymbolKind.EnumMember,m.SymbolKind.Struct,m.SymbolKind.Event,m.SymbolKind.Operator,m.SymbolKind.TypeParameter],xb=[m.CompletionItemKind.Text,m.CompletionItemKind.Method,m.CompletionItemKind.Function,m.CompletionItemKind.Constructor,m.CompletionItemKind.Field,m.CompletionItemKind.Variable,m.CompletionItemKind.Class,m.CompletionItemKind.Interface,m.CompletionItemKind.Module,m.CompletionItemKind.Property,m.CompletionItemKind.Unit,m.CompletionItemKind.Value,m.CompletionItemKind.Enum,m.CompletionItemKind.Keyword,m.CompletionItemKind.Snippet,m.CompletionItemKind.Color,m.CompletionItemKind.File,m.CompletionItemKind.Reference,m.CompletionItemKind.Folder,m.CompletionItemKind.EnumMember,m.CompletionItemKind.Constant,m.CompletionItemKind.Struct,m.CompletionItemKind.Event,m.CompletionItemKind.Operator,m.CompletionItemKind.TypeParameter],ld=[m.SymbolTag.Deprecated];function B(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var Gr;(function(n){function e(t){let r=N.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}n.fromConfiguration=e})(Gr||(Gr={}));var yo;(function(n){function e(t){let r=t;return r&&fe.func(r.register)&&fe.func(r.unregister)&&fe.func(r.dispose)&&r.registrationType!==void 0}n.is=e})(yo||(yo={}));var jt=class{constructor(e,t,r,i,s,a){this._client=e,this._event=t,this._type=r,this._middleware=i,this._createParams=s,this._selectorFilter=a,this._selectors=new Map}static textDocumentFilter(e,t){for(let r of e)if(N.languages.match(r,t))return!0;return!1}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,t=>this._client.sendNotification(this._type,this._createParams(t))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if(N.languages.match(t,e))return{send:r=>{this.callback(r)}}}},dd=class extends jt{constructor(e,t){super(e,N.workspace.onDidOpenTextDocument,m.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),jt.textDocumentFilter);this._syncedDocuments=t}fillClientCapabilities(e){B(B(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:he.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return m.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=e.registerOptions.documentSelector;N.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&N.languages.match(t,r)){let s=this._client.clientOptions.middleware,a=f=>{this._client.sendNotification(this._type,this._createParams(f))};s.didOpen?s.didOpen(r,a):a(r),this._syncedDocuments.set(i,r)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},fd=class extends jt{constructor(e,t){super(e,N.workspace.onDidCloseTextDocument,m.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,r=>e.code2ProtocolConverter.asCloseTextDocumentParams(r),jt.textDocumentFilter);this._syncedDocuments=t}get registrationType(){return m.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){B(B(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:he.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(N.languages.match(t,i)&&!this._selectorFilter(r,i)){let s=this._client.clientOptions.middleware,a=f=>{this._client.sendNotification(this._type,this._createParams(f))};this._syncedDocuments.delete(i.uri.toString()),s.didClose?s.didClose(i,a):a(i)}})}},hd=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get registrationType(){return m.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){B(B(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.change!==void 0&&r.change!==m.TextDocumentSyncKind.None&&this.register({id:he.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:r.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=N.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{documentSelector:e.registerOptions.documentSelector,syncKind:e.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let t of this._changeData.values())if(N.languages.match(t.documentSelector,e.document)){let r=this._client.clientOptions.middleware;if(t.syncKind===m.TextDocumentSyncKind.Incremental){let i=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);r.didChange?r.didChange(e,()=>this._client.sendNotification(m.DidChangeTextDocumentNotification.type,i)):this._client.sendNotification(m.DidChangeTextDocumentNotification.type,i)}else if(t.syncKind===m.TextDocumentSyncKind.Full){let i=s=>{this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(m.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))})):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new od.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(m.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(s.document))},-1))};r.didChange?r.didChange(e,i):i(e)}}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let t of this._changeData.values())if(N.languages.match(t.documentSelector,e))return{send:r=>{this.callback(r)}}}},pd=class extends jt{constructor(e){super(e,N.workspace.onWillSaveTextDocument,m.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(t,r)=>jt.textDocumentFilter(t,r.document))}get registrationType(){return m.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=B(B(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSave&&this.register({id:he.generateUuid(),registerOptions:{documentSelector:t}})}},gd=class{constructor(e){this._client=e,this._selectors=new Map}get registrationType(){return m.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=B(B(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSaveWaitUntil&&this.register({id:he.generateUuid(),registerOptions:{documentSelector:t}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=N.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){if(jt.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,r=i=>this._client.sendRequest(m.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(s=>{let a=this._client.protocol2CodeConverter.asTextEdits(s);return a===void 0?[]:a});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},md=class extends jt{constructor(e){super(e,N.workspace.onDidSaveTextDocument,m.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),jt.textDocumentFilter);this._includeText=!1}get registrationType(){return m.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){B(B(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;if(t&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:he.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}},vd=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get registrationType(){return m.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){B(B(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let r of e.registerOptions.watchers){if(!fe.string(r.globPattern))continue;let i=!0,s=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(i=(r.kind&m.WatchKind.Create)!=0,s=(r.kind&m.WatchKind.Change)!=0,a=(r.kind&m.WatchKind.Delete)!=0);let f=N.workspace.createFileSystemWatcher(r.globPattern,!i,!s,!a);this.hookListeners(f,i,s,a),t.push(f)}this._watchers.set(e.id,t)}registerRaw(e,t){let r=[];for(let i of t)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,t,r,i,s){t&&e.onDidCreate(a=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(a),type:m.FileChangeType.Created}),null,s),r&&e.onDidChange(a=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(a),type:m.FileChangeType.Changed}),null,s),i&&e.onDidDelete(a=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(a),type:m.FileChangeType.Deleted}),null,s)}unregister(e){let t=this._watchers.get(e);if(t)for(let r of t)r.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}},Xe=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(m.TextDocumentRegistrationOptions.is(t)){let r=m.StaticRegistrationOptions.hasId(t)?t.id:he.generateUuid(),i=t.documentSelector||e;if(i)return[r,Object.assign({},t,{documentSelector:i})]}else if(fe.boolean(t)&&t===!0||m.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let r=fe.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[he.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return fe.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let r=t.data.registerOptions.documentSelector;if(r!==null&&N.languages.match(r,e))return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};Ee.TextDocumentFeature=Xe;var yd=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}},Rd=class extends Xe{constructor(e){super(e,m.CompletionRequest.type)}fillClientCapabilities(e){let t=B(B(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[m.MarkupKind.Markdown,m.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[m.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[m.InsertTextMode.asIs,m.InsertTextMode.adjustIndentation]}},t.completionItemKind={valueSet:xb}}initialize(e,t){let r=this.getRegistrationOptions(t,e.completionProvider);!r||this.register({id:he.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.triggerCharacters||[],r={provideCompletionItems:(i,s,a,f)=>{let l=this._client,y=this._client.clientOptions.middleware,b=(C,w,T,I)=>l.sendRequest(m.CompletionRequest.type,l.code2ProtocolConverter.asCompletionParams(C,w,T),I).then(l.protocol2CodeConverter.asCompletionResult,L=>l.handleFailedRequest(m.CompletionRequest.type,L,null));return y.provideCompletionItem?y.provideCompletionItem(i,s,f,a,b):b(i,s,f,a)},resolveCompletionItem:e.resolveProvider?(i,s)=>{let a=this._client,f=this._client.clientOptions.middleware,l=(y,b)=>a.sendRequest(m.CompletionResolveRequest.type,a.code2ProtocolConverter.asCompletionItem(y),b).then(a.protocol2CodeConverter.asCompletionItem,C=>a.handleFailedRequest(m.CompletionResolveRequest.type,C,y));return f.resolveCompletionItem?f.resolveCompletionItem(i,s,l):l(i,s)}:void 0};return[N.languages.registerCompletionItemProvider(e.documentSelector,r,...t),r]}},bd=class extends Xe{constructor(e){super(e,m.HoverRequest.type)}fillClientCapabilities(e){let t=B(B(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[m.MarkupKind.Markdown,m.MarkupKind.PlainText]}initialize(e,t){let r=this.getRegistrationOptions(t,e.hoverProvider);!r||this.register({id:he.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideHover:(r,i,s)=>{let a=this._client,f=(y,b,C)=>a.sendRequest(m.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,b),C).then(a.protocol2CodeConverter.asHover,w=>a.handleFailedRequest(m.HoverRequest.type,w,null)),l=a.clientOptions.middleware;return l.provideHover?l.provideHover(r,i,s,f):f(r,i,s)}};return[N.languages.registerHoverProvider(e.documentSelector,t),t]}},_d=class extends Xe{constructor(e){super(e,m.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=B(B(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[m.MarkupKind.Markdown,m.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.signatureHelpProvider);!r||this.register({id:he.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideSignatureHelp:(i,s,a,f)=>{let l=this._client,y=(C,w,T,I)=>l.sendRequest(m.SignatureHelpRequest.type,l.code2ProtocolConverter.asSignatureHelpParams(C,w,T),I).then(l.protocol2CodeConverter.asSignatureHelp,L=>l.handleFailedRequest(m.SignatureHelpRequest.type,L,null)),b=l.clientOptions.middleware;return b.provideSignatureHelp?b.provideSignatureHelp(i,s,f,a,y):y(i,s,f,a)}},r;if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];r=N.languages.registerSignatureHelpProvider(e.documentSelector,t,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};r=N.languages.registerSignatureHelpProvider(e.documentSelector,t,i)}return[r,t]}},Cd=class extends Xe{constructor(e){super(e,m.DefinitionRequest.type)}fillClientCapabilities(e){let t=B(B(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.definitionProvider);!r||this.register({id:he.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideDefinition:(r,i,s)=>{let a=this._client,f=(y,b,C)=>a.sendRequest(m.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,b),C).then(a.protocol2CodeConverter.asDefinitionResult,w=>a.handleFailedRequest(m.DefinitionRequest.type,w,null)),l=a.clientOptions.middleware;return l.provideDefinition?l.provideDefinition(r,i,s,f):f(r,i,s)}};return[N.languages.registerDefinitionProvider(e.documentSelector,t),t]}},wd=class extends Xe{constructor(e){super(e,m.ReferencesRequest.type)}fillClientCapabilities(e){B(B(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.referencesProvider);!r||this.register({id:he.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideReferences:(r,i,s,a)=>{let f=this._client,l=(b,C,w,T)=>f.sendRequest(m.ReferencesRequest.type,f.code2ProtocolConverter.asReferenceParams(b,C,w),T).then(f.protocol2CodeConverter.asReferences,I=>f.handleFailedRequest(m.ReferencesRequest.type,I,null)),y=f.clientOptions.middleware;return y.provideReferences?y.provideReferences(r,i,s,a,l):l(r,i,s,a)}};return[N.languages.registerReferenceProvider(e.documentSelector,t),t]}},Sd=class extends Xe{constructor(e){super(e,m.DocumentHighlightRequest.type)}fillClientCapabilities(e){B(B(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentHighlightProvider);!r||this.register({id:he.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideDocumentHighlights:(r,i,s)=>{let a=this._client,f=(y,b,C)=>a.sendRequest(m.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,b),C).then(a.protocol2CodeConverter.asDocumentHighlights,w=>a.handleFailedRequest(m.DocumentHighlightRequest.type,w,null)),l=a.clientOptions.middleware;return l.provideDocumentHighlights?l.provideDocumentHighlights(r,i,s,f):f(r,i,s)}};return[N.languages.registerDocumentHighlightProvider(e.documentSelector,t),t]}},Td=class extends Xe{constructor(e){super(e,m.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=B(B(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:ud},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:ld},t.labelSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentSymbolProvider);!r||this.register({id:he.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideDocumentSymbols:(i,s)=>{let a=this._client,f=(y,b)=>a.sendRequest(m.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(y),b).then(C=>{if(C!==null){if(C.length===0)return[];{let w=C[0];return m.DocumentSymbol.is(w)?a.protocol2CodeConverter.asDocumentSymbols(C):a.protocol2CodeConverter.asSymbolInformations(C)}}},C=>a.handleFailedRequest(m.DocumentSymbolRequest.type,C,null)),l=a.clientOptions.middleware;return l.provideDocumentSymbols?l.provideDocumentSymbols(i,s,f):f(i,s)}},r=e.label!==void 0?{label:e.label}:void 0;return[N.languages.registerDocumentSymbolProvider(e.documentSelector,t,r),t]}},Dd=class extends yd{constructor(e){super(e,m.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=B(B(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:ud},t.tagSupport={valueSet:ld}}initialize(e){!e.workspaceSymbolProvider||this.register({id:he.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(r,i)=>{let s=this._client,a=(l,y)=>s.sendRequest(m.WorkspaceSymbolRequest.type,{query:l},y).then(s.protocol2CodeConverter.asSymbolInformations,b=>s.handleFailedRequest(m.WorkspaceSymbolRequest.type,b,null)),f=s.clientOptions.middleware;return f.provideWorkspaceSymbols?f.provideWorkspaceSymbols(r,i,a):a(r,i)}};return[N.languages.registerWorkspaceSymbolProvider(t),t]}},Ed=class extends Xe{constructor(e){super(e,m.CodeActionRequest.type)}fillClientCapabilities(e){let t=B(B(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[m.CodeActionKind.Empty,m.CodeActionKind.QuickFix,m.CodeActionKind.Refactor,m.CodeActionKind.RefactorExtract,m.CodeActionKind.RefactorInline,m.CodeActionKind.RefactorRewrite,m.CodeActionKind.Source,m.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){let r=this.getRegistrationOptions(t,e.codeActionProvider);!r||this.register({id:he.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideCodeActions:(r,i,s,a)=>{let f=this._client,l=(b,C,w,T)=>{let I={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(b),range:f.code2ProtocolConverter.asRange(C),context:f.code2ProtocolConverter.asCodeActionContext(w)};return f.sendRequest(m.CodeActionRequest.type,I,T).then(L=>{if(L===null)return;let z=[];for(let F of L)m.Command.is(F)?z.push(f.protocol2CodeConverter.asCommand(F)):z.push(f.protocol2CodeConverter.asCodeAction(F));return z},L=>f.handleFailedRequest(m.CodeActionRequest.type,L,null))},y=f.clientOptions.middleware;return y.provideCodeActions?y.provideCodeActions(r,i,s,a,l):l(r,i,s,a)},resolveCodeAction:e.resolveProvider?(r,i)=>{let s=this._client,a=this._client.clientOptions.middleware,f=(l,y)=>s.sendRequest(m.CodeActionResolveRequest.type,s.code2ProtocolConverter.asCodeAction(l),y).then(s.protocol2CodeConverter.asCodeAction,b=>s.handleFailedRequest(m.CodeActionResolveRequest.type,b,l));return a.resolveCodeAction?a.resolveCodeAction(r,i,f):f(r,i)}:void 0};return[N.languages.registerCodeActionsProvider(e.documentSelector,t,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),t]}},Pd=class extends Xe{constructor(e){super(e,m.CodeLensRequest.type)}fillClientCapabilities(e){B(B(e,"textDocument"),"codeLens").dynamicRegistration=!0,B(B(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(m.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(t,e.codeLensProvider);!i||this.register({id:he.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=new N.EventEmitter,r={onDidChangeCodeLenses:t.event,provideCodeLenses:(i,s)=>{let a=this._client,f=(y,b)=>a.sendRequest(m.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(y),b).then(a.protocol2CodeConverter.asCodeLenses,C=>a.handleFailedRequest(m.CodeLensRequest.type,C,null)),l=a.clientOptions.middleware;return l.provideCodeLenses?l.provideCodeLenses(i,s,f):f(i,s)},resolveCodeLens:e.resolveProvider?(i,s)=>{let a=this._client,f=(y,b)=>a.sendRequest(m.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(y),b).then(a.protocol2CodeConverter.asCodeLens,C=>a.handleFailedRequest(m.CodeLensResolveRequest.type,C,y)),l=a.clientOptions.middleware;return l.resolveCodeLens?l.resolveCodeLens(i,s,f):f(i,s)}:void 0};return[N.languages.registerCodeLensProvider(e.documentSelector,r),{provider:r,onDidChangeCodeLensEmitter:t}]}},qd=class extends Xe{constructor(e){super(e,m.DocumentFormattingRequest.type)}fillClientCapabilities(e){B(B(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentFormattingProvider);!r||this.register({id:he.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideDocumentFormattingEdits:(r,i,s)=>{let a=this._client,f=(y,b,C)=>{let w={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(y),options:a.code2ProtocolConverter.asFormattingOptions(b,Gr.fromConfiguration(y))};return a.sendRequest(m.DocumentFormattingRequest.type,w,C).then(a.protocol2CodeConverter.asTextEdits,T=>a.handleFailedRequest(m.DocumentFormattingRequest.type,T,null))},l=a.clientOptions.middleware;return l.provideDocumentFormattingEdits?l.provideDocumentFormattingEdits(r,i,s,f):f(r,i,s)}};return[N.languages.registerDocumentFormattingEditProvider(e.documentSelector,t),t]}},kd=class extends Xe{constructor(e){super(e,m.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){B(B(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);!r||this.register({id:he.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideDocumentRangeFormattingEdits:(r,i,s,a)=>{let f=this._client,l=(b,C,w,T)=>{let I={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(b),range:f.code2ProtocolConverter.asRange(C),options:f.code2ProtocolConverter.asFormattingOptions(w,Gr.fromConfiguration(b))};return f.sendRequest(m.DocumentRangeFormattingRequest.type,I,T).then(f.protocol2CodeConverter.asTextEdits,L=>f.handleFailedRequest(m.DocumentRangeFormattingRequest.type,L,null))},y=f.clientOptions.middleware;return y.provideDocumentRangeFormattingEdits?y.provideDocumentRangeFormattingEdits(r,i,s,a,l):l(r,i,s,a)}};return[N.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,t),t]}},Od=class extends Xe{constructor(e){super(e,m.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){B(B(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);!r||this.register({id:he.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideOnTypeFormattingEdits:(i,s,a,f,l)=>{let y=this._client,b=(w,T,I,L,z)=>{let F={textDocument:y.code2ProtocolConverter.asTextDocumentIdentifier(w),position:y.code2ProtocolConverter.asPosition(T),ch:I,options:y.code2ProtocolConverter.asFormattingOptions(L,Gr.fromConfiguration(w))};return y.sendRequest(m.DocumentOnTypeFormattingRequest.type,F,z).then(y.protocol2CodeConverter.asTextEdits,k=>y.handleFailedRequest(m.DocumentOnTypeFormattingRequest.type,k,null))},C=y.clientOptions.middleware;return C.provideOnTypeFormattingEdits?C.provideOnTypeFormattingEdits(i,s,a,f,l,b):b(i,s,a,f,l)}},r=e.moreTriggerCharacter||[];return[N.languages.registerOnTypeFormattingEditProvider(e.documentSelector,t,e.firstTriggerCharacter,...r),t]}},xd=class extends Xe{constructor(e){super(e,m.RenameRequest.type)}fillClientCapabilities(e){let t=B(B(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=m.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.renameProvider);!r||(fe.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:he.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let t={provideRenameEdits:(r,i,s,a)=>{let f=this._client,l=(b,C,w,T)=>{let I={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(b),position:f.code2ProtocolConverter.asPosition(C),newName:w};return f.sendRequest(m.RenameRequest.type,I,T).then(f.protocol2CodeConverter.asWorkspaceEdit,L=>f.handleFailedRequest(m.RenameRequest.type,L,null))},y=f.clientOptions.middleware;return y.provideRenameEdits?y.provideRenameEdits(r,i,s,a,l):l(r,i,s,a)},prepareRename:e.prepareProvider?(r,i,s)=>{let a=this._client,f=(y,b,C)=>{let w={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(y),position:a.code2ProtocolConverter.asPosition(b)};return a.sendRequest(m.PrepareRenameRequest.type,w,C).then(T=>m.Range.is(T)?a.protocol2CodeConverter.asRange(T):this.isDefaultBehavior(T)?T.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):T&&m.Range.is(T.range)?{range:a.protocol2CodeConverter.asRange(T.range),placeholder:T.placeholder}:Promise.reject(new Error("The element can't be renamed.")),T=>a.handleFailedRequest(m.PrepareRenameRequest.type,T,void 0))},l=a.clientOptions.middleware;return l.prepareRename?l.prepareRename(r,i,s,f):f(r,i,s)}:void 0};return[N.languages.registerRenameProvider(e.documentSelector,t),t]}isDefaultBehavior(e){let t=e;return t&&fe.boolean(t.defaultBehavior)}},Id=class extends Xe{constructor(e){super(e,m.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=B(B(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentLinkProvider);!r||this.register({id:he.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideDocumentLinks:(r,i)=>{let s=this._client,a=(l,y)=>s.sendRequest(m.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(l),y).then(s.protocol2CodeConverter.asDocumentLinks,b=>s.handleFailedRequest(m.DocumentLinkRequest.type,b,null)),f=s.clientOptions.middleware;return f.provideDocumentLinks?f.provideDocumentLinks(r,i,a):a(r,i)},resolveDocumentLink:e.resolveProvider?(r,i)=>{let s=this._client,a=(l,y)=>s.sendRequest(m.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(l),y).then(s.protocol2CodeConverter.asDocumentLink,b=>s.handleFailedRequest(m.DocumentLinkResolveRequest.type,b,l)),f=s.clientOptions.middleware;return f.resolveDocumentLink?f.resolveDocumentLink(r,i,a):a(r,i)}:void 0};return[N.languages.registerDocumentLinkProvider(e.documentSelector,t),t]}},Fd=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return m.DidChangeConfigurationNotification.type}fillClientCapabilities(e){B(B(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register({id:he.generateUuid(),registerOptions:{section:e}})}register(e){let t=N.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let r;if(fe.string(e)?r=[e]:r=e,r!==void 0&&t!==void 0&&!r.some(f=>t.affectsConfiguration(f)))return;let i=a=>{if(a===void 0){this._client.sendNotification(m.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(m.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(a)})},s=this.getMiddleware();s?s(r,i):i(r)}extractSettingsInformation(e){function t(s,a){let f=s;for(let l=0;l<a.length-1;l++){let y=f[a[l]];y||(y=Object.create(null),f[a[l]]=y),f=y}return f}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let a=e[s],f=a.indexOf("."),l=null;if(f>=0?l=N.workspace.getConfiguration(a.substr(0,f),r).get(a.substr(f+1)):l=N.workspace.getConfiguration(void 0,r).get(a),l){let y=e[s].split(".");t(i,y)[y[y.length-1]]=Eb.toJSONObject(l)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},Ld=class{constructor(e){this._client=e,this._commands=new Map}get registrationType(){return m.ExecuteCommandRequest.type}fillClientCapabilities(e){B(B(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:he.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,r=t.clientOptions.middleware,i=(s,a)=>{let f={command:s,arguments:a};return t.sendRequest(m.ExecuteCommandRequest.type,f).then(void 0,l=>t.handleFailedRequest(m.ExecuteCommandRequest.type,l,void 0))};if(e.registerOptions.commands){let s=[];for(let a of e.registerOptions.commands)s.push(N.commands.registerCommand(a,(...f)=>r.executeCommand?r.executeCommand(a,f,i):i(a,f)));this._commands.set(e.id,s)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(r=>r.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}},Ib;(function(n){function e(t){return t&&m.MessageReader.is(t.reader)&&m.MessageWriter.is(t.writer)}n.is=e})(Ib=Ee.MessageTransports||(Ee.MessageTransports={}));var Ro=class{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},ar=class{constructor(e,t,r){var i;this._traceFormat=m.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=e,this._name=t,r=r||{};let s={isTrusted:!1};r.markdown!==void 0&&r.markdown.isTrusted===!0&&(s.isTrusted=!0),this._clientOptions={documentSelector:r.documentSelector||[],synchronize:r.synchronize||{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName||this._name,revealOutputChannelOn:r.revealOutputChannelOn||zr.Error,stdioEncoding:r.stdioEncoding||"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler||this.createDefaultErrorHandler((i=r.connectionOptions)===null||i===void 0?void 0:i.maxRestartCount),middleware:r.middleware||{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:s},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=ye.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new od.Delayer(250),this._onReady=new Promise((a,f)=>{this._onReadyCallbacks=new Ro(a,f)}),this._onStop=void 0,this._telemetryEmitter=new m.Emitter,this._stateChangeEmitter=new m.Emitter,this._trace=m.Trace.Off,this._tracer={log:(a,f)=>{fe.string(a)?this.logTrace(a,f):this.logObjectTrace(a)}},this._c2p=Pb.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=qb.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let r=this.getPublicState();r!==t&&this._stateChangeEmitter.fire({oldState:t,newState:r})}getPublicState(){return this.state===ye.Running?xi.Running:this.state===ye.Starting?xi.Starting:xi.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(r){throw this.error(`Sending request ${fe.string(e)?e:e.method} failed.`,r),r}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onRequest(e,t)}catch(r){throw this.error(`Registering request handler ${fe.string(e)?e:e.method} failed.`,r),r}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(r){throw this.error(`Sending notification ${fe.string(e)?e:e.method} failed.`,r),r}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onNotification(e,t)}catch(r){throw this.error(`Registering notification handler ${fe.string(e)?e:e.method} failed.`,r),r}}onProgress(e,t,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{if(m.WorkDoneProgress.is(e)){let i=this._clientOptions.middleware.handleWorkDoneProgress;if(i!==void 0)return this._resolvedConnection.onProgress(e,t,s=>{i(t,s,()=>r(s))})}return this._resolvedConnection.onProgress(e,t,r)}catch(i){throw this.error(`Registering progress handler for token ${t} failed.`,i),i}}sendProgress(e,t,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,t,r)}catch(i){throw this.error(`Sending progress for token ${t} failed.`,i),i}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=N.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new cd(this._name,e??4)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(t=>{t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(e){if(e instanceof m.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?fe.string(e.stack)?e.stack:e.message:fe.string(e)?e:e.toString()}info(e,t,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),r&&this._clientOptions.revealOutputChannelOn<=zr.Info&&this.showNotificationMessage()}warn(e,t,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),r&&this._clientOptions.revealOutputChannelOn<=zr.Warn&&this.showNotificationMessage()}error(e,t,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),r&&this._clientOptions.revealOutputChannelOn<=zr.Error&&this.showNotificationMessage()}showNotificationMessage(){N.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===ye.Initial||this.state===ye.Stopping||this.state===ye.Stopped}needsStop(){return this.state===ye.Starting||this.state===ye.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===ye.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new Ro(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?N.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):N.languages.createDiagnosticCollection()),this.state=ye.Starting,this.resolveConnection().then(e=>(e.onLogMessage(t=>{switch(t.type){case m.MessageType.Error:this.error(t.message,void 0,!1);break;case m.MessageType.Warning:this.warn(t.message,void 0,!1);break;case m.MessageType.Info:this.info(t.message,void 0,!1);break;default:this.outputChannel.appendLine(t.message)}}),e.onShowMessage(t=>{switch(t.type){case m.MessageType.Error:N.window.showErrorMessage(t.message);break;case m.MessageType.Warning:N.window.showWarningMessage(t.message);break;case m.MessageType.Info:N.window.showInformationMessage(t.message);break;default:N.window.showInformationMessage(t.message)}}),e.onRequest(m.ShowMessageRequest.type,t=>{let r;switch(t.type){case m.MessageType.Error:r=N.window.showErrorMessage;break;case m.MessageType.Warning:r=N.window.showWarningMessage;break;case m.MessageType.Info:r=N.window.showInformationMessage;break;default:r=N.window.showInformationMessage}let i=t.actions||[];return r(t.message,...i)}),e.onTelemetry(t=>{this._telemetryEmitter.fire(t)}),e.onRequest(m.ShowDocumentRequest.type,async t=>{var r;let i=async a=>{let f=this.protocol2CodeConverter.asUri(a.uri);try{if(a.external===!0)return{success:await N.env.openExternal(f)};{let l={};return a.selection!==void 0&&(l.selection=this.protocol2CodeConverter.asRange(a.selection)),a.takeFocus===void 0||a.takeFocus===!1?l.preserveFocus=!0:a.takeFocus===!0&&(l.preserveFocus=!1),await N.window.showTextDocument(f,l),{success:!0}}}catch{return{success:!0}}},s=(r=this._clientOptions.middleware.window)===null||r===void 0?void 0:r.showDocument;return s!==void 0?s(t,i):i(t)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=ye.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),N.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new N.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,r=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),i={processId:null,clientInfo:{name:N.env.appName,version:N.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(N.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:fe.func(t)?t():t,trace:m.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(i),this._clientOptions.progressOnInitialization){let s=he.generateUuid(),a=new kb.ProgressPart(e,s);return i.workDoneToken=s,this.doInitialize(e,i).then(f=>(a.done(),f),f=>{throw a.cancel(),f})}else return this.doInitialize(e,i)}doInitialize(e,t){return e.initialize(t).then(r=>{this._resolvedConnection=e,this._initializeResult=r,this.state=ye.Running;let i;return fe.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===m.TextDocumentSyncKind.None?i={openClose:!1,change:m.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(s=>this.handleDiagnostics(s)),e.onRequest(m.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(m.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(m.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s)),e.sendNotification(m.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),r}).then(void 0,r=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r)):r instanceof m.ResponseError&&r.data&&r.data.retry?N.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r))}):(r&&r.message&&N.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop(),this._onReadyCallbacks.reject(r)),r})}_clientGetRootPath(){let e=N.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===ye.Stopping&&this._onStop?this._onStop:(this.state=ye.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.end(),e.dispose(),this.state=ye.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=ye.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach(r=>r.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(r=>r.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let r of this._features.values())r.dispose();e&&this.cleanUpChannel(),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var t;let r=this;function i(a){r._fileEvents.push(a),r._fileEventDelayer.trigger(()=>{r.onReady().then(()=>{r.resolveConnection().then(f=>{r.isConnectionActive()&&(r.forceDocumentSync(),f.didChangeWatchedFiles({changes:r._fileEvents})),r._fileEvents=[]})},f=>{r.error("Notify file events failed.",f)})})}let s=(t=this.clientOptions.middleware)===null||t===void 0?void 0:t.workspace;(s==null?void 0:s.didChangeWatchedFile)?s.didChangeWatchedFile(e,i):i(e)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(m.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),r=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(t,r,(s,a)=>this.setDiagnostics(s,a)):this.setDiagnostics(t,r)}setDiagnostics(e,t){!this._diagnostics||this._diagnostics.set(e,t)}createConnection(){let e=(r,i,s)=>{this.handleConnectionError(r,i,s)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(r=>Ob(r.reader,r.writer,e,t,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===ye.Stopping||this.state===ye.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=jn.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===jn.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===ye.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=ye.StartFailed):this.state=ye.Stopped,this.cleanUp(!1,!0)):e===jn.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=ye.Initial,this.start())}handleConnectionError(e,t,r){this._clientOptions.errorHandler.error(e,t,r)===Oi.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){N.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let r=N.workspace.getConfiguration(this._id),i=m.Trace.Off,s=m.TraceFormat.Text;if(r){let a=r.get("trace.server","off");typeof a=="string"?i=m.Trace.fromString(a):(i=m.Trace.fromString(r.get("trace.server.verbosity","off")),s=m.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;fe.array(t)?r=t:r=[t],!!r&&this._dynamicFeatures.get(m.DidChangeWatchedFilesNotification.type.method).registerRaw(he.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),yo.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Fd(this)),this.registerFeature(new dd(this,this._syncedDocuments)),this.registerFeature(new hd(this)),this.registerFeature(new pd(this)),this.registerFeature(new gd(this)),this.registerFeature(new md(this)),this.registerFeature(new fd(this,this._syncedDocuments)),this.registerFeature(new vd(this,e=>this.notifyFileEvent(e))),this.registerFeature(new Rd(this)),this.registerFeature(new bd(this)),this.registerFeature(new _d(this)),this.registerFeature(new Cd(this)),this.registerFeature(new wd(this)),this.registerFeature(new Sd(this)),this.registerFeature(new Td(this)),this.registerFeature(new Dd(this)),this.registerFeature(new Ed(this)),this.registerFeature(new Pd(this)),this.registerFeature(new qd(this)),this.registerFeature(new kd(this)),this.registerFeature(new Od(this)),this.registerFeature(new xd(this)),this.registerFeature(new Id(this)),this.registerFeature(new Ld(this))}fillInitializeParams(e){for(let t of this._features)fe.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};B(e,"workspace").applyEdit=!0;let t=B(B(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[m.ResourceOperationKind.Create,m.ResourceOperationKind.Rename,m.ResourceOperationKind.Delete],t.failureHandling=m.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=B(B(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[m.DiagnosticTag.Unnecessary,m.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=B(e,"window"),s=B(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let a=B(i,"showDocument");a.support=!0;let f=B(e,"general");f.regularExpressions={engine:"ECMAScript",version:"ES2020"},f.markdown={parser:"marked",version:"1.1.0"};for(let l of this._features)l.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)r.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,r)=>{for(let i of e.registrations){let s=this._dynamicFeatures.get(i.method);if(s===void 0){r(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let a=i.registerOptions||{};a.documentSelector=a.documentSelector||this._clientOptions.documentSelector;let f={id:i.id,registerOptions:a};try{s.register(f)}catch(l){r(l);return}}t()})}handleUnregistrationRequest(e){return new Promise((t,r)=>{for(let i of e.unregisterations){let s=this._dynamicFeatures.get(i.method);if(!s){r(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}s.unregister(i.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,r=new Map;N.workspace.textDocuments.forEach(s=>r.set(s.uri.toString(),s));let i=!1;if(t.documentChanges){for(let s of t.documentChanges)if(m.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let a=r.get(s.textDocument.uri);if(a&&a.version!==s.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):fe.asPromise(N.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(s=>({applied:s})))}handleFailedRequest(e,t,r){if(t instanceof m.ResponseError){if(t.code===m.LSPErrorCodes.RequestCancelled)throw this.makeCancelError();if(t.code===m.LSPErrorCodes.ContentModified)return r}throw this.error(`Request ${e.method} failed.`,t),t}makeCancelError(){let e=new Error(ar.Canceled);return e.name=ar.Canceled,e}};Ee.BaseLanguageClient=ar;ar.Canceled="Canceled"});var Md=D(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.ColorProviderFeature=void 0;var Ii=require("vscode"),Vr=be(),Fb=lt();function Nd(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var Ad=class extends Fb.TextDocumentFeature{constructor(e){super(e,Vr.DocumentColorRequest.type)}fillClientCapabilities(e){Nd(Nd(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t={provideColorPresentations:(r,i,s)=>{let a=this._client,f=(y,b,C)=>{let w={color:y,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(b.document),range:a.code2ProtocolConverter.asRange(b.range)};return a.sendRequest(Vr.ColorPresentationRequest.type,w,C).then(this.asColorPresentations.bind(this),T=>a.handleFailedRequest(Vr.ColorPresentationRequest.type,T,null))},l=a.clientOptions.middleware;return l.provideColorPresentations?l.provideColorPresentations(r,i,s,f):f(r,i,s)},provideDocumentColors:(r,i)=>{let s=this._client,a=(l,y)=>{let b={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(l)};return s.sendRequest(Vr.DocumentColorRequest.type,b,y).then(this.asColorInformations.bind(this),C=>s.handleFailedRequest(Vr.ColorPresentationRequest.type,C,null))},f=s.clientOptions.middleware;return f.provideDocumentColors?f.provideDocumentColors(r,i,a):a(r,i)}};return[Ii.languages.registerColorProvider(e.documentSelector,t),t]}asColor(e){return new Ii.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(t=>new Ii.ColorInformation(this._client.protocol2CodeConverter.asRange(t.range),this.asColor(t.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(t=>{let r=new Ii.ColorPresentation(t.label);return r.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(t.additionalTextEdits),r.textEdit=this._client.protocol2CodeConverter.asTextEdit(t.textEdit),r}):[]}};Fi.ColorProviderFeature=Ad});var Hd=D(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.ImplementationFeature=void 0;var Lb=require("vscode"),bo=be(),Nb=lt();function jd(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var $d=class extends Nb.TextDocumentFeature{constructor(e){super(e,bo.ImplementationRequest.type)}fillClientCapabilities(e){let t=jd(jd(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t={provideImplementation:(r,i,s)=>{let a=this._client,f=(y,b,C)=>a.sendRequest(bo.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,b),C).then(a.protocol2CodeConverter.asDefinitionResult,w=>a.handleFailedRequest(bo.ImplementationRequest.type,w,null)),l=a.clientOptions.middleware;return l.provideImplementation?l.provideImplementation(r,i,s,f):f(r,i,s)}};return[Lb.languages.registerImplementationProvider(e.documentSelector,t),t]}};Li.ImplementationFeature=$d});var Bd=D(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.TypeDefinitionFeature=void 0;var Ab=require("vscode"),_o=be(),Mb=lt();function Ni(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var Wd=class extends Mb.TextDocumentFeature{constructor(e){super(e,_o.TypeDefinitionRequest.type)}fillClientCapabilities(e){Ni(Ni(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=Ni(Ni(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t={provideTypeDefinition:(r,i,s)=>{let a=this._client,f=(y,b,C)=>a.sendRequest(_o.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,b),C).then(a.protocol2CodeConverter.asDefinitionResult,w=>a.handleFailedRequest(_o.TypeDefinitionRequest.type,w,null)),l=a.clientOptions.middleware;return l.provideTypeDefinition?l.provideTypeDefinition(r,i,s,f):f(r,i,s)}};return[Ab.languages.registerTypeDefinitionProvider(e.documentSelector,t),t]}};Ai.TypeDefinitionFeature=Wd});var Ud=D(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.WorkspaceFoldersFeature=cr.arrayDiff=void 0;var jb=qi(),Mi=require("vscode"),Co=be();function wo(n,e){if(n!==void 0)return n[e]}function So(n,e){return n.filter(t=>e.indexOf(t)<0)}cr.arrayDiff=So;var Kd=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return Co.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=Mi.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(Co.WorkspaceFoldersRequest.type,s=>{let a=()=>{let l=Mi.workspace.workspaceFolders;return l===void 0?null:l.map(b=>this.asProtocol(b))},f=t.clientOptions.middleware.workspace;return f&&f.workspaceFolders?f.workspaceFolders(s,a):a(s)});let r=wo(wo(wo(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=jb.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let t=So(this._initialFolders,e),r=So(e,this._initialFolders);(r.length>0||t.length>0)&&this.doSendEvent(r,t)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,t){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:t.map(i=>this.asProtocol(i))}};this._client.sendNotification(Co.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=Mi.workspace.onDidChangeWorkspaceFolders(s=>{let a=l=>{this.doSendEvent(l.added,l.removed)},f=r.clientOptions.middleware.workspace;f&&f.didChangeWorkspaceFolders?f.didChangeWorkspaceFolders(s,a):a(s)});this._listeners.set(t,i),this.sendInitialEvent(Mi.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};cr.WorkspaceFoldersFeature=Kd});var Gd=D(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.FoldingRangeFeature=void 0;var Xr=require("vscode"),ur=be(),$b=lt();function zd(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var Jr=class extends $b.TextDocumentFeature{constructor(e){super(e,ur.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=zd(zd(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t={provideFoldingRanges:(r,i,s)=>{let a=this._client,f=(y,b,C)=>{let w={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(y)};return a.sendRequest(ur.FoldingRangeRequest.type,w,C).then(Jr.asFoldingRanges,T=>a.handleFailedRequest(ur.FoldingRangeRequest.type,T,null))},l=a.clientOptions.middleware;return l.provideFoldingRanges?l.provideFoldingRanges(r,i,s,f):f(r,i,s)}};return[Xr.languages.registerFoldingRangeProvider(e.documentSelector,t),t]}static asFoldingRangeKind(e){if(e)switch(e){case ur.FoldingRangeKind.Comment:return Xr.FoldingRangeKind.Comment;case ur.FoldingRangeKind.Imports:return Xr.FoldingRangeKind.Imports;case ur.FoldingRangeKind.Region:return Xr.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(t=>new Xr.FoldingRange(t.startLine,t.endLine,Jr.asFoldingRangeKind(t.kind))):[]}};ji.FoldingRangeFeature=Jr});var Jd=D($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});$i.DeclarationFeature=void 0;var Hb=require("vscode"),To=be(),Wb=lt();function Vd(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var Xd=class extends Wb.TextDocumentFeature{constructor(e){super(e,To.DeclarationRequest.type)}fillClientCapabilities(e){let t=Vd(Vd(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t={provideDeclaration:(r,i,s)=>{let a=this._client,f=(y,b,C)=>a.sendRequest(To.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,b),C).then(a.protocol2CodeConverter.asDeclarationResult,w=>a.handleFailedRequest(To.DeclarationRequest.type,w,null)),l=a.clientOptions.middleware;return l.provideDeclaration?l.provideDeclaration(r,i,s,f):f(r,i,s)}};return[Hb.languages.registerDeclarationProvider(e.documentSelector,t),t]}};$i.DeclarationFeature=Xd});var Zd=D(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.SelectionRangeFeature=void 0;var Bb=require("vscode"),Do=be(),Kb=lt();function Qd(n,e){return n[e]===void 0&&(n[e]=Object.create(null)),n[e]}var Yd=class extends Kb.TextDocumentFeature{constructor(e){super(e,Do.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=Qd(Qd(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t={provideSelectionRanges:(r,i,s)=>{let a=this._client,f=(y,b,C)=>{let w={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(y),positions:a.code2ProtocolConverter.asPositions(b)};return a.sendRequest(Do.SelectionRangeRequest.type,w,C).then(T=>a.protocol2CodeConverter.asSelectionRanges(T),T=>a.handleFailedRequest(Do.SelectionRangeRequest.type,T,null))},l=a.clientOptions.middleware;return l.provideSelectionRanges?l.provideSelectionRanges(r,i,s,f):f(r,i,s)}};return[Bb.languages.registerSelectionRangeProvider(e.documentSelector,t),t]}};Hi.SelectionRangeFeature=Yd});var tf=D(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.ProgressFeature=void 0;var Ub=be(),zb=vo();function Gb(n,e){return n[e]===void 0&&(n[e]=Object.create(null)),n[e]}var ef=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){Gb(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new zb.ProgressPart(this._client,i.token,t))};e.onRequest(Ub.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Wi.ProgressFeature=ef});var of=D(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.CallHierarchyFeature=void 0;var Vb=require("vscode"),$n=be(),Xb=lt();function nf(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var rf=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,t,r){let i=this.client,s=this.middleware,a=(f,l,y)=>{let b=i.code2ProtocolConverter.asTextDocumentPositionParams(f,l);return i.sendRequest($n.CallHierarchyPrepareRequest.type,b,y).then(C=>i.protocol2CodeConverter.asCallHierarchyItems(C),C=>i.handleFailedRequest($n.CallHierarchyPrepareRequest.type,C,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,t,r,a):a(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,s=(a,f)=>{let l={item:r.code2ProtocolConverter.asCallHierarchyItem(a)};return r.sendRequest($n.CallHierarchyIncomingCallsRequest.type,l,f).then(y=>r.protocol2CodeConverter.asCallHierarchyIncomingCalls(y),y=>r.handleFailedRequest($n.CallHierarchyIncomingCallsRequest.type,y,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,s):s(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,s=(a,f)=>{let l={item:r.code2ProtocolConverter.asCallHierarchyItem(a)};return r.sendRequest($n.CallHierarchyOutgoingCallsRequest.type,l,f).then(y=>r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(y),y=>r.handleFailedRequest($n.CallHierarchyOutgoingCallsRequest.type,y,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,s):s(e,t)}},sf=class extends Xb.TextDocumentFeature{constructor(e){super(e,$n.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=nf(nf(e,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new rf(t);return[Vb.languages.registerCallHierarchyProvider(e.documentSelector,r),r]}};Bi.CallHierarchyFeature=sf});var cf=D(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.SemanticTokensFeature=void 0;var Ki=require("vscode"),Jb=lt(),Z=be(),Qb=hn();function Ui(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var af=class extends Jb.TextDocumentFeature{constructor(e){super(e,Z.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=Ui(Ui(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[Z.SemanticTokenTypes.namespace,Z.SemanticTokenTypes.type,Z.SemanticTokenTypes.class,Z.SemanticTokenTypes.enum,Z.SemanticTokenTypes.interface,Z.SemanticTokenTypes.struct,Z.SemanticTokenTypes.typeParameter,Z.SemanticTokenTypes.parameter,Z.SemanticTokenTypes.variable,Z.SemanticTokenTypes.property,Z.SemanticTokenTypes.enumMember,Z.SemanticTokenTypes.event,Z.SemanticTokenTypes.function,Z.SemanticTokenTypes.method,Z.SemanticTokenTypes.macro,Z.SemanticTokenTypes.keyword,Z.SemanticTokenTypes.modifier,Z.SemanticTokenTypes.comment,Z.SemanticTokenTypes.string,Z.SemanticTokenTypes.number,Z.SemanticTokenTypes.regexp,Z.SemanticTokenTypes.operator],t.tokenModifiers=[Z.SemanticTokenModifiers.declaration,Z.SemanticTokenModifiers.definition,Z.SemanticTokenModifiers.readonly,Z.SemanticTokenModifiers.static,Z.SemanticTokenModifiers.deprecated,Z.SemanticTokenModifiers.abstract,Z.SemanticTokenModifiers.async,Z.SemanticTokenModifiers.modification,Z.SemanticTokenModifiers.documentation,Z.SemanticTokenModifiers.defaultLibrary],t.formats=[Z.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,Ui(Ui(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Z.SemanticTokensRefreshRequest.type,async()=>{for(let a of this.getAllProviders())a.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(t,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let t=Qb.boolean(e.full)?e.full:e.full!==void 0,r=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,i=new Ki.EventEmitter,s=t?{onDidChangeSemanticTokens:i.event,provideDocumentSemanticTokens:(C,w)=>{let T=this._client,I=T.clientOptions.middleware,L=(z,F)=>{let k={textDocument:T.code2ProtocolConverter.asTextDocumentIdentifier(z)};return T.sendRequest(Z.SemanticTokensRequest.type,k,F).then(x=>T.protocol2CodeConverter.asSemanticTokens(x),x=>T.handleFailedRequest(Z.SemanticTokensRequest.type,x,null))};return I.provideDocumentSemanticTokens?I.provideDocumentSemanticTokens(C,w,L):L(C,w)},provideDocumentSemanticTokensEdits:r?(C,w,T)=>{let I=this._client,L=I.clientOptions.middleware,z=(F,k,x)=>{let q={textDocument:I.code2ProtocolConverter.asTextDocumentIdentifier(F),previousResultId:k};return I.sendRequest(Z.SemanticTokensDeltaRequest.type,q,x).then(V=>Z.SemanticTokens.is(V)?I.protocol2CodeConverter.asSemanticTokens(V):I.protocol2CodeConverter.asSemanticTokensEdits(V),V=>I.handleFailedRequest(Z.SemanticTokensDeltaRequest.type,V,null))};return L.provideDocumentSemanticTokensEdits?L.provideDocumentSemanticTokensEdits(C,w,T,z):z(C,w,T)}:void 0}:void 0,f=e.range===!0?{provideDocumentRangeSemanticTokens:(C,w,T)=>{let I=this._client,L=I.clientOptions.middleware,z=(F,k,x)=>{let q={textDocument:I.code2ProtocolConverter.asTextDocumentIdentifier(F),range:I.code2ProtocolConverter.asRange(k)};return I.sendRequest(Z.SemanticTokensRangeRequest.type,q,x).then(V=>I.protocol2CodeConverter.asSemanticTokens(V),V=>I.handleFailedRequest(Z.SemanticTokensRangeRequest.type,V,null))};return L.provideDocumentRangeSemanticTokens?L.provideDocumentRangeSemanticTokens(C,w,T,z):z(C,w,T)}}:void 0,l=[],b=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend);return s!==void 0&&l.push(Ki.languages.registerDocumentSemanticTokensProvider(e.documentSelector,s,b)),f!==void 0&&l.push(Ki.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,f,b)),[new Ki.Disposable(()=>l.forEach(C=>C.dispose())),{range:f,full:s,onDidChangeSemanticTokensEmitter:i}]}};zi.SemanticTokensFeature=af});var lf=D((PS,uf)=>{uf.exports=function(n,e){for(var t=[],r=0;r<n.length;r++){var i=e(n[r],r);Yb(i)?t.push.apply(t,i):t.push(i)}return t};var Yb=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"}});var gf=D((qS,pf)=>{"use strict";pf.exports=df;function df(n,e,t){n instanceof RegExp&&(n=ff(n,t)),e instanceof RegExp&&(e=ff(e,t));var r=hf(n,e,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+n.length,r[1]),post:t.slice(r[1]+e.length)}}function ff(n,e){var t=e.match(n);return t?t[0]:null}df.range=hf;function hf(n,e,t){var r,i,s,a,f,l=t.indexOf(n),y=t.indexOf(e,l+1),b=l;if(l>=0&&y>0){if(n===e)return[l,y];for(r=[],s=t.length;b>=0&&!f;)b==l?(r.push(b),l=t.indexOf(n,b+1)):r.length==1?f=[r.pop(),y]:(i=r.pop(),i<s&&(s=i,a=y),y=t.indexOf(e,b+1)),b=l<y&&l>=0?l:y;r.length&&(f=[s,a])}return f}});var wf=D((kS,Cf)=>{var Zb=lf(),mf=gf();Cf.exports=n_;var vf="\0SLASH"+Math.random()+"\0",yf="\0OPEN"+Math.random()+"\0",Eo="\0CLOSE"+Math.random()+"\0",Rf="\0COMMA"+Math.random()+"\0",bf="\0PERIOD"+Math.random()+"\0";function Po(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function e_(n){return n.split("\\\\").join(vf).split("\\{").join(yf).split("\\}").join(Eo).split("\\,").join(Rf).split("\\.").join(bf)}function t_(n){return n.split(vf).join("\\").split(yf).join("{").split(Eo).join("}").split(Rf).join(",").split(bf).join(".")}function _f(n){if(!n)return[""];var e=[],t=mf("{","}",n);if(!t)return n.split(",");var r=t.pre,i=t.body,s=t.post,a=r.split(",");a[a.length-1]+="{"+i+"}";var f=_f(s);return s.length&&(a[a.length-1]+=f.shift(),a.push.apply(a,f)),e.push.apply(e,a),e}function n_(n){return n?(n.substr(0,2)==="{}"&&(n="\\{\\}"+n.substr(2)),lr(e_(n),!0).map(t_)):[]}function r_(n){return"{"+n+"}"}function i_(n){return/^-?0\d/.test(n)}function s_(n,e){return n<=e}function o_(n,e){return n>=e}function lr(n,e){var t=[],r=mf("{","}",n);if(!r||/\$$/.test(r.pre))return[n];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),a=i||s,f=r.body.indexOf(",")>=0;if(!a&&!f)return r.post.match(/,.*\}/)?(n=r.pre+"{"+r.body+Eo+r.post,lr(n)):[n];var l;if(a)l=r.body.split(/\.\./);else if(l=_f(r.body),l.length===1&&(l=lr(l[0],!1).map(r_),l.length===1)){var b=r.post.length?lr(r.post,!1):[""];return b.map(function(Ae){return r.pre+l[0]+Ae})}var y=r.pre,b=r.post.length?lr(r.post,!1):[""],C;if(a){var w=Po(l[0]),T=Po(l[1]),I=Math.max(l[0].length,l[1].length),L=l.length==3?Math.abs(Po(l[2])):1,z=s_,F=T<w;F&&(L*=-1,z=o_);var k=l.some(i_);C=[];for(var x=w;z(x,T);x+=L){var q;if(s)q=String.fromCharCode(x),q==="\\"&&(q="");else if(q=String(x),k){var V=I-q.length;if(V>0){var Pe=new Array(V+1).join("0");x<0?q="-"+Pe+q.slice(1):q=Pe+q}}C.push(q)}}else C=Zb(l,function(Ne){return lr(Ne,!1)});for(var Ie=0;Ie<C.length;Ie++)for(var Fe=0;Fe<b.length;Fe++){var _e=y+C[Ie]+b[Fe];(!e||a||_e)&&t.push(_e)}return t}});var kf=D((OS,qf)=>{qf.exports=Tt;Tt.Minimatch=We;var Qr={sep:"/"};try{Qr=require("path")}catch{}var qo=Tt.GLOBSTAR=We.GLOBSTAR={},a_=wf(),Sf={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},ko="[^/]",Oo=ko+"*?",c_="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",u_="(?:(?!(?:\\/|^)\\.).)*?",Tf=l_("().*{}+?[]^$\\!");function l_(n){return n.split("").reduce(function(e,t){return e[t]=!0,e},{})}var Df=/\/+/;Tt.filter=d_;function d_(n,e){return e=e||{},function(t,r,i){return Tt(t,n,e)}}function Ef(n,e){n=n||{},e=e||{};var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),Object.keys(n).forEach(function(r){t[r]=n[r]}),t}Tt.defaults=function(n){if(!n||!Object.keys(n).length)return Tt;var e=Tt,t=function(i,s,a){return e.minimatch(i,s,Ef(n,a))};return t.Minimatch=function(i,s){return new e.Minimatch(i,Ef(n,s))},t};We.defaults=function(n){return!n||!Object.keys(n).length?We:Tt.defaults(n).Minimatch};function Tt(n,e,t){if(typeof e!="string")throw new TypeError("glob pattern string required");return t||(t={}),!t.nocomment&&e.charAt(0)==="#"?!1:e.trim()===""?n==="":new We(e,t).match(n)}function We(n,e){if(!(this instanceof We))return new We(n,e);if(typeof n!="string")throw new TypeError("glob pattern string required");e||(e={}),n=n.trim(),Qr.sep!=="/"&&(n=n.split(Qr.sep).join("/")),this.options=e,this.set=[],this.pattern=n,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}We.prototype.debug=function(){};We.prototype.make=f_;function f_(){if(!this._made){var n=this.pattern,e=this.options;if(!e.nocomment&&n.charAt(0)==="#"){this.comment=!0;return}if(!n){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,t),t=this.globParts=t.map(function(r){return r.split(Df)}),this.debug(this.pattern,t),t=t.map(function(r,i,s){return r.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}}We.prototype.parseNegate=h_;function h_(){var n=this.pattern,e=!1,t=this.options,r=0;if(!t.nonegate){for(var i=0,s=n.length;i<s&&n.charAt(i)==="!";i++)e=!e,r++;r&&(this.pattern=n.substr(r)),this.negate=e}}Tt.braceExpand=function(n,e){return Pf(n,e)};We.prototype.braceExpand=Pf;function Pf(n,e){if(e||(this instanceof We?e=this.options:e={}),n=typeof n=="undefined"?this.pattern:n,typeof n=="undefined")throw new TypeError("undefined pattern");return e.nobrace||!n.match(/\{.*\}/)?[n]:a_(n)}We.prototype.parse=p_;var Gi={};function p_(n,e){if(n.length>1024*64)throw new TypeError("pattern is too long");var t=this.options;if(!t.noglobstar&&n==="**")return qo;if(n==="")return"";var r="",i=!!t.nocase,s=!1,a=[],f=[],l,y=!1,b=-1,C=-1,w=n.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",T=this;function I(){if(l){switch(l){case"*":r+=Oo,i=!0;break;case"?":r+=ko,i=!0;break;default:r+="\\"+l;break}T.debug("clearStateChar %j %j",l,r),l=!1}}for(var L=0,z=n.length,F;L<z&&(F=n.charAt(L));L++){if(this.debug("%s	%s %s %j",n,L,r,F),s&&Tf[F]){r+="\\"+F,s=!1;continue}switch(F){case"/":return!1;case"\\":I(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",n,L,r,F),y){this.debug("  in class"),F==="!"&&L===C+1&&(F="^"),r+=F;continue}T.debug("call clearStateChar %j",l),I(),l=F,t.noext&&I();continue;case"(":if(y){r+="(";continue}if(!l){r+="\\(";continue}a.push({type:l,start:L-1,reStart:r.length,open:Sf[l].open,close:Sf[l].close}),r+=l==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",l,r),l=!1;continue;case")":if(y||!a.length){r+="\\)";continue}I(),i=!0;var k=a.pop();r+=k.close,k.type==="!"&&f.push(k),k.reEnd=r.length;continue;case"|":if(y||!a.length||s){r+="\\|",s=!1;continue}I(),r+="|";continue;case"[":if(I(),y){r+="\\"+F;continue}y=!0,C=L,b=r.length,r+=F;continue;case"]":if(L===C+1||!y){r+="\\"+F,s=!1;continue}if(y){var x=n.substring(C+1,L);try{RegExp("["+x+"]")}catch{var q=this.parse(x,Gi);r=r.substr(0,b)+"\\["+q[0]+"\\]",i=i||q[1],y=!1;continue}}i=!0,y=!1,r+=F;continue;default:I(),s?s=!1:Tf[F]&&!(F==="^"&&y)&&(r+="\\"),r+=F}}for(y&&(x=n.substr(C+1),q=this.parse(x,Gi),r=r.substr(0,b)+"\\["+q[0],i=i||q[1]),k=a.pop();k;k=a.pop()){var V=r.slice(k.reStart+k.open.length);this.debug("setting tail",r,k),V=V.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(ut,pt,Et){return Et||(Et="\\"),pt+pt+Et+"|"}),this.debug(`tail=%j
   %s`,V,V,k,r);var Pe=k.type==="*"?Oo:k.type==="?"?ko:"\\"+k.type;i=!0,r=r.slice(0,k.reStart)+Pe+"\\("+V}I(),s&&(r+="\\\\");var Ie=!1;switch(r.charAt(0)){case".":case"[":case"(":Ie=!0}for(var Fe=f.length-1;Fe>-1;Fe--){var _e=f[Fe],Ne=r.slice(0,_e.reStart),Ae=r.slice(_e.reStart,_e.reEnd-8),it=r.slice(_e.reEnd-8,_e.reEnd),Qe=r.slice(_e.reEnd);it+=Qe;var st=Ne.split("(").length-1,Ye=Qe;for(L=0;L<st;L++)Ye=Ye.replace(/\)[+*?]?/,"");Qe=Ye;var ht="";Qe===""&&e!==Gi&&(ht="$");var pe=Ne+Ae+Qe+ht+it;r=pe}if(r!==""&&i&&(r="(?=.)"+r),Ie&&(r=w+r),e===Gi)return[r,i];if(!i)return v_(n);var Dt=t.nocase?"i":"";try{var Le=new RegExp("^"+r+"$",Dt)}catch{return new RegExp("$.")}return Le._glob=n,Le._src=r,Le}Tt.makeRe=function(n,e){return new We(n,e||{}).makeRe()};We.prototype.makeRe=g_;function g_(){if(this.regexp||this.regexp===!1)return this.regexp;var n=this.set;if(!n.length)return this.regexp=!1,this.regexp;var e=this.options,t=e.noglobstar?Oo:e.dot?c_:u_,r=e.nocase?"i":"",i=n.map(function(s){return s.map(function(a){return a===qo?t:typeof a=="string"?y_(a):a._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}Tt.match=function(n,e,t){t=t||{};var r=new We(e,t);return n=n.filter(function(i){return r.match(i)}),r.options.nonull&&!n.length&&n.push(e),n};We.prototype.match=m_;function m_(n,e){if(this.debug("match",n,this.pattern),this.comment)return!1;if(this.empty)return n==="";if(n==="/"&&e)return!0;var t=this.options;Qr.sep!=="/"&&(n=n.split(Qr.sep).join("/")),n=n.split(Df),this.debug(this.pattern,"split",n);var r=this.set;this.debug(this.pattern,"set",r);var i,s;for(s=n.length-1;s>=0&&(i=n[s],!i);s--);for(s=0;s<r.length;s++){var a=r[s],f=n;t.matchBase&&a.length===1&&(f=[i]);var l=this.matchOne(f,a,e);if(l)return t.flipNegate?!0:!this.negate}return t.flipNegate?!1:this.negate}We.prototype.matchOne=function(n,e,t){var r=this.options;this.debug("matchOne",{this:this,file:n,pattern:e}),this.debug("matchOne",n.length,e.length);for(var i=0,s=0,a=n.length,f=e.length;i<a&&s<f;i++,s++){this.debug("matchOne loop");var l=e[s],y=n[i];if(this.debug(e,l,y),l===!1)return!1;if(l===qo){this.debug("GLOBSTAR",[e,l,y]);var b=i,C=s+1;if(C===f){for(this.debug("** at the end");i<a;i++)if(n[i]==="."||n[i]===".."||!r.dot&&n[i].charAt(0)===".")return!1;return!0}for(;b<a;){var w=n[b];if(this.debug(`
globstar while`,n,b,e,C,w),this.matchOne(n.slice(b),e.slice(C),t))return this.debug("globstar found match!",b,a,w),!0;if(w==="."||w===".."||!r.dot&&w.charAt(0)==="."){this.debug("dot detected!",n,b,e,C);break}this.debug("globstar swallow a segment, and continue"),b++}return!!(t&&(this.debug(`
>>> no match, partial?`,n,b,e,C),b===a))}var T;if(typeof l=="string"?(r.nocase?T=y.toLowerCase()===l.toLowerCase():T=y===l,this.debug("string match",l,y,T)):(T=y.match(l),this.debug("pattern match",l,y,T)),!T)return!1}if(i===a&&s===f)return!0;if(i===a)return t;if(s===f){var I=i===a-1&&n[i]==="";return I}throw new Error("wtf?")};function v_(n){return n.replace(/\\(.)/g,"$1")}function y_(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var jf=D(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.WillDeleteFilesFeature=ct.WillRenameFilesFeature=ct.WillCreateFilesFeature=ct.DidDeleteFilesFeature=ct.DidRenameFilesFeature=ct.DidCreateFilesFeature=void 0;var $t=require("vscode"),R_=kf(),tn=be(),b_=qi();function Of(n,e){return n[e]===void 0&&(n[e]={}),n[e]}function __(n,e){return n[e]}function xf(n,e,t){n[e]=t}var Hn=class{constructor(e,t,r,i,s){this._filters=new Map,this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=s}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=Of(Of(e,"workspace"),"fileOperations");xf(t,"dynamicRegistration",!0),xf(t,this._clientCapability,!0)}initialize(e){var t;let r=(t=e.workspace)===null||t===void 0?void 0:t.fileOperations,i=r!==void 0?__(r,this._serverCapability):void 0;if((i==null?void 0:i.filters)!==void 0)try{this.register({id:b_.generateUuid(),registerOptions:{filters:i.filters}})}catch(s){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${s}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=>{let i=new R_.Minimatch(r.pattern.glob,Hn.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(e,t){let r=await Promise.all(e.files.map(async s=>{let a=t(s),f=a.fsPath.replace(/\\/g,"/");for(let l of this._filters.values())for(let y of l)if(!(y.scheme!==void 0&&y.scheme!==a.scheme)){if(y.matcher.match(f)){if(y.kind===void 0)return!0;let b=await Hn.getFileType(a);if(b===void 0)return this._client.error(`Failed to determine file type for ${a.toString()}.`),!0;if(b===$t.FileType.File&&y.kind===tn.FileOperationPatternKind.file||b===$t.FileType.Directory&&y.kind===tn.FileOperationPatternKind.folder)return!0}else if(y.kind===tn.FileOperationPatternKind.folder&&await Hn.getFileType(a)===$t.FileType.Directory&&y.matcher.match(`${f}/`))return!0}return!1})),i=e.files.filter((s,a)=>r[a]);return Object.assign(Object.assign({},e),{files:i})}static async getFileType(e){try{return(await $t.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},Vi=class extends Hn{constructor(e,t,r,i,s,a,f){super(e,t,r,i,s);this._notificationType=r,this._accessUri=a,this._createParams=f}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=>{this._client.sendNotification(this._notificationType,this._createParams(i))};this.doSend(t,r)}}},If=class extends Vi{constructor(e){super(e,$t.workspace.onDidCreateFiles,tn.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.didCreateFiles)?i.didCreateFiles(e,t):t(e)}};ct.DidCreateFilesFeature=If;var Ff=class extends Vi{constructor(e){super(e,$t.workspace.onDidRenameFiles,tn.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}doSend(e,t){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.didRenameFiles)?i.didRenameFiles(e,t):t(e)}};ct.DidRenameFilesFeature=Ff;var Lf=class extends Vi{constructor(e){super(e,$t.workspace.onDidDeleteFiles,tn.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(e,t){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.didDeleteFiles)?i.didDeleteFiles(e,t):t(e)}};ct.DidDeleteFilesFeature=Lf;var Xi=class extends Hn{constructor(e,t,r,i,s,a,f){super(e,t,r,i,s);this._requestType=r,this._accessUri=a,this._createParams=f}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},Nf=class extends Xi{constructor(e){super(e,$t.workspace.onWillCreateFiles,tn.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.willCreateFiles)?i.willCreateFiles(e,t):t(e)}};ct.WillCreateFilesFeature=Nf;var Af=class extends Xi{constructor(e){super(e,$t.workspace.onWillRenameFiles,tn.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.willRenameFiles)?i.willRenameFiles(e,t):t(e)}};ct.WillRenameFilesFeature=Af;var Mf=class extends Xi{constructor(e){super(e,$t.workspace.onWillDeleteFiles,tn.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){var r;let i=(r=this._client.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;return(i==null?void 0:i.willDeleteFiles)?i.willDeleteFiles(e,t):t(e)}};ct.WillDeleteFilesFeature=Mf});var Wf=D(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.LinkedEditingFeature=void 0;var C_=require("vscode"),xo=be(),w_=lt();function $f(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var Hf=class extends w_.TextDocumentFeature{constructor(e){super(e,xo.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=$f($f(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t={provideLinkedEditingRanges:(r,i,s)=>{let a=this._client,f=(y,b,C)=>a.sendRequest(xo.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(y,b),C).then(a.protocol2CodeConverter.asLinkedEditingRanges,w=>a.handleFailedRequest(xo.LinkedEditingRangeRequest.type,w,null)),l=a.clientOptions.middleware;return l.provideLinkedEditingRange?l.provideLinkedEditingRange(r,i,s,f):f(r,i,s)}};return[C_.languages.registerLinkedEditingRangeProvider(e.documentSelector,t),t]}};Ji.LinkedEditingFeature=Hf});var Io=D(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.ProposedFeatures=Wn.CommonLanguageClient=void 0;var S_=lt(),T_=Md(),D_=no(),E_=Hd(),P_=Bd(),q_=Ud(),k_=Gd(),O_=Jd(),x_=Zd(),I_=tf(),F_=of(),L_=cf(),dr=jf(),N_=Wf(),Bf=class extends S_.BaseLanguageClient{constructor(e,t,r){super(e,t,r)}registerProposedFeatures(){this.registerFeatures(Kf.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new D_.ConfigurationFeature(this)),this.registerFeature(new P_.TypeDefinitionFeature(this)),this.registerFeature(new E_.ImplementationFeature(this)),this.registerFeature(new T_.ColorProviderFeature(this)),this.registerFeature(new q_.WorkspaceFoldersFeature(this)),this.registerFeature(new k_.FoldingRangeFeature(this)),this.registerFeature(new O_.DeclarationFeature(this)),this.registerFeature(new x_.SelectionRangeFeature(this)),this.registerFeature(new I_.ProgressFeature(this)),this.registerFeature(new F_.CallHierarchyFeature(this)),this.registerFeature(new L_.SemanticTokensFeature(this)),this.registerFeature(new N_.LinkedEditingFeature(this)),this.registerFeature(new dr.DidCreateFilesFeature(this)),this.registerFeature(new dr.DidRenameFilesFeature(this)),this.registerFeature(new dr.DidDeleteFilesFeature(this)),this.registerFeature(new dr.WillCreateFilesFeature(this)),this.registerFeature(new dr.WillRenameFilesFeature(this)),this.registerFeature(new dr.WillDeleteFilesFeature(this))}};Wn.CommonLanguageClient=Bf;var Kf;(function(n){function e(t){return[]}n.createAll=e})(Kf=Wn.ProposedFeatures||(Wn.ProposedFeatures={}))});var zf=D(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.terminate=void 0;var Uf=require("child_process"),A_=require("path"),M_=process.platform==="win32",j_=process.platform==="darwin",$_=process.platform==="linux";function H_(n,e){if(M_)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),Uf.execFileSync("taskkill",["/T","/F","/PID",n.pid.toString()],i),!0}catch{return!1}else if($_||j_)try{var t=A_.join(__dirname,"terminateProcess.sh"),r=Uf.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill("SIGKILL"),!0}Qi.terminate=H_});var Fo=D((NS,Gf)=>{"use strict";Gf.exports=be()});var Vf=D(nn=>{"use strict";var W_=nn&&nn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Lo=nn&&nn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&W_(e,n,t)};Object.defineProperty(nn,"__esModule",{value:!0});Lo(be(),nn);Lo(lt(),nn);Lo(Io(),nn)});var eh=D(rt=>{"use strict";var B_=rt&&rt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Xf=rt&&rt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&B_(e,n,t)};Object.defineProperty(rt,"__esModule",{value:!0});rt.SettingMonitor=rt.LanguageClient=rt.TransportKind=void 0;var Bn=require("child_process"),No=require("fs"),Ao=require("path"),Jf=zc(),yn=require("vscode"),Oe=hn(),K_=Io(),U_=lt(),z_=zf(),xe=Fo();Xf(Fo(),rt);Xf(Vf(),rt);var Qf="^1.52.0",Mo;(function(n){function e(t){return Oe.string(t.command)}n.is=e})(Mo||(Mo={}));var Ue;(function(n){n[n.stdio=0]="stdio",n[n.ipc=1]="ipc",n[n.pipe=2]="pipe",n[n.socket=3]="socket"})(Ue=rt.TransportKind||(rt.TransportKind={}));var fr;(function(n){function e(t){let r=t;return r&&r.kind===Ue.socket&&Oe.number(r.port)}n.isSocket=e})(fr||(fr={}));var jo;(function(n){function e(t){return Oe.string(t.module)}n.is=e})(jo||(jo={}));var $o;(function(n){function e(t){let r=t;return r&&r.writer!==void 0&&r.reader!==void 0}n.is=e})($o||($o={}));var Ho;(function(n){function e(t){let r=t;return r&&r.process!==void 0&&typeof r.detached=="boolean"}n.is=e})(Ho||(Ho={}));var Yf=class extends K_.CommonLanguageClient{constructor(e,t,r,i,s){let a,f,l,y,b;Oe.string(t)?(a=e,f=t,l=r,y=i,b=!!s):(a=e.toLowerCase(),f=e,l=t,y=r,b=i),b===void 0&&(b=!1);super(a,f,y);this._serverOptions=l,this._forceDebug=b;try{this.checkVersion()}catch(C){throw Oe.string(C.message)&&this.outputChannel.appendLine(C.message),C}}checkVersion(){let e=Jf.parse(yn.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${yn.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!Jf.satisfies(e,Qf))throw new Error(`The language client requires VS Code version ${Qf} but received version ${yn.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=>{try{process.kill(e.pid,0),z_.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function t(b,C){if(!b&&!C)return;let w=Object.create(null);return Object.keys(process.env).forEach(T=>w[T]=process.env[T]),C&&(w.ELECTRON_RUN_AS_NODE="1",w.ELECTRON_NO_ASAR="1"),b&&Object.keys(b).forEach(T=>w[T]=b[T]),w}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let b=process.execArgv;return b?b.some(C=>r.some(w=>C.startsWith(w))||i.some(w=>C===w)):!1}function a(b){if(b.stdin===null||b.stdout===null||b.stderr===null)throw new Error("Process created without stdio streams")}let f=this._serverOptions;if(Oe.func(f))return f().then(b=>{if(U_.MessageTransports.is(b))return this._isDetached=!!b.detached,b;if($o.is(b))return this._isDetached=!!b.detached,{reader:new xe.StreamMessageReader(b.reader),writer:new xe.StreamMessageWriter(b.writer)};{let C;return Ho.is(b)?(C=b.process,this._isDetached=b.detached):(C=b,this._isDetached=!1),C.stderr.on("data",w=>this.outputChannel.append(Oe.string(w)?w:w.toString(e))),{reader:new xe.StreamMessageReader(C.stdout),writer:new xe.StreamMessageWriter(C.stdin)}}});let l,y=f;return y.run||y.debug?this._forceDebug||s()?l=y.debug:l=y.run:l=f,this._getServerWorkingDir(l.options).then(b=>{if(jo.is(l)&&l.module){let C=l,w=C.transport||Ue.stdio;if(C.runtime){let T=[],I=C.options||Object.create(null);I.execArgv&&I.execArgv.forEach(k=>T.push(k)),T.push(C.module),C.args&&C.args.forEach(k=>T.push(k));let L=Object.create(null);L.cwd=b,L.env=t(I.env,!1);let z=this._getRuntimePath(C.runtime,b),F;if(w===Ue.ipc?(L.stdio=[null,null,null,"ipc"],T.push("--node-ipc")):w===Ue.stdio?T.push("--stdio"):w===Ue.pipe?(F=xe.generateRandomPipeName(),T.push(`--pipe=${F}`)):fr.isSocket(w)&&T.push(`--socket=${w.port}`),T.push(`--clientProcessId=${process.pid.toString()}`),w===Ue.ipc||w===Ue.stdio){let k=Bn.spawn(z,T,L);return!k||!k.pid?Promise.reject(`Launching server using runtime ${z} failed.`):(this._serverProcess=k,k.stderr.on("data",x=>this.outputChannel.append(Oe.string(x)?x:x.toString(e))),w===Ue.ipc?(k.stdout.on("data",x=>this.outputChannel.append(Oe.string(x)?x:x.toString(e))),Promise.resolve({reader:new xe.IPCMessageReader(k),writer:new xe.IPCMessageWriter(k)})):Promise.resolve({reader:new xe.StreamMessageReader(k.stdout),writer:new xe.StreamMessageWriter(k.stdin)}))}else{if(w===Ue.pipe)return xe.createClientPipeTransport(F).then(k=>{let x=Bn.spawn(z,T,L);return!x||!x.pid?Promise.reject(`Launching server using runtime ${z} failed.`):(this._serverProcess=x,x.stderr.on("data",q=>this.outputChannel.append(Oe.string(q)?q:q.toString(e))),x.stdout.on("data",q=>this.outputChannel.append(Oe.string(q)?q:q.toString(e))),k.onConnected().then(q=>({reader:q[0],writer:q[1]})))});if(fr.isSocket(w))return xe.createClientSocketTransport(w.port).then(k=>{let x=Bn.spawn(z,T,L);return!x||!x.pid?Promise.reject(`Launching server using runtime ${z} failed.`):(this._serverProcess=x,x.stderr.on("data",q=>this.outputChannel.append(Oe.string(q)?q:q.toString(e))),x.stdout.on("data",q=>this.outputChannel.append(Oe.string(q)?q:q.toString(e))),k.onConnected().then(q=>({reader:q[0],writer:q[1]})))})}}else{let T;return new Promise((I,L)=>{let z=C.args&&C.args.slice()||[];w===Ue.ipc?z.push("--node-ipc"):w===Ue.stdio?z.push("--stdio"):w===Ue.pipe?(T=xe.generateRandomPipeName(),z.push(`--pipe=${T}`)):fr.isSocket(w)&&z.push(`--socket=${w.port}`),z.push(`--clientProcessId=${process.pid.toString()}`);let F=C.options||Object.create(null);if(F.env=t(F.env,!0),F.execArgv=F.execArgv||[],F.cwd=b,F.silent=!0,w===Ue.ipc||w===Ue.stdio){let k=Bn.fork(C.module,z||[],F);a(k),this._serverProcess=k,k.stderr.on("data",x=>this.outputChannel.append(Oe.string(x)?x:x.toString(e))),w===Ue.ipc?(k.stdout.on("data",x=>this.outputChannel.append(Oe.string(x)?x:x.toString(e))),I({reader:new xe.IPCMessageReader(this._serverProcess),writer:new xe.IPCMessageWriter(this._serverProcess)})):I({reader:new xe.StreamMessageReader(k.stdout),writer:new xe.StreamMessageWriter(k.stdin)})}else w===Ue.pipe?xe.createClientPipeTransport(T).then(k=>{let x=Bn.fork(C.module,z||[],F);a(x),this._serverProcess=x,x.stderr.on("data",q=>this.outputChannel.append(Oe.string(q)?q:q.toString(e))),x.stdout.on("data",q=>this.outputChannel.append(Oe.string(q)?q:q.toString(e))),k.onConnected().then(q=>{I({reader:q[0],writer:q[1]})})}):fr.isSocket(w)&&xe.createClientSocketTransport(w.port).then(k=>{let x=Bn.fork(C.module,z||[],F);a(x),this._serverProcess=x,x.stderr.on("data",q=>this.outputChannel.append(Oe.string(q)?q:q.toString(e))),x.stdout.on("data",q=>this.outputChannel.append(Oe.string(q)?q:q.toString(e))),k.onConnected().then(q=>{I({reader:q[0],writer:q[1]})})})})}}else if(Mo.is(l)&&l.command){let C=l,w=C.args||[],T=Object.assign({},C.options);T.cwd=T.cwd||b;let I=Bn.spawn(C.command,w,T);return!I||!I.pid?Promise.reject(`Launching server using command ${C.command} failed.`):(I.stderr.on("data",L=>this.outputChannel.append(Oe.string(L)?L:L.toString(e))),this._serverProcess=I,this._isDetached=!!T.detached,Promise.resolve({reader:new xe.StreamMessageReader(I.stdout),writer:new xe.StreamMessageWriter(I.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(f,null,4)))})}_getRuntimePath(e,t){if(Ao.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Ao.join(r,e);if(No.existsSync(i))return i}if(t!==void 0){let i=Ao.join(t,e);if(No.existsSync(i))return i}return e}_mainGetRootPath(){let e=yn.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=>{No.lstat(t,(i,s)=>{r(!i&&s.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let t;try{t=JSON.parse(e)}catch{}return t===void 0||typeof t.locale!="string"?"en":t.locale}};rt.LanguageClient=Yf;var Zf=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return yn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new yn.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?yn.workspace.getConfiguration(t).get(r,!1):yn.workspace.getConfiguration(t);i&&this._client.needsStart()?this._client.start():!i&&this._client.needsStop()&&this._client.stop()}};rt.SettingMonitor=Zf});var nh=D((jS,th)=>{"use strict";th.exports=eh()});var Zi=D(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.Event=Rn.Response=Rn.Message=void 0;var Yi=class{constructor(e){this.seq=0,this.type=e}};Rn.Message=Yi;var rh=class extends Yi{constructor(e,t){super("response");this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};Rn.Response=rh;var ih=class extends Yi{constructor(e,t){super("event");this.event=e,t&&(this.body=t)}};Rn.Event=ih});var oh=D(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.ProtocolServer=void 0;var G_=require("events"),Yr=Zi(),sh=class{get event(){return this._event||(this._event=(e,t)=>{this._listener=e,this._this=t;let r;return r={dispose:()=>{this._listener=void 0,this._this=void 0}},r}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch{}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}},hr=class extends G_.EventEmitter{constructor(){super();this._sendMessage=new sh,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if(e.type==="request")this.dispatchRequest(e);else if(e.type==="response"){let t=e,r=this._pendingRequests.get(t.request_seq);r&&(this._pendingRequests.delete(t.request_seq),r(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",r=>this._handleData(r)),e.on("close",()=>{this._emitEvent(new Yr.Event("close"))}),e.on("error",r=>{this._emitEvent(new Yr.Event("error","inStream error: "+(r&&r.message)))}),t.on("error",r=>{this._emitEvent(new Yr.Event("error","outStream error: "+(r&&r.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,r,i){let s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this._send("request",s),i){this._pendingRequests.set(s.seq,i);let a=setTimeout(()=>{clearTimeout(a);let f=this._pendingRequests.get(s.seq);f&&(this._pendingRequests.delete(s.seq),f(new Yr.Response(s,"timeout")))},r)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){let r=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(r,"utf8")}\r
\r
${r}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let t=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,t.length>0)try{let r=JSON.parse(t);this.handleMessage(r)}catch(r){this._emitEvent(new Yr.Event("error","Error handling data: "+(r&&r.message)))}continue}}else{let t=this._rawData.indexOf(hr.TWO_CRLF);if(t!==-1){let i=this._rawData.toString("utf8",0,t).split(`\r
`);for(let s=0;s<i.length;s++){let a=i[s].split(/: +/);a[0]=="Content-Length"&&(this._contentLength=+a[1])}this._rawData=this._rawData.slice(t+hr.TWO_CRLF.length);continue}}break}}};es.ProtocolServer=hr;hr.TWO_CRLF=`\r
\r
`});var ah=D(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.runDebugAdapter=void 0;var V_=require("net");function X_(n){let e=0;if(process.argv.slice(2).forEach(function(r,i,s){let a=/^--server=(\d{4,5})$/.exec(r);a&&(e=parseInt(a[1],10))}),e>0)console.error(`waiting for debug protocol on port ${e}`),V_.createServer(r=>{console.error(">> accepted connection from client"),r.on("end",()=>{console.error(`>> client connection closed
`)});let i=new n(!1,!0);i.setRunAsServer(!0),i.start(r,r)}).listen(e);else{let r=new n(!1);process.on("SIGTERM",()=>{r.shutdown()}),r.start(process.stdin,process.stdout)}}ts.runDebugAdapter=X_});var ns=D(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.DebugSession=U.ErrorDestination=U.InvalidatedEvent=U.ProgressEndEvent=U.ProgressUpdateEvent=U.ProgressStartEvent=U.CapabilitiesEvent=U.LoadedSourceEvent=U.ModuleEvent=U.BreakpointEvent=U.ThreadEvent=U.OutputEvent=U.ExitedEvent=U.TerminatedEvent=U.InitializedEvent=U.ContinuedEvent=U.StoppedEvent=U.CompletionItem=U.Module=U.Breakpoint=U.Variable=U.Thread=U.StackFrame=U.Scope=U.Source=void 0;var J_=oh(),Je=Zi(),Q_=ah(),ch=require("url"),uh=class{constructor(e,t,r=0,i,s){this.name=e,this.path=t,this.sourceReference=r,i&&(this.origin=i),s&&(this.adapterData=s)}};U.Source=uh;var lh=class{constructor(e,t,r=!1){this.name=e,this.variablesReference=t,this.expensive=r}};U.Scope=lh;var dh=class{constructor(e,t,r,i=0,s=0){this.id=e,this.source=r,this.line=i,this.column=s,this.name=t}};U.StackFrame=dh;var fh=class{constructor(e,t){this.id=e,t?this.name=t:this.name="Thread #"+e}};U.Thread=fh;var hh=class{constructor(e,t,r=0,i,s){this.name=e,this.value=t,this.variablesReference=r,typeof s=="number"&&(this.namedVariables=s),typeof i=="number"&&(this.indexedVariables=i)}};U.Variable=hh;var ph=class{constructor(e,t,r,i){this.verified=e;let s=this;typeof t=="number"&&(s.line=t),typeof r=="number"&&(s.column=r),i&&(s.source=i)}setId(e){this.id=e}};U.Breakpoint=ph;var gh=class{constructor(e,t){this.id=e,this.name=t}};U.Module=gh;var mh=class{constructor(e,t,r=0){this.label=e,this.start=t,this.length=r}};U.CompletionItem=mh;var vh=class extends Je.Event{constructor(e,t,r){super("stopped");this.body={reason:e},typeof t=="number"&&(this.body.threadId=t),typeof r=="string"&&(this.body.text=r)}};U.StoppedEvent=vh;var yh=class extends Je.Event{constructor(e,t){super("continued");this.body={threadId:e},typeof t=="boolean"&&(this.body.allThreadsContinued=t)}};U.ContinuedEvent=yh;var Rh=class extends Je.Event{constructor(){super("initialized")}};U.InitializedEvent=Rh;var bh=class extends Je.Event{constructor(e){super("terminated");if(typeof e=="boolean"||e){let t=this;t.body={restart:e}}}};U.TerminatedEvent=bh;var _h=class extends Je.Event{constructor(e){super("exited");this.body={exitCode:e}}};U.ExitedEvent=_h;var Ch=class extends Je.Event{constructor(e,t="console",r){super("output");this.body={category:t,output:e},r!==void 0&&(this.body.data=r)}};U.OutputEvent=Ch;var wh=class extends Je.Event{constructor(e,t){super("thread");this.body={reason:e,threadId:t}}};U.ThreadEvent=wh;var Sh=class extends Je.Event{constructor(e,t){super("breakpoint");this.body={reason:e,breakpoint:t}}};U.BreakpointEvent=Sh;var Th=class extends Je.Event{constructor(e,t){super("module");this.body={reason:e,module:t}}};U.ModuleEvent=Th;var Dh=class extends Je.Event{constructor(e,t){super("loadedSource");this.body={reason:e,source:t}}};U.LoadedSourceEvent=Dh;var Eh=class extends Je.Event{constructor(e){super("capabilities");this.body={capabilities:e}}};U.CapabilitiesEvent=Eh;var Ph=class extends Je.Event{constructor(e,t,r){super("progressStart");this.body={progressId:e,title:t},typeof r=="string"&&(this.body.message=r)}};U.ProgressStartEvent=Ph;var qh=class extends Je.Event{constructor(e,t){super("progressUpdate");this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};U.ProgressUpdateEvent=qh;var kh=class extends Je.Event{constructor(e,t){super("progressEnd");this.body={progressId:e},typeof t=="string"&&(this.body.message=t)}};U.ProgressEndEvent=kh;var Oh=class extends Je.Event{constructor(e,t,r){super("invalidated");this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),r&&(this.body.stackFrameId=r)}};U.InvalidatedEvent=Oh;var Kn;(function(n){n[n.User=1]="User",n[n.Telemetry=2]="Telemetry"})(Kn=U.ErrorDestination||(U.ErrorDestination={}));var Ht=class extends J_.ProtocolServer{constructor(e,t){super();let r=typeof e=="boolean"?e:!1;this._debuggerLinesStartAt1=r,this._debuggerColumnsStartAt1=r,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer=typeof t=="boolean"?t:!1,this.on("close",()=>{this.shutdown()}),this.on("error",i=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs=e!=="path"}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,Q_.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,r,i,s=Kn.User){let a;typeof t=="number"?(a={id:t,format:r},i&&(a.variables=i),s&Kn.User&&(a.showUser=!0),s&Kn.Telemetry&&(a.sendTelemetry=!0)):a=t,e.success=!1,e.message=Ht.formatPII(a.format,!0,a.variables),e.body||(e.body={}),e.body.error=a,this.sendResponse(e)}runInTerminalRequest(e,t,r){this.sendRequest("runInTerminal",e,t,r)}dispatchRequest(e){let t=new Je.Response(e);try{if(e.command==="initialize"){var r=e.arguments;if(typeof r.linesStartAt1=="boolean"&&(this._clientLinesStartAt1=r.linesStartAt1),typeof r.columnsStartAt1=="boolean"&&(this._clientColumnsStartAt1=r.columnsStartAt1),r.pathFormat!=="path")this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,Kn.Telemetry);else{let i=t;i.body={},this.initializeRequest(i,r)}}else e.command==="launch"?this.launchRequest(t,e.arguments,e):e.command==="attach"?this.attachRequest(t,e.arguments,e):e.command==="disconnect"?this.disconnectRequest(t,e.arguments,e):e.command==="terminate"?this.terminateRequest(t,e.arguments,e):e.command==="restart"?this.restartRequest(t,e.arguments,e):e.command==="setBreakpoints"?this.setBreakPointsRequest(t,e.arguments,e):e.command==="setFunctionBreakpoints"?this.setFunctionBreakPointsRequest(t,e.arguments,e):e.command==="setExceptionBreakpoints"?this.setExceptionBreakPointsRequest(t,e.arguments,e):e.command==="configurationDone"?this.configurationDoneRequest(t,e.arguments,e):e.command==="continue"?this.continueRequest(t,e.arguments,e):e.command==="next"?this.nextRequest(t,e.arguments,e):e.command==="stepIn"?this.stepInRequest(t,e.arguments,e):e.command==="stepOut"?this.stepOutRequest(t,e.arguments,e):e.command==="stepBack"?this.stepBackRequest(t,e.arguments,e):e.command==="reverseContinue"?this.reverseContinueRequest(t,e.arguments,e):e.command==="restartFrame"?this.restartFrameRequest(t,e.arguments,e):e.command==="goto"?this.gotoRequest(t,e.arguments,e):e.command==="pause"?this.pauseRequest(t,e.arguments,e):e.command==="stackTrace"?this.stackTraceRequest(t,e.arguments,e):e.command==="scopes"?this.scopesRequest(t,e.arguments,e):e.command==="variables"?this.variablesRequest(t,e.arguments,e):e.command==="setVariable"?this.setVariableRequest(t,e.arguments,e):e.command==="setExpression"?this.setExpressionRequest(t,e.arguments,e):e.command==="source"?this.sourceRequest(t,e.arguments,e):e.command==="threads"?this.threadsRequest(t,e):e.command==="terminateThreads"?this.terminateThreadsRequest(t,e.arguments,e):e.command==="evaluate"?this.evaluateRequest(t,e.arguments,e):e.command==="stepInTargets"?this.stepInTargetsRequest(t,e.arguments,e):e.command==="gotoTargets"?this.gotoTargetsRequest(t,e.arguments,e):e.command==="completions"?this.completionsRequest(t,e.arguments,e):e.command==="exceptionInfo"?this.exceptionInfoRequest(t,e.arguments,e):e.command==="loadedSources"?this.loadedSourcesRequest(t,e.arguments,e):e.command==="dataBreakpointInfo"?this.dataBreakpointInfoRequest(t,e.arguments,e):e.command==="setDataBreakpoints"?this.setDataBreakpointsRequest(t,e.arguments,e):e.command==="readMemory"?this.readMemoryRequest(t,e.arguments,e):e.command==="writeMemory"?this.writeMemoryRequest(t,e.arguments,e):e.command==="disassemble"?this.disassembleRequest(t,e.arguments,e):e.command==="cancel"?this.cancelRequest(t,e.arguments,e):e.command==="breakpointLocations"?this.breakpointLocationsRequest(t,e.arguments,e):e.command==="setInstructionBreakpoints"?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(i){this.sendErrorResponse(t,1104,"{_stack}",{_exception:i.message,_stack:i.stack},Kn.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,r){this.sendResponse(e),this.shutdown()}launchRequest(e,t,r){this.sendResponse(e)}attachRequest(e,t,r){this.sendResponse(e)}terminateRequest(e,t,r){this.sendResponse(e)}restartRequest(e,t,r){this.sendResponse(e)}setBreakPointsRequest(e,t,r){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,r){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,r){this.sendResponse(e)}configurationDoneRequest(e,t,r){this.sendResponse(e)}continueRequest(e,t,r){this.sendResponse(e)}nextRequest(e,t,r){this.sendResponse(e)}stepInRequest(e,t,r){this.sendResponse(e)}stepOutRequest(e,t,r){this.sendResponse(e)}stepBackRequest(e,t,r){this.sendResponse(e)}reverseContinueRequest(e,t,r){this.sendResponse(e)}restartFrameRequest(e,t,r){this.sendResponse(e)}gotoRequest(e,t,r){this.sendResponse(e)}pauseRequest(e,t,r){this.sendResponse(e)}sourceRequest(e,t,r){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,r){this.sendResponse(e)}stackTraceRequest(e,t,r){this.sendResponse(e)}scopesRequest(e,t,r){this.sendResponse(e)}variablesRequest(e,t,r){this.sendResponse(e)}setVariableRequest(e,t,r){this.sendResponse(e)}setExpressionRequest(e,t,r){this.sendResponse(e)}evaluateRequest(e,t,r){this.sendResponse(e)}stepInTargetsRequest(e,t,r){this.sendResponse(e)}gotoTargetsRequest(e,t,r){this.sendResponse(e)}completionsRequest(e,t,r){this.sendResponse(e)}exceptionInfoRequest(e,t,r){this.sendResponse(e)}loadedSourcesRequest(e,t,r){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,r){this.sendResponse(e)}setDataBreakpointsRequest(e,t,r){this.sendResponse(e)}readMemoryRequest(e,t,r){this.sendResponse(e)}writeMemoryRequest(e,t,r){this.sendResponse(e)}disassembleRequest(e,t,r){this.sendResponse(e)}cancelRequest(e,t,r){this.sendResponse(e)}breakpointLocationsRequest(e,t,r){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,r){this.sendResponse(e)}customRequest(e,t,r,i){this.sendErrorResponse(t,1014,"unrecognized request",null,Kn.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?Ht.uri2path(e):Ht.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?Ht.uri2path(e):Ht.path2uri(e):e}static path2uri(e){process.platform==="win32"&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new ch.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new ch.URL(e),r=decodeURIComponent(t.pathname);return process.platform==="win32"&&(/^\/[a-zA-Z]:/.test(r)&&(r=r[1].toLowerCase()+r.substr(2)),r=r.replace(/\//g,"\\")),r}static formatPII(e,t,r){return e.replace(Ht._formatPIIRegexp,function(i,s){return t&&s.length>0&&s[0]!=="_"?i:r[s]&&r.hasOwnProperty(s)?r[s]:i})}};U.DebugSession=Ht;Ht._formatPIIRegexp=/{([^}]+)}/g});var Fh=D((KS,Ih)=>{var{promisify:xh}=require("util"),bn=require("fs"),Y_=n=>{if(!n)n={mode:511,fs:bn};else if(typeof n=="object")n={mode:511,fs:bn,...n};else if(typeof n=="number")n={mode:n,fs:bn};else if(typeof n=="string")n={mode:parseInt(n,8),fs:bn};else throw new TypeError("invalid options argument");return n.mkdir=n.mkdir||n.fs.mkdir||bn.mkdir,n.mkdirAsync=xh(n.mkdir),n.stat=n.stat||n.fs.stat||bn.stat,n.statAsync=xh(n.stat),n.statSync=n.statSync||n.fs.statSync||bn.statSync,n.mkdirSync=n.mkdirSync||n.fs.mkdirSync||bn.mkdirSync,n};Ih.exports=Y_});var Nh=D((US,Lh)=>{var Z_=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:eC,parse:tC}=require("path"),nC=n=>{if(/\0/.test(n))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:n,code:"ERR_INVALID_ARG_VALUE"});if(n=eC(n),Z_==="win32"){let e=/[*|"<>?:]/,{root:t}=tC(n);if(e.test(n.substr(t.length)))throw Object.assign(new Error("Illegal characters in path."),{path:n,code:"EINVAL"})}return n};Lh.exports=nC});var Hh=D((zS,$h)=>{var{dirname:Ah}=require("path"),Mh=(n,e,t=void 0)=>t===e?Promise.resolve():n.statAsync(e).then(r=>r.isDirectory()?t:void 0,r=>r.code==="ENOENT"?Mh(n,Ah(e),e):void 0),jh=(n,e,t=void 0)=>{if(t!==e)try{return n.statSync(e).isDirectory()?t:void 0}catch(r){return r.code==="ENOENT"?jh(n,Ah(e),e):void 0}};$h.exports={findMade:Mh,findMadeSync:jh}});var Ko=D((GS,Bh)=>{var{dirname:Wh}=require("path"),Wo=(n,e,t)=>{e.recursive=!1;let r=Wh(n);return r===n?e.mkdirAsync(n,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(n,e).then(()=>t||n,i=>{if(i.code==="ENOENT")return Wo(r,e).then(s=>Wo(n,e,s));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(n).then(s=>{if(s.isDirectory())return t;throw i},()=>{throw i})})},Bo=(n,e,t)=>{let r=Wh(n);if(e.recursive=!1,r===n)try{return e.mkdirSync(n,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(n,e),t||n}catch(i){if(i.code==="ENOENT")return Bo(n,e,Bo(r,e,t));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(n).isDirectory())throw i}catch{throw i}}};Bh.exports={mkdirpManual:Wo,mkdirpManualSync:Bo}});var zh=D((VS,Uh)=>{var{dirname:Kh}=require("path"),{findMade:rC,findMadeSync:iC}=Hh(),{mkdirpManual:sC,mkdirpManualSync:oC}=Ko(),aC=(n,e)=>(e.recursive=!0,Kh(n)===n?e.mkdirAsync(n,e):rC(e,n).then(r=>e.mkdirAsync(n,e).then(()=>r).catch(i=>{if(i.code==="ENOENT")return sC(n,e);throw i}))),cC=(n,e)=>{if(e.recursive=!0,Kh(n)===n)return e.mkdirSync(n,e);let r=iC(e,n);try{return e.mkdirSync(n,e),r}catch(i){if(i.code==="ENOENT")return oC(n,e);throw i}};Uh.exports={mkdirpNative:aC,mkdirpNativeSync:cC}});var Jh=D((XS,Xh)=>{var Gh=require("fs"),uC=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Uo=uC.replace(/^v/,"").split("."),Vh=+Uo[0]>10||+Uo[0]==10&&+Uo[1]>=12,lC=Vh?n=>n.mkdir===Gh.mkdir:()=>!1,dC=Vh?n=>n.mkdirSync===Gh.mkdirSync:()=>!1;Xh.exports={useNative:lC,useNativeSync:dC}});var np=D((JS,tp)=>{var pr=Fh(),gr=Nh(),{mkdirpNative:Qh,mkdirpNativeSync:Yh}=zh(),{mkdirpManual:Zh,mkdirpManualSync:ep}=Ko(),{useNative:fC,useNativeSync:hC}=Jh(),mr=(n,e)=>(n=gr(n),e=pr(e),fC(e)?Qh(n,e):Zh(n,e)),pC=(n,e)=>(n=gr(n),e=pr(e),hC(e)?Yh(n,e):ep(n,e));mr.sync=pC;mr.native=(n,e)=>Qh(gr(n),pr(e));mr.manual=(n,e)=>Zh(gr(n),pr(e));mr.nativeSync=(n,e)=>Yh(gr(n),pr(e));mr.manualSync=(n,e)=>ep(gr(n),pr(e));tp.exports=mr});var op=D(vr=>{"use strict";var gC=vr&&vr.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function f(b){try{y(r.next(b))}catch(C){a(C)}}function l(b){try{y(r.throw(b))}catch(C){a(C)}}function y(b){b.done?s(b.value):i(b.value).then(f,l)}y((r=r.apply(n,e||[])).next())})};Object.defineProperty(vr,"__esModule",{value:!0});vr.InternalLogger=void 0;var mC=require("fs"),rp=require("path"),vC=np(),dt=is(),ip=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=dt.LogLevel.Warn,this.disposeCallback=(r,i)=>{this.dispose(),i=i||2,i+=128,process.exit(i)}}setup(e){return gC(this,void 0,void 0,function*(){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(!rp.isAbsolute(e.logFilePath))this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,dt.LogLevel.Error);else{let t=r=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${r.toString()}
`,dt.LogLevel.Error);try{yield vC(rp.dirname(e.logFilePath)),this.log(`Verbose logs are written to:
`,dt.LogLevel.Warn),this.log(e.logFilePath+`
`,dt.LogLevel.Warn),this._logFileStream=mC.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",r=>{t(r)})}catch(r){t(r)}}})}logDateTime(){let e=new Date,r=e.getUTCFullYear()+`-${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+sp();this.log(r+`
`,dt.LogLevel.Verbose,!1)}setupShutdownListeners(){process.addListener("beforeExit",this.beforeExitCallback),process.addListener("SIGTERM",this.disposeCallback),process.addListener("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise(e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()})}log(e,t,r=!0){if(this._minLogLevel!==dt.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){let i=t===dt.LogLevel.Error?console.error:t===dt.LogLevel.Warn?console.warn:null;i&&i((0,dt.trimLastNewline)(e))}t===dt.LogLevel.Error&&(e=`[${dt.LogLevel[t]}] ${e}`),this._prependTimestamp&&r&&(e="["+sp()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){let r=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",r&&(e=e+`
`)}if(this._logCallback){let r=new dt.LogOutputEvent(e,t);this._logCallback(r)}}};vr.InternalLogger=ip;function sp(){let n=new Date,e=rs(2,String(n.getUTCHours())),t=rs(2,String(n.getUTCMinutes())),r=rs(2,String(n.getUTCSeconds())),i=rs(3,String(n.getUTCMilliseconds()));return e+":"+t+":"+r+"."+i+" UTC"}function rs(n,e){return e.length>=n?e:String("0".repeat(n)+e).slice(-n)}});var is=D(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.trimLastNewline=ft.LogOutputEvent=ft.logger=ft.Logger=ft.LogLevel=void 0;var yC=op(),RC=ns(),_n;(function(n){n[n.Verbose=0]="Verbose",n[n.Log=1]="Log",n[n.Warn=2]="Warn",n[n.Error=3]="Error",n[n.Stop=4]="Stop"})(_n=ft.LogLevel||(ft.LogLevel={}));var zo=class{constructor(){this._pendingLogQ=[]}log(e,t=_n.Log){e=e+`
`,this._write(e,t)}verbose(e){this.log(e,_n.Verbose)}warn(e){this.log(e,_n.Warn)}error(e){this.log(e,_n.Error)}dispose(){if(this._currentLogger){let e=this._currentLogger.dispose();return this._currentLogger=null,e}else return Promise.resolve()}_write(e,t=_n.Log){e=e+"",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,r=!0){let i=typeof t=="string"?t:t&&this._logFilePathFromInit;if(this._currentLogger){let s={consoleMinLogLevel:e,logFilePath:i,prependTimestamp:r};this._currentLogger.setup(s).then(()=>{if(this._pendingLogQ){let a=this._pendingLogQ;this._pendingLogQ=null,a.forEach(f=>this._write(f.msg,f.level))}})}}init(e,t,r){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new yC.InternalLogger(e,r),this._logFilePathFromInit=t}};ft.Logger=zo;ft.logger=new zo;var ap=class extends RC.OutputEvent{constructor(e,t){let r=t===_n.Error?"stderr":t===_n.Warn?"console":"stdout";super(e,r)}};ft.LogOutputEvent=ap;function bC(n){return n.replace(/(\n|\r\n)$/,"")}ft.trimLastNewline=bC});var dp=D(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.LoggingDebugSession=void 0;var cp=is(),yr=cp.logger,up=ns(),lp=class extends up.DebugSession{constructor(e,t,r){super(t,r);this.obsolete_logFilePath=e,this.on("error",i=>{yr.error(i.body)})}start(e,t){super.start(e,t),yr.init(r=>this.sendEvent(r),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof cp.LogOutputEvent)){let t=e;e instanceof up.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t=Object.assign({},e),t.body=Object.assign(Object.assign({},e.body),{output:"<output not logged>"})),yr.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,r,i){yr.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${r}`),super.sendRequest(e,t,r,i)}sendResponse(e){yr.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){yr.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}};ss.LoggingDebugSession=lp});var hp=D(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.Handles=void 0;var fp=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}};os.Handles=fp});var mp=D(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.Handles=A.Response=A.Event=A.ErrorDestination=A.CompletionItem=A.Module=A.Source=A.Breakpoint=A.Variable=A.Scope=A.StackFrame=A.Thread=A.InvalidatedEvent=A.ProgressEndEvent=A.ProgressUpdateEvent=A.ProgressStartEvent=A.CapabilitiesEvent=A.LoadedSourceEvent=A.ModuleEvent=A.BreakpointEvent=A.ThreadEvent=A.OutputEvent=A.ContinuedEvent=A.StoppedEvent=A.ExitedEvent=A.TerminatedEvent=A.InitializedEvent=A.logger=A.Logger=A.LoggingDebugSession=A.DebugSession=void 0;var me=ns();Object.defineProperty(A,"DebugSession",{enumerable:!0,get:function(){return me.DebugSession}});Object.defineProperty(A,"InitializedEvent",{enumerable:!0,get:function(){return me.InitializedEvent}});Object.defineProperty(A,"TerminatedEvent",{enumerable:!0,get:function(){return me.TerminatedEvent}});Object.defineProperty(A,"ExitedEvent",{enumerable:!0,get:function(){return me.ExitedEvent}});Object.defineProperty(A,"StoppedEvent",{enumerable:!0,get:function(){return me.StoppedEvent}});Object.defineProperty(A,"ContinuedEvent",{enumerable:!0,get:function(){return me.ContinuedEvent}});Object.defineProperty(A,"OutputEvent",{enumerable:!0,get:function(){return me.OutputEvent}});Object.defineProperty(A,"ThreadEvent",{enumerable:!0,get:function(){return me.ThreadEvent}});Object.defineProperty(A,"BreakpointEvent",{enumerable:!0,get:function(){return me.BreakpointEvent}});Object.defineProperty(A,"ModuleEvent",{enumerable:!0,get:function(){return me.ModuleEvent}});Object.defineProperty(A,"LoadedSourceEvent",{enumerable:!0,get:function(){return me.LoadedSourceEvent}});Object.defineProperty(A,"CapabilitiesEvent",{enumerable:!0,get:function(){return me.CapabilitiesEvent}});Object.defineProperty(A,"ProgressStartEvent",{enumerable:!0,get:function(){return me.ProgressStartEvent}});Object.defineProperty(A,"ProgressUpdateEvent",{enumerable:!0,get:function(){return me.ProgressUpdateEvent}});Object.defineProperty(A,"ProgressEndEvent",{enumerable:!0,get:function(){return me.ProgressEndEvent}});Object.defineProperty(A,"InvalidatedEvent",{enumerable:!0,get:function(){return me.InvalidatedEvent}});Object.defineProperty(A,"Thread",{enumerable:!0,get:function(){return me.Thread}});Object.defineProperty(A,"StackFrame",{enumerable:!0,get:function(){return me.StackFrame}});Object.defineProperty(A,"Scope",{enumerable:!0,get:function(){return me.Scope}});Object.defineProperty(A,"Variable",{enumerable:!0,get:function(){return me.Variable}});Object.defineProperty(A,"Breakpoint",{enumerable:!0,get:function(){return me.Breakpoint}});Object.defineProperty(A,"Source",{enumerable:!0,get:function(){return me.Source}});Object.defineProperty(A,"Module",{enumerable:!0,get:function(){return me.Module}});Object.defineProperty(A,"CompletionItem",{enumerable:!0,get:function(){return me.CompletionItem}});Object.defineProperty(A,"ErrorDestination",{enumerable:!0,get:function(){return me.ErrorDestination}});var _C=dp();Object.defineProperty(A,"LoggingDebugSession",{enumerable:!0,get:function(){return _C.LoggingDebugSession}});var pp=is();A.Logger=pp;var gp=Zi();Object.defineProperty(A,"Event",{enumerable:!0,get:function(){return gp.Event}});Object.defineProperty(A,"Response",{enumerable:!0,get:function(){return gp.Response}});var CC=hp();Object.defineProperty(A,"Handles",{enumerable:!0,get:function(){return CC.Handles}});var wC=pp.logger;A.logger=wC});var Rp=D(yp=>{function as(){this.waiters=[]}as.prototype.wait=function(n){var e=this,t={};this.waiters.push(t);var r=new Promise(function(i){var s=!1;t.resolve=function(a){if(!s){if(s=!0,t.timeout&&(clearTimeout(t.timeout),t.timeout=null),!a){var f=e.waiters.indexOf(t);f>-1&&e.waiters.splice(f,1)}i()}}});return n>0&&isFinite(n)&&(t.timeout=setTimeout(function(){t.timeout=null,t.resolve()},n)),r};as.prototype.notify=function(){this.waiters.length>0&&this.waiters.pop().resolve(!0)};as.prototype.notifyAll=function(){for(var n=this.waiters.length-1;n>=0;n--)this.waiters[n].resolve(!0);this.waiters=[]};yp.Subject=as});Np(exports,{activate:()=>EC});var DC=Gt(require("net")),Un=Gt(require("vscode")),Dp=Gt(nh());var wp=Gt(require("vscode"));var re=Gt(require("vscode"));var G=Gt(mp()),bp=Gt(require("path"));var vp=Gt(require("events")),Go=class extends vp.EventEmitter{constructor(e){super();this._fileAccessor=e;this._sourceFile="";this._sourceLines=[];this._currentLine=0;this._breakPoints=new Map;this._breakpointId=1;this._breakAddresses=new Set;this._noDebug=!1;this._otherExceptions=!1}get sourceFile(){return this._sourceFile}start(e,t,r){return Ze(this,null,function*(){this._noDebug=r,yield this.loadSource(e),this._currentLine=-1,yield this.verifyBreakpoints(this._sourceFile),t?this.step(!1,"stopOnEntry"):this.continue()})}continue(e=!1){this.run(e,void 0)}step(e=!1,t="stopOnStep"){this.run(e,t)}stepIn(e){typeof e=="number"?(this._currentColumn=e,this.sendEvent("stopOnStep")):(typeof this._currentColumn=="number"?this._currentColumn<=this._sourceLines[this._currentLine].length&&(this._currentColumn+=1):this._currentColumn=1,this.sendEvent("stopOnStep"))}stepOut(){typeof this._currentColumn=="number"&&(this._currentColumn-=1,this._currentColumn===0&&(this._currentColumn=void 0)),this.sendEvent("stopOnStep")}getStepInTargets(e){let t=this._sourceLines[this._currentLine].trim(),r=t.split(/\s+/);if(e<0||e>=r.length)return[];let i=r[e],s=t.indexOf(i);return i.split("").map((a,f)=>({id:s+f,label:`target: ${a}`}))}stack(e,t){let r=this._sourceLines[this._currentLine].trim().split(/\s+/),i=new Array;for(let s=e;s<Math.min(t,r.length);s++){let a=r[s],f={index:s,name:`${a}(${s})`,file:this._sourceFile,line:this._currentLine};typeof this._currentColumn=="number"&&(f.column=this._currentColumn),i.push(f)}return{frames:i,count:r.length}}getBreakpoints(e,t){let r=this._sourceLines[t],i=!0,s=[];for(let a=0;a<r.length;a++)r[a]!==" "?i&&(s.push(a),i=!1):i=!0;return s}setBreakPoint(e,t){return Ze(this,null,function*(){let r={verified:!1,line:t,id:this._breakpointId++},i=this._breakPoints.get(e);return i||(i=new Array,this._breakPoints.set(e,i)),i.push(r),yield this.verifyBreakpoints(e),r})}clearBreakPoint(e,t){let r=this._breakPoints.get(e);if(r){let i=r.findIndex(s=>s.line===t);if(i>=0){let s=r[i];return r.splice(i,1),s}}}clearBreakpoints(e){this._breakPoints.delete(e)}setDataBreakpoint(e){return e?(this._breakAddresses.add(e),!0):!1}setExceptionsFilters(e,t){this._namedException=e,this._otherExceptions=t}clearAllDataBreakpoints(){this._breakAddresses.clear()}loadSource(e){return Ze(this,null,function*(){if(this._sourceFile!==e){this._sourceFile=e;let t=yield this._fileAccessor.readFile(e);this._sourceLines=t.split(/\r?\n/)}})}run(e=!1,t){if(e){for(let r=this._currentLine-1;r>=0;r--)if(this.fireEventsForLine(r,t)){this._currentLine=r,this._currentColumn=void 0;return}this._currentLine=0,this._currentColumn=void 0,this.sendEvent("stopOnEntry")}else{for(let r=this._currentLine+1;r<this._sourceLines.length;r++)if(this.fireEventsForLine(r,t))return this._currentLine=r,this._currentColumn=void 0,!0;this.sendEvent("end")}}verifyBreakpoints(e){return Ze(this,null,function*(){if(this._noDebug)return;let t=this._breakPoints.get(e);t&&(yield this.loadSource(e),t.forEach(r=>{if(!r.verified&&r.line<this._sourceLines.length){let i=this._sourceLines[r.line].trim();(i.length===0||i.indexOf("+")===0)&&r.line++,i.indexOf("-")===0&&r.line--,i.indexOf("lazy")<0&&(r.verified=!0,this.sendEvent("breakpointValidated",r))}}))})}fireEventsForLine(e,t){if(this._noDebug)return!1;let r=this._sourceLines[e].trim(),i=/log\((.*)\)/.exec(r);i&&i.length===2&&this.sendEvent("output",i[1],this._sourceFile,e,i.index);let s=r.split(" ");for(let l of s)if(this._breakAddresses.has(l))return this.sendEvent("stopOnDataBreakpoint"),!0;let a=/exception\((.*)\)/.exec(r);if(a&&a.length===2){let l=a[1].trim();if(this._namedException===l)return this.sendEvent("stopOnException",l),!0;if(this._otherExceptions)return this.sendEvent("stopOnException",void 0),!0}else if(r.indexOf("exception")>=0&&this._otherExceptions)return this.sendEvent("stopOnException",void 0),!0;let f=this._breakPoints.get(this._sourceFile);if(f){let l=f.filter(y=>y.line===e);if(l.length>0)return this.sendEvent("stopOnBreakpoint"),l[0].verified||(l[0].verified=!0,this.sendEvent("breakpointValidated",l[0])),!0}return t&&r.length>0?(this.sendEvent(t),!0):!1}sendEvent(e,...t){setImmediate(r=>{this.emit(e,...t)})}};var SC=Rp();function Vo(n){return new Promise(e=>setTimeout(e,n))}var rn=class extends G.LoggingDebugSession{constructor(e){super("slang-debug.txt");this._variableHandles=new G.Handles;this._configurationDone=new SC;this._cancelationTokens=new Map;this._isLongrunning=new Map;this._reportProgress=!1;this._progressId=1e4;this._cancelledProgressId=void 0;this._isProgressCancellable=!0;this._showHex=!1;this._useInvalidatedEvent=!1;this.setDebuggerLinesStartAt1(!1),this.setDebuggerColumnsStartAt1(!1),this._runtime=new Go(e),this._runtime.on("stopOnEntry",()=>{this.sendEvent(new G.StoppedEvent("entry",rn.threadID))}),this._runtime.on("stopOnStep",()=>{this.sendEvent(new G.StoppedEvent("step",rn.threadID))}),this._runtime.on("stopOnBreakpoint",()=>{this.sendEvent(new G.StoppedEvent("breakpoint",rn.threadID))}),this._runtime.on("stopOnDataBreakpoint",()=>{this.sendEvent(new G.StoppedEvent("data breakpoint",rn.threadID))}),this._runtime.on("stopOnException",t=>{t?this.sendEvent(new G.StoppedEvent(`exception(${t})`,rn.threadID)):this.sendEvent(new G.StoppedEvent("exception",rn.threadID))}),this._runtime.on("breakpointValidated",t=>{this.sendEvent(new G.BreakpointEvent("changed",{verified:t.verified,id:t.id}))}),this._runtime.on("output",(t,r,i,s)=>{let a=new G.OutputEvent(`${t}
`);(t==="start"||t==="startCollapsed"||t==="end")&&(a.body.output=`group-${t}
`),a.body.source=this.createSource(r),a.body.line=this.convertDebuggerLineToClient(i),a.body.column=this.convertDebuggerColumnToClient(s),this.sendEvent(a)}),this._runtime.on("end",()=>{this.sendEvent(new G.TerminatedEvent)})}initializeRequest(e,t){this._reportProgress=!0,this._useInvalidatedEvent=!0,e.body=e.body||{},e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!0,e.body.supportsStepBack=!0,e.body.supportsDataBreakpoints=!0,e.body.supportsCompletionsRequest=!0,e.body.completionTriggerCharacters=[".","["],e.body.supportsCancelRequest=!0,e.body.supportsBreakpointLocationsRequest=!0,e.body.supportsStepInTargetsRequest=!0,e.body.exceptionBreakpointFilters=[{filter:"namedException",label:"Named Exception",default:!1},{filter:"otherExceptions",label:"Other Exceptions",default:!0}],e.body.supportsExceptionInfoRequest=!0,this.sendResponse(e),this.sendEvent(new G.InitializedEvent)}configurationDoneRequest(e,t){super.configurationDoneRequest(e,t),this._configurationDone.notify()}launchRequest(e,t){return Ze(this,null,function*(){G.logger.setup(t.trace?G.Logger.LogLevel.Verbose:G.Logger.LogLevel.Stop,!1),yield this._configurationDone.wait(1e3),yield this._runtime.start(t.program,!!t.stopOnEntry,!!t.noDebug),this.sendResponse(e)})}setBreakPointsRequest(e,t){return Ze(this,null,function*(){let r=t.source.path,i=t.lines||[];this._runtime.clearBreakpoints(r);let s=i.map(f=>Ze(this,null,function*(){let{verified:l,line:y,id:b}=yield this._runtime.setBreakPoint(r,this.convertClientLineToDebugger(f)),C=new G.Breakpoint(l,this.convertDebuggerLineToClient(y));return C.id=b,C})),a=yield Promise.all(s);e.body={breakpoints:a},this.sendResponse(e)})}breakpointLocationsRequest(e,t,r){if(t.source.path){let i=this._runtime.getBreakpoints(t.source.path,this.convertClientLineToDebugger(t.line));e.body={breakpoints:i.map(s=>({line:t.line,column:this.convertDebuggerColumnToClient(s)}))}}else e.body={breakpoints:[]};this.sendResponse(e)}setExceptionBreakPointsRequest(e,t){return Ze(this,null,function*(){let r=void 0,i=!1;t.filters&&t.filters.indexOf("otherExceptions")>=0&&(i=!0),this._runtime.setExceptionsFilters(r,i),this.sendResponse(e)})}exceptionInfoRequest(e,t){e.body={exceptionId:"Exception ID",description:"This is a descriptive description of the exception.",breakMode:"always",details:{message:"Message contained in the exception.",typeName:"Short type name of the exception object",stackTrace:`stack frame 1
stack frame 2`}},this.sendResponse(e)}threadsRequest(e){e.body={threads:[new G.Thread(rn.threadID,"thread 1")]},this.sendResponse(e)}stackTraceRequest(e,t){let r=typeof t.startFrame=="number"?t.startFrame:0,i=typeof t.levels=="number"?t.levels:1e3,s=r+i,a=this._runtime.stack(r,s);e.body={stackFrames:a.frames.map(f=>{let l=new G.StackFrame(f.index,f.name,this.createSource(f.file),this.convertDebuggerLineToClient(f.line));return typeof f.column=="number"&&(l.column=this.convertDebuggerColumnToClient(f.column)),l}),totalFrames:a.count},this.sendResponse(e)}scopesRequest(e,t){e.body={scopes:[new G.Scope("Local",this._variableHandles.create("local"),!1),new G.Scope("Global",this._variableHandles.create("global"),!0)]},this.sendResponse(e)}variablesRequest(e,t,r){return Ze(this,null,function*(){let i=[];if(this._isLongrunning.get(t.variablesReference)){r&&this._cancelationTokens.set(r.seq,!1);for(let s=0;s<100&&(yield Vo(1e3),i.push({name:`i_${s}`,type:"integer",value:`${s}`,variablesReference:0}),!(r&&this._cancelationTokens.get(r.seq)));s++);r&&this._cancelationTokens.delete(r.seq)}else{let s=this._variableHandles.get(t.variablesReference);if(s){let a=12345678;i.push({name:s+"_i",type:"integer",value:this._showHex?"0x"+a.toString(16):a.toString(10),__vscodeVariableMenuContext:"simple",variablesReference:0}),i.push({name:s+"_f",type:"float",value:"3.14",variablesReference:0}),i.push({name:s+"_f",type:"float",value:"6.28",variablesReference:0}),i.push({name:s+"_f",type:"float",value:"6.28",variablesReference:0}),i.push({name:s+"_s",type:"string",value:"hello world",variablesReference:0}),i.push({name:s+"_o",type:"object",value:"Object",variablesReference:this._variableHandles.create(s+"_o")});let f=s+"_long_running",l=this._variableHandles.create(s+"_lr");i.push({name:f,type:"object",value:"Object",variablesReference:l}),this._isLongrunning.set(l,!0)}}e.body={variables:i},this.sendResponse(e)})}continueRequest(e,t){this._runtime.continue(),this.sendResponse(e)}reverseContinueRequest(e,t){this._runtime.continue(!0),this.sendResponse(e)}nextRequest(e,t){this._runtime.step(),this.sendResponse(e)}stepBackRequest(e,t){this._runtime.step(!0),this.sendResponse(e)}stepInTargetsRequest(e,t){let r=this._runtime.getStepInTargets(t.frameId);e.body={targets:r.map(i=>({id:i.id,label:i.label}))},this.sendResponse(e)}stepInRequest(e,t){this._runtime.stepIn(t.targetId),this.sendResponse(e)}stepOutRequest(e,t){this._runtime.stepOut(),this.sendResponse(e)}evaluateRequest(e,t){return Ze(this,null,function*(){let r;if(t.context==="repl"){let i=/new +([0-9]+)/.exec(t.expression);if(i&&i.length===2){let s=yield this._runtime.setBreakPoint(this._runtime.sourceFile,this.convertClientLineToDebugger(parseInt(i[1]))),a=new G.Breakpoint(s.verified,this.convertDebuggerLineToClient(s.line),void 0,this.createSource(this._runtime.sourceFile));a.id=s.id,this.sendEvent(new G.BreakpointEvent("new",a)),r="breakpoint created"}else{let s=/del +([0-9]+)/.exec(t.expression);if(s&&s.length===2){let a=this._runtime.clearBreakPoint(this._runtime.sourceFile,this.convertClientLineToDebugger(parseInt(s[1])));if(a){let f=new G.Breakpoint(!1);f.id=a.id,this.sendEvent(new G.BreakpointEvent("removed",f)),r="breakpoint deleted"}}else{let a=/progress/.exec(t.expression);a&&a.length===1&&(this._reportProgress?(r="progress started",this.progressSequence()):r="frontend doesn't support progress (capability 'supportsProgressReporting' not set)")}}}e.body={result:r||`evaluate(context: '${t.context}', '${t.expression}')`,variablesReference:0},this.sendResponse(e)})}progressSequence(){return Ze(this,null,function*(){let e=""+this._progressId++;yield Vo(100);let t=this._isProgressCancellable?"Cancellable operation":"Long running operation",r=new G.ProgressStartEvent(e,t);r.body.cancellable=this._isProgressCancellable,this._isProgressCancellable=!this._isProgressCancellable,this.sendEvent(r),this.sendEvent(new G.OutputEvent(`start progress: ${e}
`));let i="progress ended";for(let s=0;s<100;s++)if(yield Vo(500),this.sendEvent(new G.ProgressUpdateEvent(e,`progress: ${s}`)),this._cancelledProgressId===e){i="progress cancelled",this._cancelledProgressId=void 0,this.sendEvent(new G.OutputEvent(`cancel progress: ${e}
`));break}this.sendEvent(new G.ProgressEndEvent(e,i)),this.sendEvent(new G.OutputEvent(`end progress: ${e}
`)),this._cancelledProgressId=void 0})}dataBreakpointInfoRequest(e,t){e.body={dataId:null,description:"cannot break on data access",accessTypes:void 0,canPersist:!1},t.variablesReference&&t.name&&(this._variableHandles.get(t.variablesReference)==="global"?(e.body.dataId=t.name,e.body.description=t.name,e.body.accessTypes=["write"],e.body.canPersist=!0):(e.body.dataId=t.name,e.body.description=t.name,e.body.accessTypes=["read","write","readWrite"],e.body.canPersist=!0)),this.sendResponse(e)}setDataBreakpointsRequest(e,t){this._runtime.clearAllDataBreakpoints(),e.body={breakpoints:[]};for(let r of t.breakpoints){let i=r.dataId+`_${r.accessType?r.accessType:"write"}`,s=this._runtime.setDataBreakpoint(i);e.body.breakpoints.push({verified:s})}this.sendResponse(e)}completionsRequest(e,t){e.body={targets:[{label:"item 10",sortText:"10"},{label:"item 1",sortText:"01"},{label:"item 2",sortText:"02"},{label:"array[]",start:6,sortText:"03"},{label:"func(arg)",start:5,length:3,sortText:"04"}]},this.sendResponse(e)}cancelRequest(e,t){t.requestId&&this._cancelationTokens.set(t.requestId,!0),t.requestId&&(this._cancelledProgressId="0"+t.requestId)}customRequest(e,t,r){e==="toggleFormatting"?(this._showHex=!this._showHex,this._useInvalidatedEvent&&this.sendEvent(new G.InvalidatedEvent(["variables"])),this.sendResponse(t)):super.customRequest(e,t,r)}createSource(e){return new G.Source((0,bp.basename)(e),this.convertDebuggerPathToClient(e),void 0,void 0,"slang-adapter-data")}},cs=rn;cs.threadID=1;"use strict";function _p(n,e){n.subscriptions.push(re.commands.registerCommand("extension.slang-debug.runEditorContents",s=>{let a=s;!a&&re.window.activeTextEditor&&(a=re.window.activeTextEditor.document.uri),a&&re.debug.startDebugging(void 0,{type:"slang",name:"Run File",request:"launch",program:a.fsPath},{noDebug:!0})}),re.commands.registerCommand("extension.slang-debug.debugEditorContents",s=>{let a=s;!a&&re.window.activeTextEditor&&(a=re.window.activeTextEditor.document.uri),a&&re.debug.startDebugging(void 0,{type:"slang",name:"Debug File",request:"launch",program:a.fsPath})}),re.commands.registerCommand("extension.slang-debug.toggleFormatting",s=>{let a=re.debug.activeDebugSession;a&&a.customRequest("toggleFormatting")})),n.subscriptions.push(re.commands.registerCommand("extension.slang-debug.getProgramName",s=>re.window.showInputBox({placeHolder:"Please enter the name of a slang file in the workspace folder",value:"readme.md"})));let t=new us;n.subscriptions.push(re.debug.registerDebugConfigurationProvider("ap",t));let r=new us;n.subscriptions.push(re.debug.registerDebugConfigurationProvider("fgl",r));let i=new us;n.subscriptions.push(re.debug.registerDebugConfigurationProvider("slang",i)),n.subscriptions.push(re.debug.registerDebugConfigurationProvider("slang",{provideDebugConfigurations(s){return[{name:"slang Launch",request:"launch",type:"slang",program:"${file}"}]}},re.DebugConfigurationProviderTriggerKind.Dynamic)),n.subscriptions.push(re.debug.registerDebugConfigurationProvider("slang",{provideDebugConfigurations(s){return[{name:"fgl Launch",request:"launch",type:"fgl",program:"${file}"}]}},re.DebugConfigurationProviderTriggerKind.Dynamic)),n.subscriptions.push(re.debug.registerDebugConfigurationProvider("slang",{provideDebugConfigurations(s){return[{name:"Enter debugger and await breakpoint or exception",request:"attach",type:"ap",program:"${file}"},{name:"Enter debugger and halt at start of current AP file",request:"launch",type:"ap",program:"${file}"},{name:"Enter debugger and halt at start of ANY AP file",request:"launch",type:"ap",program:""}]}},re.DebugConfigurationProviderTriggerKind.Dynamic)),e||(e=new Cp),n.subscriptions.push(re.debug.registerDebugAdapterDescriptorFactory("ap",e)),"dispose"in e&&n.subscriptions.push(e),n.subscriptions.push(re.debug.registerDebugAdapterDescriptorFactory("fgl",e)),"dispose"in e&&n.subscriptions.push(e),n.subscriptions.push(re.debug.registerDebugAdapterDescriptorFactory("slang",e)),"dispose"in e&&n.subscriptions.push(e)}var us=class{resolveDebugConfiguration(e,t,r){if(!t.type&&!t.request&&!t.name){let i=re.window.activeTextEditor;i&&i.document.languageId==="ap"&&(t.type="ap",t.name="Launch",t.request="launch",t.program="${file}",t.stopOnEntry=!0),i&&i.document.languageId==="fgl"&&(t.type="fgl",t.name="Launch",t.request="launch",t.program="${file}",t.stopOnEntry=!0),i&&i.document.languageId==="slang"&&(t.type="slang",t.name="Launch",t.request="launch",t.program="${file}",t.stopOnEntry=!0)}return t.program?t:re.window.showInformationMessage("Cannot find a program to debug").then(i=>{})}},TC={readFile(n){return Ze(this,null,function*(){try{let e=re.Uri.file(n),t=yield re.workspace.fs.readFile(e);return Buffer.from(t).toString("utf8")}catch(e){try{let t=re.Uri.parse(n),r=yield re.workspace.fs.readFile(t);return Buffer.from(r).toString("utf8")}catch(t){return`cannot read '${n}'`}}})}},Cp=class{createDebugAdapterDescriptor(e,t){return new re.DebugAdapterInlineImplementation(new cs(TC))}};"use strict";function Sp(n){_p(n,new Tp)}var Tp=class{createDebugAdapterDescriptor(e,t){return new wp.DebugAdapterServer(9772)}};var Ep=Gt(require("path"));function EC(n){n.subscriptions.push(Un.commands.registerCommand("extension.Slang-debug.getProgramName",r=>Un.window.showInputBox({placeHolder:"Please enter the name of a file in the workspace folder",value:"page.ap"})));let e=new Map;Un.workspace.registerTextDocumentContentProvider("embedded-content",{provideTextDocumentContent:r=>{let i=r.path.slice(1).slice(0,-4),s=decodeURIComponent(i);return e.get(s)}});let t={documentSelector:[{scheme:"file",language:"slang"},{scheme:"file",language:"fgl"},{scheme:"file",language:"ap"}],synchronize:{fileEvents:Un.workspace.createFileSystemWatcher("**/*.*")}};Sp(n);{let i={command:n.asAbsolutePath(Ep.join("./dist","slangd.exe")),args:["-c"]};new Dp.LanguageClient("Slang","Slang Language Server",i,t).start()}}0&&(module.exports={activate});
